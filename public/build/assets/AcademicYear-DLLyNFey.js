import{i as c,j as A,c as a,a as m,u as C,h as Y,w as y,b as e,d as x,t as l,o as r,F as g,r as S,k as f,v as b,m as v}from"./app-Cup9LyL2.js";import{_ as j}from"./AuthenticatedLayout-BaJdhlxq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex items-center justify-between"},V={key:0,class:"mt-2 inline-flex items-center gap-2"},M={class:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] font-semibold text-emerald-700 ring-1 ring-emerald-200"},$={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},B={class:"mb-3 flex items-center justify-between"},D={class:"text-sm font-medium text-gray-700"},F={class:"overflow-x-auto"},P={class:"min-w-full text-left text-sm"},T={key:0},U={class:"px-3 py-2 align-top font-mono text-xs text-gray-900"},z={class:"px-3 py-2 align-top"},E={key:0,class:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-emerald-700 ring-1 ring-emerald-200"},L={key:1,class:"inline-flex items-center rounded-full bg-gray-50 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-gray-500 ring-1 ring-gray-200"},R={class:"px-3 py-2 align-top text-[11px] text-gray-600"},q={class:"px-3 py-2 align-top text-[11px] text-gray-600"},G={class:"px-3 py-2 align-top"},H={class:"flex justify-end gap-2"},I=["onClick"],J={key:1,class:"text-[11px] text-gray-400"},K={key:0,class:"fixed inset-0 z-30 flex items-center justify-center bg-black/40 px-4 py-6"},O={class:"w-full max-w-md rounded-xl bg-white p-5 shadow-xl"},Q={class:"mb-4 flex items-center justify-between"},W={class:"space-y-3 text-xs text-gray-700"},X={class:"mt-4 flex justify-end gap-2"},ae={__name:"AcademicYear",props:{years:{type:Array,default:()=>[]}},setup(d){const h=d,n=c(!1),o=c(""),i=c(""),p=A(()=>h.years.find(u=>u.is_current)),w=()=>{o.value="",i.value="",n.value=!0},_=()=>{o.value&&v.post(route("settings.academic-year.store"),{year:o.value,notes:i.value},{preserveScroll:!0,onSuccess:()=>{n.value=!1}})},k=u=>{v.put(route("settings.academic-year.set-current",u),{},{preserveScroll:!0})};return(u,t)=>(r(),a(g,null,[m(C(Y),{title:"Academic Year"}),m(j,null,{header:y(()=>[e("div",N,[e("div",null,[t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Academic Year ",-1)),t[6]||(t[6]=e("p",{class:"mt-1 text-sm text-gray-500"}," Manage your school academic years. The current year controls where new student and exam data is attached. ",-1)),p.value?(r(),a("div",V,[t[4]||(t[4]=e("span",{class:"text-[11px] uppercase tracking-wide text-gray-500"}," Active year: ",-1)),e("span",M,l(p.value.year),1)])):x("",!0)]),e("button",{type:"button",class:"inline-flex items-center gap-1 rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none",onClick:w},[...t[7]||(t[7]=[e("span",{class:"text-base leading-none"},"+",-1),e("span",null,"Add Academic Year",-1)])])])]),default:y(()=>[e("div",$,[e("div",B,[e("p",D," Academic years ("+l(d.years.length)+") ",1)]),e("div",F,[e("table",P,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Year"),e("th",{class:"px-3 py-2"},"Status"),e("th",{class:"px-3 py-2"},"Students"),e("th",{class:"px-3 py-2"},"Results"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[d.years.length===0?(r(),a("tr",T,[...t[8]||(t[8]=[e("td",{colspan:"5",class:"px-3 py-4 text-center text-xs text-gray-500"}," No academic years defined yet. ",-1)])])):x("",!0),(r(!0),a(g,null,S(d.years,s=>(r(),a("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",U,l(s.year),1),e("td",z,[s.is_current?(r(),a("span",E," Current ")):(r(),a("span",L," Past "))]),e("td",R,l(s.students_count)+" students ",1),e("td",q,l(s.results_count)+" records ",1),e("td",G,[e("div",H,[s.is_current?(r(),a("span",J," Active year ")):(r(),a("button",{key:0,type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:Z=>k(s.id)}," Set as current ",8,I))])])]))),128))])])]),t[10]||(t[10]=e("p",{class:"mt-4 text-[11px] text-gray-500"}," Changing the current academic year will affect where new students, classes and exam data are recorded. Past years act as history for reporting. ",-1))]),n.value?(r(),a("div",K,[e("div",O,[e("div",Q,[t[11]||(t[11]=e("h3",{class:"text-sm font-semibold text-gray-800"}," Add Academic Year ",-1)),e("button",{type:"button",class:"rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",onClick:t[0]||(t[0]=s=>n.value=!1)}," âœ• ")]),e("div",W,[e("div",null,[t[12]||(t[12]=e("label",{class:"mb-1 block font-medium"},"Year",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. 2025"},null,512),[[b,o.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"mb-1 block font-medium"},"Notes (optional)",-1)),f(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s),rows:"3",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Any extra information about this academic year"},null,512),[[b,i.value]])])]),e("div",X,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[3]||(t[3]=s=>n.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:_}," Save ")])])])):x("",!0)]),_:1})],64))}};export{ae as default};

import{_ as b}from"./AuthenticatedLayout-ChD-rNy6.js";import{n as y,c as r,a as p,u as _,h as f,w as g,b as e,t as l,d as v,o as i,F as d,r as m,s as j,m as w}from"./app-B9rP2slJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const k={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},A={class:"mb-3 flex items-center justify-between gap-3"},C={class:"text-sm font-medium text-gray-700"},S={class:"overflow-x-auto"},T={class:"min-w-full text-left text-sm"},N={key:0},B={class:"px-3 py-2 align-top"},V={class:"px-3 py-2 align-top"},E={class:"flex flex-col"},F={class:"text-gray-800"},$={class:"text-[10px] text-gray-500"},z={class:"px-3 py-2 align-top"},D={class:"flex flex-wrap gap-1"},L=["onClick"],H={__name:"AssignTeachers",props:{teachers:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]}},setup(c){const o=y(c.teachers.map(a=>({id:a.id,name:a.name,email:a.email,username:a.username,subject_ids:[...a.subject_ids]}))),x=(a,t)=>{const s=o.find(u=>u.id===a);if(!s)return;const n=s.subject_ids.indexOf(t);n===-1?s.subject_ids.push(t):s.subject_ids.splice(n,1)},h=()=>{const a=o.map(t=>({teacher_id:t.id,subject_ids:t.subject_ids}));w.post(route("subjects.assign-teachers.save"),{assignments:a},{preserveScroll:!0})};return(a,t)=>(i(),r(d,null,[p(_(f),{title:"Assign Teachers to Subjects"}),p(b,null,{header:g(()=>[e("div",{class:"flex items-center justify-between"},[t[1]||(t[1]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Assign Teachers to Subjects "),e("p",{class:"mt-1 text-sm text-gray-500"}," Inline assign one or more subjects to each teacher. Changes are saved for the whole table. ")],-1)),e("button",{type:"button",class:"inline-flex items-center gap-1 rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none",onClick:h},[...t[0]||(t[0]=[e("span",{class:"text-base leading-none"},"âœ”",-1),e("span",null,"Save Assignments",-1)])])])]),default:g(()=>[e("div",k,[e("div",A,[e("p",C," Teachers ("+l(o.length)+") ",1),t[2]||(t[2]=e("p",{class:"text-[11px] text-gray-500"}," Click on subjects to toggle assignment. A teacher can teach multiple subjects. ",-1))]),e("div",S,[e("table",T,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Teacher"),e("th",{class:"px-3 py-2"},"Username / Email"),e("th",{class:"px-3 py-2"},"Subjects")])],-1)),e("tbody",null,[o.length===0?(i(),r("tr",N,[...t[3]||(t[3]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-xs text-gray-500"},' No teachers found yet. Set some users with role = "teacher" first. ',-1)])])):v("",!0),(i(!0),r(d,null,m(o,s=>(i(),r("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",B,l(s.name),1),e("td",V,[e("div",E,[e("span",F,l(s.username||s.email),1),e("span",$,l(s.email),1)])]),e("td",z,[e("div",D,[(i(!0),r(d,null,m(c.subjects,n=>(i(),r("button",{key:n.id,type:"button",class:j(["rounded-full px-2 py-0.5 text-[10px] font-medium ring-1",s.subject_ids.includes(n.id)?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"]),onClick:u=>x(s.id,n.id)},l(n.subject_code),11,L))),128))])])]))),128))])])])])]),_:1})],64))}};export{H as default};

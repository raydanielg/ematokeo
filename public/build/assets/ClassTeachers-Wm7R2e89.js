import{n as w,j as b,c as o,a as _,u as v,h as k,w as h,b as e,d as p,o as n,F as i,r as x,s as y,f as S,t as d,k as C,p as T,m as V}from"./app-_N3hh8bc.js";import{_ as A}from"./AuthenticatedLayout-DntgDnnN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},E={class:"overflow-x-auto"},N={class:"min-w-full text-left text-sm"},M={key:0},j={class:"px-3 py-2 align-top"},D={class:"flex flex-col"},F={key:0,class:"mr-1 text-gray-400"},I={key:1,class:"text-gray-500"},L={class:"px-3 py-2 align-top"},U={class:"flex flex-col text-[11px] text-gray-700"},z={key:0,class:"text-[10px] text-gray-500"},P={class:"px-3 py-2 align-top"},R=["onUpdate:modelValue"],$=["value"],O={__name:"ClassTeachers",props:{classes:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]}},setup(u){const c=w(u.classes.map(r=>({id:r.id,name:r.name,level:r.level,stream:r.stream,parent_class_id:r.parent_class_id,parent_name:r.parent_name,teacher_id:r.teacher_id,teacher_name:r.teacher_name}))),m=b(()=>{const r=new Map,a=new Map;c.forEach(t=>{const l=t.parent_class_id?String(t.parent_class_id):"";if(!l){r.set(String(t.id),t);return}a.has(l)||a.set(l,[]),a.get(l).push(t)});const s=[];return c.forEach(t=>{if(t.parent_class_id)return;const l=String(t.id);s.push({type:"base",row:t}),(a.get(l)||[]).forEach(f=>s.push({type:"stream",row:f}))}),c.forEach(t=>{if(!t.parent_class_id)return;const l=String(t.parent_class_id);r.has(l)||s.push({type:"stream",row:t})}),s}),g=()=>{const r=c.map(a=>({class_id:a.id,teacher_id:a.teacher_id}));V.post(route("classes.assign-teachers.save"),{assignments:r},{preserveScroll:!0})};return(r,a)=>(n(),o(i,null,[_(v(k),{title:"Class Teachers"}),_(A,null,{header:h(()=>[e("div",{class:"flex items-center justify-between"},[a[0]||(a[0]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Class Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," Assign one teacher to be responsible for each class stream. ")],-1)),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:g}," Save Class Teacher Assignments ")])]),default:h(()=>[e("div",B,[e("div",E,[e("table",N,[a[3]||(a[3]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Class"),e("th",{class:"px-3 py-2"},"Level / Stream"),e("th",{class:"px-3 py-2"},"Class Teacher")])],-1)),e("tbody",null,[c.length===0?(n(),o("tr",M,[...a[1]||(a[1]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-xs text-gray-500"}," No classes defined yet. ",-1)])])):p("",!0),(n(!0),o(i,null,x(m.value,s=>(n(),o("tr",{key:s.row.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",j,[e("div",D,[e("span",{class:y(["font-medium text-gray-800",s.type==="stream"?"pl-5":""])},[s.type==="stream"?(n(),o("span",F,"↳")):p("",!0),S(" "+d(s.type==="stream"&&s.row.parent_name||s.row.name)+" ",1),s.type==="stream"&&s.row.stream?(n(),o("span",I," - "+d(s.row.stream),1)):p("",!0)],2),s.row.parent_name?(n(),o("span",{key:0,class:y(["text-[10px] text-gray-500",s.type==="stream"?"pl-5":""])}," Base: "+d(s.row.parent_name),3)):p("",!0)])]),e("td",L,[e("div",U,[e("span",null,d(s.row.level||"—"),1),s.row.stream?(n(),o("span",z,"Stream: "+d(s.row.stream),1)):p("",!0)])]),e("td",P,[C(e("select",{"onUpdate:modelValue":t=>s.row.teacher_id=t,class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[a[2]||(a[2]=e("option",{value:null},"-- Select teacher --",-1)),(n(!0),o(i,null,x(u.teachers,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,$))),128))],8,R),[[T,s.row.teacher_id]])])]))),128))])])])])]),_:1})],64))}};export{O as default};

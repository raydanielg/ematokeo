import{y as S,i as v,c as a,a as h,u as o,h as A,w,b as e,d as g,x as M,k as i,v as m,p as N,t as n,o as d,F as b,r as _,q as U,f,m as k}from"./app-B6i2SZ1J.js";import{_ as F}from"./AuthenticatedLayout-mYDbconH.js";import"./ApplicationLogo-Crttro7A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"grid gap-6 lg:grid-cols-3 mb-6"},I={class:"lg:col-span-2 rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},B={class:"grid grid-cols-2 gap-3"},Y={class:"grid grid-cols-3 gap-3"},$={class:"mt-4 flex justify-end gap-2"},q=["disabled"],L={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},O={class:"max-h-64 space-y-1 overflow-y-auto pr-1 text-xs text-gray-700"},z={class:"font-medium text-gray-800"},R=["value"],G={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},H={class:"overflow-x-auto"},J={class:"min-w-full text-left text-xs"},K={key:0},P={class:"px-3 py-2 align-top"},Q={class:"flex flex-col"},W={class:"font-medium text-gray-900"},X={class:"px-3 py-2 align-top"},Z={class:"px-3 py-2 align-top"},ee={class:"flex flex-col"},te={key:0,class:"text-[10px] text-gray-500"},se={class:"px-3 py-2 align-top"},le={class:"flex flex-col text-[10px] text-gray-600"},oe={key:0},re={key:0},ae={key:1},de={class:"px-3 py-2 align-top"},ne={class:"flex justify-end gap-2"},ie=["onClick"],ue=["onClick"],me=["onClick"],pe={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6"},xe={class:"w-full max-w-sm rounded-xl bg-white p-5 shadow-xl"},ye={class:"mb-3 text-[11px] text-gray-600"},ce={class:"font-semibold"},we={__name:"CreateExam",props:{classes:{type:Array,default:()=>[]},year:{type:[String,Number],default:()=>new Date().getFullYear()},classLevels:{type:Array,default:()=>[]},exams:{type:Array,default:()=>[]}},setup(p){const l=S({name:"",type:"",academic_year:String(p.year||""),start_date:"",end_date:"",term:"",notes:"",levels:[]});let x=null;const y=v(!1),u=v(null),E=()=>{x?l.post(route("exams.update",x)):l.post(route("exams.store"))},C=r=>{u.value=r,y.value=!0},D=()=>{u.value&&k.delete(route("exams.destroy",u.value.id),{preserveScroll:!0,onFinish:()=>{y.value=!1,u.value=null}})},T=()=>{y.value=!1,u.value=null},V=r=>{x=r.id,l.name=r.name||"",l.type=r.type||"",l.academic_year=r.academic_year||"",l.start_date=r.start_date||"",l.end_date=r.end_date||"",l.term=r.term||"",l.notes=r.notes||"",l.levels=Array.isArray(r.levels)?[...r.levels]:[]};return(r,t)=>(d(),a(b,null,[h(o(A),{title:"Create Exam"}),h(F,null,{header:w(()=>[...t[8]||(t[8]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Create Exam "),e("p",{class:"mt-1 text-sm text-gray-500"}," Define a new exam and select which classes will sit for it. ")])],-1)])]),default:w(()=>[e("div",j,[e("div",I,[e("form",{class:"space-y-3 text-xs text-gray-700",onSubmit:M(E,["prevent"])},[e("div",null,[t[9]||(t[9]=e("label",{class:"mb-1 block font-medium"},"Exam Name",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Midterm Examination 2025",required:""},null,512),[[m,o(l).name]])]),e("div",B,[e("div",null,[t[11]||(t[11]=e("label",{class:"mb-1 block font-medium"},"Exam Type",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(l).type=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...t[10]||(t[10]=[e("option",{value:""},"Select type",-1),e("option",{value:"Midterm"},"Midterm",-1),e("option",{value:"Terminal"},"Terminal",-1),e("option",{value:"Mock"},"Mock",-1),e("option",{value:"Trial"},"Trial",-1),e("option",{value:"Other"},"Other",-1)])],512),[[N,o(l).type]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"mb-1 block font-medium"},"Term",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(l).term=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Term I"},null,512),[[m,o(l).term]])])]),e("div",Y,[e("div",null,[t[13]||(t[13]=e("label",{class:"mb-1 block font-medium"},"Academic Year",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(l).academic_year=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[m,o(l).academic_year]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1 block font-medium"},"Start Date",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(l).start_date=s),type:"date",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[m,o(l).start_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block font-medium"},"End Date",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(l).end_date=s),type:"date",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[m,o(l).end_date]])])]),e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block font-medium"},"Notes (optional)",-1)),i(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(l).notes=s),rows:"3",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Any special instructions or scope for this exam (e.g. Chapters 1-5 only)"},null,512),[[m,o(l).notes]])]),e("div",$,[e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",disabled:o(l).processing},n(o(x)?"Update Exam":"Save Exam"),9,q)])],32)]),e("div",L,[t[17]||(t[17]=e("h3",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Classes Sitting For This Exam ",-1)),t[18]||(t[18]=e("p",{class:"mb-2 text-[11px] text-gray-500"}," Select one or more class levels that will sit for this exam (e.g. Form I, Form II). Streams (A, B, C) will be handled automatically. ",-1)),e("div",O,[(d(!0),a(b,null,_(p.classLevels,s=>(d(),a("label",{key:s,class:"flex items-center justify-between rounded px-2 py-1 hover:bg-gray-50"},[e("span",z,n(s),1),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=c=>o(l).levels=c),value:s,type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,8,R),[[U,o(l).levels]])]))),128))])])]),e("div",G,[t[21]||(t[21]=e("h3",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Existing Exams ",-1)),t[22]||(t[22]=e("p",{class:"mb-3 text-[11px] text-gray-500"}," These are the exams you have created. You can quickly jump to entering marks or remove an exam that is no longer needed. ",-1)),e("div",H,[e("table",J,[t[20]||(t[20]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-[11px] font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Name"),e("th",{class:"px-3 py-2"},"Type"),e("th",{class:"px-3 py-2"},"Year / Term"),e("th",{class:"px-3 py-2"},"Dates"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[p.exams.length?g("",!0):(d(),a("tr",K,[...t[19]||(t[19]=[e("td",{colspan:"5",class:"px-3 py-4 text-center text-[11px] text-gray-400"}," No exams have been created yet. ",-1)])])),(d(!0),a(b,null,_(p.exams,s=>(d(),a("tr",{key:s.id,class:"border-b border-gray-100 text-[11px] text-gray-700 hover:bg-gray-50"},[e("td",P,[e("div",Q,[e("span",W,n(s.name),1)])]),e("td",X,n(s.type||"—"),1),e("td",Z,[e("div",ee,[e("span",null,n(s.academic_year||"—"),1),s.term?(d(),a("span",te,n(s.term),1)):g("",!0)])]),e("td",se,[e("div",le,[s.start_date||s.end_date?(d(),a("span",oe,[f(n(s.start_date||"—")+" ",1),s.end_date?(d(),a("span",re," → "+n(s.end_date),1)):g("",!0)])):(d(),a("span",ae,"—"))])]),e("td",de,[e("div",ne,[e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[10px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100",onClick:c=>o(k).get(r.route("exams.results",s.id))}," View Results ",8,ie),e("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:c=>V(s)}," Edit ",8,ue),e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[10px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",onClick:c=>C(s)}," Delete ",8,me)])])]))),128))])])])]),y.value&&u.value?(d(),a("div",pe,[e("div",xe,[t[25]||(t[25]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-800"}," Delete Exam ",-1)),e("p",ye,[t[23]||(t[23]=f(" Are you sure you want to permanently delete the exam ",-1)),e("span",ce,'"'+n(u.value.name)+'"',1),t[24]||(t[24]=f("? This action cannot be undone. ",-1))]),e("div",{class:"mt-3 flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:T}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:D}," Delete ")])])])):g("",!0)]),_:1})],64))}};export{we as default};

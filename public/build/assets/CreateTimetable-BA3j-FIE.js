import{i as S,j as k,I as ie,y as Qe,c,a as _e,u as y,h as et,w as ke,d as w,b as s,o as u,x as z,f as $,t as p,F as _,r as A,s as O,k as E,v as U,p as Se}from"./app-D5pxZNti.js";import{_ as tt}from"./AuthenticatedLayout-BuRdYloQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const st={class:"flex items-center justify-between"},rt={key:0,class:"mb-3 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[10px] text-amber-900"},ot={class:"mt-1 max-h-24 overflow-y-auto"},at={class:"flex items-center gap-2"},lt={class:"max-h-full w-full max-w-3xl overflow-y-auto rounded-2xl bg-white p-6 text-xs text-gray-700 shadow-2xl ring-1 ring-gray-200"},nt={class:"mb-3 flex items-center justify-between"},it={class:"mb-3 flex flex-wrap items-center justify-between gap-2"},dt={class:"text-[11px] text-gray-600"},ct={class:"font-semibold"},ut={class:"font-semibold"},mt={class:"overflow-hidden rounded-lg border border-gray-200"},bt={class:"min-w-full border-collapse text-[11px]"},pt={key:0},gt={class:"border-b border-gray-100 px-3 py-2 font-semibold text-gray-800"},xt={class:"border-b border-gray-100 px-3 py-2"},yt={class:"border-b border-gray-100 px-3 py-2"},ft={class:"max-h-full w-full max-w-3xl overflow-y-auto rounded-2xl bg-white p-6 text-xs text-gray-700 shadow-2xl ring-1 ring-gray-200"},ht={class:"mb-3 flex items-center justify-between"},vt={class:"mb-3 grid grid-cols-1 gap-2 sm:grid-cols-2"},_t={class:"flex items-center justify-end gap-2"},kt={class:"max-h-[55vh] overflow-y-auto rounded-lg border border-gray-200 bg-gray-50 p-3"},St={key:0,class:"py-6 text-center text-[11px] text-gray-500"},wt={key:1,class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},Nt=["checked","onChange"],jt={class:"font-semibold text-gray-800"},Ct={class:"mt-4 flex items-center justify-end gap-2"},Bt={key:2,class:"fixed inset-0 z-50 pointer-events-none"},It={class:"absolute inset-y-0 right-0 flex w-[340px] max-w-[90vw] pointer-events-auto"},Vt={class:"flex h-full w-full flex-col overflow-hidden rounded-l-2xl bg-white shadow-2xl ring-1 ring-gray-200"},At={class:"p-4"},Lt={class:"mb-3 text-[11px] text-gray-500"},Dt={class:"font-semibold"},Tt={key:0},Et={class:"font-semibold"},Mt={class:"flex-1 overflow-y-auto rounded-lg border border-gray-200 bg-gray-50 p-2"},$t={key:0,class:"px-2 py-6 text-center text-xs text-gray-500"},Ut={key:1,class:"flex flex-wrap gap-2"},Ft=["onDragstart"],Pt={class:"space-y-4"},zt={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},Ot={class:"mt-2 mb-3 flex flex-wrap items-center justify-between gap-3 text-[9px] text-gray-600"},Kt={class:"flex flex-wrap items-center gap-2"},Rt=["value"],Yt={key:0,value:"",disabled:""},Ht=["value"],Wt={class:"flex flex-wrap items-center gap-2"},Gt=["disabled"],qt=["disabled"],Xt={key:1,class:"mb-3 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[10px] text-amber-900"},Jt={class:"mt-1 max-h-24 overflow-y-auto"},Zt={class:"border-b border-gray-300 bg-white px-4 py-3 text-center"},Qt={class:"text-[11px] font-semibold uppercase tracking-wide text-gray-800"},es={class:"text-[9px] text-gray-600"},ts={class:"text-[9px] text-gray-700"},ss={class:"font-semibold"},rs={key:0},os={class:"font-semibold"},as={class:"grid grid-cols-3 gap-2 border-b border-gray-200 bg-emerald-50/60 px-4 py-1.5 text-[9px] text-gray-700"},ls={class:"ml-1"},ns={class:"ml-1"},is={class:"text-right"},ds={class:"ml-1"},cs={class:"overflow-x-auto bg-slate-50 px-2 pb-3 pt-2"},us={class:"min-w-full border-collapse text-[10px] leading-tight"},ms=["rowspan"],bs=["rowspan"],ps={class:"border border-slate-300 bg-slate-50 px-1 py-1 text-center"},gs=["draggable","onDragstart","onDrop"],xs={key:0,class:"ml-1 rounded bg-emerald-200 px-1 text-[8px] font-bold text-emerald-900"},ys={class:"break-words text-[9px] font-semibold leading-tight text-gray-700"},fs={key:1},hs=["draggable","onDragstart","onDrop"],vs={key:0,class:"font-semibold text-orange-700"},_s={key:0,class:"ml-1 rounded bg-indigo-200 px-1 text-[8px] font-bold text-indigo-900"},ks={class:"break-words text-[9px] font-semibold leading-tight text-gray-700"},Ss={key:1},ws=["draggable","onDragstart","onDrop"],Ns={key:0},js={key:1},Cs={key:2},Bs={key:0,class:"ml-1 rounded bg-slate-200 px-1 text-[8px] font-bold text-slate-900"},Is={class:"break-words text-[9px] font-semibold leading-tight text-gray-700"},Vs={key:1,class:"font-semibold text-gray-400"},As={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},Ls={class:"max-h-full w-full max-w-2xl overflow-y-auto rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},Ds={class:"mb-3 flex items-center justify-between"},Ts={class:"space-y-3"},Es={class:"grid grid-cols-3 gap-2"},Ms={class:"grid grid-cols-2 gap-3"},$s={class:"grid grid-cols-2 gap-3"},Us={class:"grid grid-cols-2 gap-2"},Fs={class:"mt-3 flex items-center justify-end gap-2"},Ps=["disabled"];const Ws={__name:"CreateTimetable",props:{school:{type:Object,default:()=>({})},timetable:{type:Object,default:()=>null},subjects:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},teacherAssignments:{type:Object,default:()=>({})}},setup(we){var pe,ge,xe,ye,fe;const v=we,H=S(""),F=S({}),W=S(!1),Z=S(!1),K=S(!1),M=S({type:"",message:""}),G=S(""),Q=S(""),zs=k(()=>{var e;const r=H.value?Number(H.value):null;return!Number.isFinite(r)||!r?{}:((e=F.value)==null?void 0:e[String(r)])||{}}),R=k(()=>{const r=new Set;return(v.subjects||[]).forEach(e=>{const t=String((e==null?void 0:e.subject_code)||"").trim();t&&r.add(t)}),Array.from(r.values()).sort((e,t)=>String(e).localeCompare(String(t)))}),C=S([]);ie(R,r=>{(!Array.isArray(C.value)||C.value.length===0)&&(C.value=Array.isArray(r)?r.slice():[])},{immediate:!0});const de=k(()=>{const r=String(Q.value||"").trim().toUpperCase();return r?(R.value||[]).filter(e=>String(e).toUpperCase().includes(r)):R.value}),Ne=()=>{Z.value=!0},je=()=>{Z.value=!1,G.value=""},ce=k(()=>{const r=new Set((C.value||[]).map(t=>String(t).trim())),e=String(G.value||"").trim().toUpperCase();return(R.value||[]).filter(t=>r.has(String(t).trim())).filter(t=>e?String(t).toUpperCase().includes(e):!0)}),Os=(r,e)=>{const t=H.value?Number(H.value):null;!Number.isFinite(t)||!t||(F.value[String(t)]||(F.value[String(t)]={}),e==="morning"||e==="afternoon"?F.value[String(t)][String(r)]=e:delete F.value[String(t)][String(r)],Ke())},g=Qe({type:"class",title:((pe=v.timetable)==null?void 0:pe.title)||"",class_name:((ge=v.timetable)==null?void 0:ge.class_name)||"",academic_year:((xe=v.timetable)==null?void 0:xe.academic_year)||String(new Date().getFullYear()),term:((ye=v.timetable)==null?void 0:ye.term)||"",start_time:"07:30",end_time:"16:00",schedule_json:((fe=v.timetable)==null?void 0:fe.schedule_json)||null}),Ce=k(()=>v.school.name||"Your School Name"),Be=k(()=>v.school.address||"P.O. Box 123, City"),Ie=k(()=>v.school.region||"Region"),Ve=k(()=>g.type==="invigilation"?"Invigilation Timetable":g.type==="exams"?"Exams Timetable":"School General Timetable");k(()=>(v.subjects||[]).map(r=>r.subject_code));const Ae=k(()=>{const r={};return(v.classes||[]).forEach(e=>{e!=null&&e.id&&(r[String(e.id)]=e)}),r}),Le=k(()=>{const r={};return(v.subjects||[]).forEach(e=>{!(e!=null&&e.subject_code)||!(e!=null&&e.id)||(r[String(e.subject_code)]=Number(e.id))}),r});k(()=>{const r={};return(v.subjects||[]).forEach(e=>{(Array.isArray(e==null?void 0:e.teachers)?e.teachers:[]).forEach(l=>{if(!(l!=null&&l.id))return;const n=String((l==null?void 0:l.initials)||"").trim();n&&(r[n]||(r[n]=Number(l.id)))})}),r});const De=(r,e)=>{var m,b,f,I,N,V;const t=r?String(r):"",l=String(e||"").trim(),n=(m=Ae.value)==null?void 0:m[t],d=n!=null&&n.parent_class_id?String(n.parent_class_id):"",a=(b=v.teacherAssignments)==null?void 0:b[t],o=a!==void 0?a:d?(f=v.teacherAssignments)==null?void 0:f[d]:null;if(o&&typeof o=="object"){const j=o==null?void 0:o[l];return j?String(j):""}const i=(N=(I=v.teacherAssignments)==null?void 0:I[t])==null?void 0:N[l];return i?String(i):((V=Te.value)==null?void 0:V[l])||""},ee=(r,e,t,l)=>{const n=De(r,e),d=String(e||"").trim().toUpperCase(),o=String(n||"").split("/").map(f=>f.trim()).filter(Boolean).filter(f=>String(f).trim().toUpperCase()!==d);if(!o.length)return"";if(o.length===1)return o[0];if(o.length===2)return`${o[0]}/${o[1]}`;const i=String(t||"").toUpperCase(),m=te.indexOf(i),b=Math.max(0,m)*31+Number(l||0);return o[b%o.length]},Te=k(()=>{const r={};return(v.subjects||[]).forEach(e=>{const t=Array.isArray(e.teachers)?e.teachers:[];if(!(e!=null&&e.subject_code)||!t.length)return;const l=t.map(d=>String((d==null?void 0:d.initials)||"").trim()||simpleTeacherName(d==null?void 0:d.name)||String((d==null?void 0:d.name)||"").trim()).filter(Boolean);if(!l.length)return;const n=Array.from(new Set(l));r[e.subject_code]=n.join("/")}),r}),te=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"],se=r=>{const e={1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII"};if(r==null)return"";const t=String(r).trim();if(t==="")return"";const l=Number(t);if(!Number.isNaN(l)&&e[l])return e[l];const n=t.toUpperCase(),d={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,SIX:6,SEVEN:7};if(d[n]&&e[d[n]])return e[d[n]];const a=n.match(/\b(ONE|TWO|THREE|FOUR|FIVE|SIX|SEVEN)\b/);if(a){const i=d[a[1]];if(i&&e[i])return e[i]}if(/^[IVXLCDM]+$/.test(n))return n;const o=n.match(/\b(?:FORM|CLASS|STD|STANDARD)\s*(ONE|TWO|THREE|FOUR|FIVE|SIX|SEVEN|[IVXLCDM]+|\d+)\b/);if(o){const i=o[1],m=d[i];if(m&&e[m])return e[m];const b=Number(i);if(!Number.isNaN(b)&&e[b])return e[b];if(/^[IVXLCDM]+$/.test(i))return i}return""},Ee=r=>{if(!r)return null;const e=String(r).toUpperCase().trim();if(!e)return null;const t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3};let l=0,n=0;for(let d=e.length-1;d>=0;d-=1){const a=t[e[d]];if(!a)return null;a<n?l-=a:(l+=a,n=a)}return l},ue=r=>{const e=re(r);if(!e)return Number.POSITIVE_INFINITY;const t=Ee(e);return t===null?Number.POSITIVE_INFINITY:t},re=r=>se(r==null?void 0:r.parent_name)||se(r==null?void 0:r.level)||se(r==null?void 0:r.name),q=r=>{const e=((r==null?void 0:r.parent_name)||"").trim();if(e)return e;const t=((r==null?void 0:r.name)||"").trim();if(t&&/\b(?:FORM|CLASS|STD|STANDARD)\b/i.test(t))return t;const l=((r==null?void 0:r.level)||"").trim();if(l&&/\b(?:FORM|CLASS|STD|STANDARD)\b/i.test(l))return l;const n=re(r);return n?`Form ${n}`:l||t},X=k(()=>{const r=Array.isArray(v.classes)?v.classes:[],e=new Map;r.forEach(a=>{!a||!a.parent_class_id||!(a.stream&&String(a.stream).trim())||(e.has(a.parent_class_id)||e.set(a.parent_class_id,[]),e.get(a.parent_class_id).push(a))});const t=[];r.filter(a=>!(a!=null&&a.parent_class_id)).forEach(a=>{const o=e.get(a.id)||[];if(o.length){o.slice().sort((i,m)=>String(i.stream||"").localeCompare(String(m.stream||""))).forEach(i=>t.push(i));return}t.push(a)});const l=new Set(r.filter(a=>!(a!=null&&a.parent_class_id)).map(a=>a.id));r.filter(a=>(a==null?void 0:a.parent_class_id)&&!l.has(a.parent_class_id)).forEach(a=>t.push(a));const n=new Set;return t.filter(a=>{const o=a==null?void 0:a.id;return o==null||n.has(o)?!1:(n.add(o),!0)}).sort((a,o)=>{const i=a!=null&&a.parent_class_id&&r.find(x=>Number(x==null?void 0:x.id)===Number(a.parent_class_id))||a,m=o!=null&&o.parent_class_id&&r.find(x=>Number(x==null?void 0:x.id)===Number(o.parent_class_id))||o,b=ue(i),f=ue(m);if(b!==f)return Number(b||0)-Number(f||0);const I=a!=null&&a.parent_class_id?Number(a.parent_class_id):Number((a==null?void 0:a.id)||0),N=o!=null&&o.parent_class_id?Number(o.parent_class_id):Number((o==null?void 0:o.id)||0);if(I!==N)return I-N;const V=(a!=null&&a.stream?String(a.stream):"").toUpperCase(),j=(o!=null&&o.stream?String(o.stream):"").toUpperCase(),h=V.localeCompare(j);return h!==0?h:Number((a==null?void 0:a.id)||0)-Number((o==null?void 0:o.id)||0)})}),Me=k(()=>{const r=new Set,e=[];return(X.value||[]).forEach(t=>{const l=q(t);if(!l)return;const n=String(l);r.has(n)||(r.add(n),e.push(l))}),e}),oe=k(()=>{const r=new Set;return X.value.forEach(e=>{const t=e.stream?String(e.stream).toUpperCase().trim():"";if(t){if(B.value!=="ALL"){const l=q(e);if(l&&l!==B.value)return}r.add(t)}}),r.size===0?[]:Array.from(r.values())}),B=S("ALL"),L=S("ALL");ie(B,()=>{L.value!=="ALL"&&(oe.value.includes(L.value)||(L.value="ALL"))});const $e=k(()=>B.value!=="ALL"&&L.value!=="ALL"?`${B.value} ${L.value}`:B.value!=="ALL"?`${B.value}`:g.class_name||"____"),me=r=>{var a;const e=String(r||"").toUpperCase(),l=(Array.isArray((a=D.value)==null?void 0:a[e])?D.value[e]:[]).map((o,i)=>({row:o,originalIndex:i})).filter(({row:o})=>!(!o||B.value!=="ALL"&&String(o.class_label||o.form||"").trim()!==B.value||L.value!=="ALL"&&String(o.stream||"").toUpperCase().trim()!==String(L.value||"").toUpperCase().trim())),n=new Map;l.forEach(({row:o,originalIndex:i})=>{const m=String(o.class_label||o.form||"").trim()||"CLASS",b=m;n.has(b)||n.set(b,{key:b,label:m,rows:[]}),n.get(b).rows.push({row:o,originalIndex:i})});const d=Array.from(n.values());return d.forEach(o=>{o.rows.sort((i,m)=>{var b,f;return String(((b=i.row)==null?void 0:b.stream)||"").localeCompare(String(((f=m.row)==null?void 0:f.stream)||""))})}),d},Ue=r=>me(r).reduce((e,t)=>{var l;return e+(((l=t==null?void 0:t.rows)==null?void 0:l.length)||0)},0),D=S({}),Fe=()=>{const r={};te.forEach(e=>{r[e]=[],(X.value||[]).forEach(t=>{r[e].push({form:re(t),class_label:q(t),stream:t!=null&&t.stream?String(t.stream).toUpperCase().trim():"",school_class_id:t!=null&&t.id?Number(t.id):null,class_name:(t==null?void 0:t.name)||`${q(t)} ${t!=null&&t.stream?String(t.stream).toUpperCase().trim():""}`.trim(),slots:Array.from({length:9}).map(()=>null)})})}),D.value=r};ie(()=>X.value,r=>{if(!r||!r.length)return;const e=D.value;e&&typeof e=="object"&&Object.keys(e).length||Fe()},{immediate:!0});const P=S([]),Pe=S(0),ze=S(!1);S(!1),S({}),S({status:"idle",attempts:0,message:""});const Oe=k(()=>{var e;return`timetable_subject_session_rules_v1_${((e=v.school)==null?void 0:e.id)??"school"}`}),Ke=()=>{try{window.localStorage.setItem(Oe.value,JSON.stringify(F.value||{}))}catch{}},Re=r=>r>=0&&r<=3?"morning":r>=7&&r<=8?"afternoon":"other",Ye=(r,e)=>{var n;if(!r||!e)return"any";const t=((n=F.value)==null?void 0:n[String(r)])||{},l=t==null?void 0:t[String(e)];return l==="morning"||l==="afternoon"?l:"any"},ae=(r,e,t)=>{var i;const l=new Set(["ENG","B/MAT"]),n=String(e||"").trim().toUpperCase(),d=Re(t);if(l.has(n))return t===4?!0:d==="morning";const a=((i=Le.value)==null?void 0:i[String(e)])||null,o=Ye(r,a);return o==="any"?!0:d===o},He=(r,e)=>e>=7&&e<=8?!["WEDNESDAY","THURSDAY","FRIDAY"].includes(r):!(r==="FRIDAY"&&e===6),T=(r,e)=>{const t=String(r||"").toUpperCase(),l=Number(e);return!Number.isFinite(l)||l<0||l>8?!1:He(t,l)},We=k(()=>{var e;return`timetable_schedule_v3_${((e=v.school)==null?void 0:e.id)??"school"}`}),be=()=>{try{window.localStorage.setItem(We.value,JSON.stringify(D.value||{}))}catch{}},Ge=(r,e,t,l)=>{var N,V;const n=String(r),d=Number(e),a=Number(t),o=String(l||"").trim();if(o&&!new Set((C.value||[]).map(h=>String(h).trim().toUpperCase())).has(o.toUpperCase()))return M.value={type:"error",message:"This subject is not assigned. Use Assign to enable it."},!1;if(!T(n,a))return!1;const i=(V=(N=D.value)==null?void 0:N[n])==null?void 0:V[d];if(!i)return!1;const m=j=>String(j||"").trim().toUpperCase(),b=m(o);if(b&&b!=="PS"){const j=(Array.isArray(i==null?void 0:i.slots)?i.slots:[]).map((h,x)=>({idx:x,subject:m(h==null?void 0:h.subject)})).filter(({subject:h})=>h===b).map(({idx:h})=>h).filter(h=>h!==a);if(j.length>=2)return M.value={type:"error",message:"This subject already appears twice today (max is 2)."},!1;if(j.length===1){const h=j[0];if(!(Math.abs(h-a)===1))return M.value={type:"error",message:"This subject can only appear twice in a day as a double period (place it next to the first one)."},!1}}const f=Number((i==null?void 0:i.school_class_id)||(i==null?void 0:i.id)||(i==null?void 0:i.class_id)||0)||null;if(o&&!ae(f,o,a))return M.value={type:"error",message:"This subject is not allowed in this period."},!1;if(o&&Xe(n,a,d,o))return M.value={type:"error",message:"Teacher clash detected for this period."},!1;M.value={type:"",message:""};const I=o?ee(f,o,n,a):"";return i.slots[a]=o?{subject:o,teacher:I,teacher_initials:I,teacher_name:""}:null,be(),!0},le=(r,e,t)=>{draggedCell.value={day:r,rowIndex:e,slotIndex:t}},qe=r=>{draggedSubjectCode.value=String(r||"").trim(),draggedCell.value=null},Xe=(r,e,t,l)=>{var I,N,V,j;const n=String(r),d=Number(e),a=String(l||"").trim();if(!a)return!1;const o=(N=(I=D.value)==null?void 0:I[n])==null?void 0:N[Number(t)],i=Number((o==null?void 0:o.school_class_id)||(o==null?void 0:o.id)||(o==null?void 0:o.class_id)||(o==null?void 0:o.classId)||(o==null?void 0:o.schoolClassId)||0)||null,m=ee(i,a,n,d),b=String(m||"").split("/").map(h=>h.trim()).filter(Boolean);if(!b.length)return!1;const f=((V=D.value)==null?void 0:V[n])||[];for(let h=0;h<f.length;h+=1){if(h===Number(t))continue;const x=f[h],J=(j=x==null?void 0:x.slots)==null?void 0:j[d],he=J!=null&&J.subject?String(J.subject):"";if(!he)continue;const Je=Number((x==null?void 0:x.school_class_id)||(x==null?void 0:x.id)||(x==null?void 0:x.class_id)||(x==null?void 0:x.classId)||(x==null?void 0:x.schoolClassId)||0)||null,Ze=ee(Je,he,n,d),ve=String(Ze||"").split("/").map(Y=>Y.trim()).filter(Boolean);if(ve.length){for(let Y=0;Y<b.length;Y+=1)if(ve.includes(b[Y]))return!0}}return!1},ne=(r,e,t)=>{var N,V;if(draggedSubjectCode.value){Ge(r,e,t,draggedSubjectCode.value),draggedSubjectCode.value="",draggedCell.value=null;return}if(!draggedCell.value)return;const l=draggedCell.value;if(l.day===r&&l.rowIndex===e&&l.slotIndex===t){draggedCell.value=null;return}const n=(N=D.value[l.day])==null?void 0:N[l.rowIndex],d=(V=D.value[r])==null?void 0:V[e];if(!n||!d){draggedCell.value=null;return}const a=n.slots[l.slotIndex],o=d.slots[t],i=a,m=Number((n==null?void 0:n.school_class_id)||(n==null?void 0:n.id)||(n==null?void 0:n.class_id)||(n==null?void 0:n.classId)||(n==null?void 0:n.schoolClassId)||0)||null,b=Number((d==null?void 0:d.school_class_id)||(d==null?void 0:d.id)||(d==null?void 0:d.class_id)||(d==null?void 0:d.classId)||(d==null?void 0:d.schoolClassId)||0)||null,f=!(o!=null&&o.subject)||ae(m,o.subject,l.slotIndex),I=!(i!=null&&i.subject)||ae(b,i.subject,t);if(!f||!I){draggedCell.value=null;return}n.slots[l.slotIndex]=o,d.slots[t]=i,be(),draggedCell.value=null};return(r,e)=>(u(),c(_,null,[_e(y(et),{title:"Create School Timetable"}),_e(tt,null,{header:ke(()=>[s("div",st,[e[43]||(e[43]=s("div",null,[s("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Create School Timetable "),s("p",{class:"mt-1 text-sm text-gray-500"}," Preview below shows the school general timetable. Use the popup to enter timetable details when you are ready to save. ")],-1)),P.value.length?(u(),c("div",rt,[e[42]||(e[42]=s("div",{class:"font-semibold"},"Limitations check:",-1)),s("div",ot,[(u(!0),c(_,null,A(P.value,(t,l)=>(u(),c("div",{key:l},p(t),1))),128))])])):w("",!0),s("div",at,[s("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:e[0]||(e[0]=t=>r.showDetailsModal=!0)}," Create / Edit Timetable Details ")])])]),default:ke(()=>[W.value?(u(),c("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm px-4 py-6 sm:px-0",onClick:e[3]||(e[3]=z(t=>W.value=!1,["self"]))},[s("div",lt,[s("div",nt,[e[44]||(e[44]=s("div",null,[s("h3",{class:"text-sm font-semibold text-gray-800"}," Teacher Initials Details "),s("p",{class:"mt-0.5 text-[11px] text-gray-500"},' Orodha ya walimu wote na initials zao. Zilizotumika kwenye ratiba zitaonyesha "Used". ')],-1)),s("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:e[1]||(e[1]=t=>W.value=!1)}," Close ")]),s("div",it,[s("div",dt,[e[45]||(e[45]=$(" Used initials: ",-1)),s("span",ct,p(r.usedTeacherInitials.size),1),e[46]||(e[46]=$(" / Total teachers: ",-1)),s("span",ut,p(r.teacherInitialsList.length),1)]),s("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-emerald-500 focus:ring-offset-1",onClick:e[2]||(e[2]=(...t)=>r.downloadTeacherInitials&&r.downloadTeacherInitials(...t))}," Download (CSV) ")]),s("div",mt,[s("table",bt,[e[48]||(e[48]=s("thead",null,[s("tr",{class:"bg-gray-50 text-left"},[s("th",{class:"border-b border-gray-200 px-3 py-2"},"Initials"),s("th",{class:"border-b border-gray-200 px-3 py-2"},"Teacher"),s("th",{class:"border-b border-gray-200 px-3 py-2"},"Used")])],-1)),s("tbody",null,[r.teacherInitialsList.length?w("",!0):(u(),c("tr",pt,[...e[47]||(e[47]=[s("td",{colspan:"3",class:"px-3 py-3 text-center text-[11px] text-gray-500"}," No teachers found. ",-1)])])),(u(!0),c(_,null,A(r.teacherInitialsList,t=>(u(),c("tr",{key:t.id,class:"hover:bg-gray-50"},[s("td",gt,p(t.initials),1),s("td",xt,p(t.simple_name||t.name),1),s("td",yt,[s("span",{class:O(["inline-flex rounded-full px-2 py-0.5 text-[10px] font-semibold",t.used?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-700"])},p(t.used?"Used":"Not used"),3)])]))),128))])])])])])):w("",!0),K.value?(u(),c("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm px-4 py-6 sm:px-0",onClick:e[9]||(e[9]=z(t=>K.value=!1,["self"]))},[s("div",ft,[s("div",ht,[e[49]||(e[49]=s("div",null,[s("div",{class:"text-sm font-semibold text-gray-800"},"Assign Subjects"),s("div",{class:"text-[11px] text-gray-500"},"Chagua masomo yatakayopatikana kwenye ratiba (palette).")],-1)),s("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:e[4]||(e[4]=t=>K.value=!1)}," Close ")]),s("div",vt,[E(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>Q.value=t),type:"text",placeholder:"Search subject...",class:"w-full rounded-md border border-gray-300 px-3 py-2 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[U,Q.value]]),s("div",_t,[s("button",{type:"button",class:"rounded-md bg-white px-3 py-2 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[6]||(e[6]=t=>C.value=R.value.slice())}," Select all "),s("button",{type:"button",class:"rounded-md bg-white px-3 py-2 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[7]||(e[7]=t=>C.value=[])}," Clear ")])]),s("div",kt,[de.value.length?(u(),c("div",wt,[(u(!0),c(_,null,A(de.value,t=>(u(),c("label",{key:t,class:"flex items-center gap-2 rounded-md bg-white px-3 py-2 text-[11px] ring-1 ring-gray-200"},[s("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:C.value.includes(t),onChange:l=>{l.target.checked?C.value.includes(t)||(C.value=C.value.concat([t])):C.value=C.value.filter(n=>n!==t)}},null,40,Nt),s("span",jt,p(t),1)]))),128))])):(u(),c("div",St," No subjects found. "))]),s("div",Ct,[s("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-2 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:e[8]||(e[8]=t=>K.value=!1)}," Done ")])])])):w("",!0),Z.value?(u(),c("div",Bt,[s("div",It,[s("div",Vt,[s("div",{class:"flex items-center justify-between border-b border-gray-100 px-4 py-3"},[e[50]||(e[50]=s("div",null,[s("h3",{class:"text-sm font-semibold text-gray-800"},"Subjects"),s("p",{class:"text-[11px] text-gray-500"},"Drag and drop into the timetable.")],-1)),s("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:je}," Close ")]),s("div",At,[E(s("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>G.value=t),type:"text",placeholder:"Search subject...",class:"mb-2 w-full rounded-md border border-gray-300 px-3 py-2 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[U,G.value]]),s("div",Lt,[e[52]||(e[52]=$(" Filter: ",-1)),s("span",Dt,p(B.value),1),L.value!=="ALL"?(u(),c("span",Tt,[e[51]||(e[51]=$(" · Stream ",-1)),s("span",Et,p(L.value),1)])):w("",!0)]),s("div",Mt,[ce.value.length?(u(),c("div",Ut,[(u(!0),c(_,null,A(ce.value,t=>(u(),c("div",{key:t,draggable:"true",class:"cursor-grab select-none rounded-md bg-white px-3 py-2 text-xs font-semibold text-gray-800 shadow-sm ring-1 ring-gray-200 hover:bg-gray-50 active:cursor-grabbing",onDragstart:l=>qe(t)},p(t),41,Ft))),128))])):(u(),c("div",$t," No subjects found for this class/stream. "))])])])])])):w("",!0),s("div",Pt,[s("div",zt,[e[71]||(e[71]=s("h3",{class:"text-xs font-semibold uppercase tracking-wide text-gray-500"}," Timetable Preview ",-1)),s("div",Ot,[s("div",Kt,[e[55]||(e[55]=s("span",{class:"font-semibold"},"View class:",-1)),E(s("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>B.value=t),class:"rounded border border-gray-300 bg-white px-1 py-0.5 text-[9px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[e[53]||(e[53]=s("option",{value:"ALL"},"All Classes",-1)),(u(!0),c(_,null,A(Me.value,t=>(u(),c("option",{key:t,value:t},p(t),9,Rt))),128))],512),[[Se,B.value]]),E(s("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>L.value=t),class:"rounded border border-gray-300 bg-white px-1 py-0.5 text-[9px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[e[54]||(e[54]=s("option",{value:"ALL"},"All Streams",-1)),oe.value.length?w("",!0):(u(),c("option",Yt,"No streams")),(u(!0),c(_,null,A(oe.value,t=>(u(),c("option",{key:t,value:t},"Stream "+p(t),9,Ht))),128))],512),[[Se,L.value]])]),s("div",Wt,[s("button",{type:"button",class:"rounded-md bg-amber-50 px-2 py-1 text-[10px] font-medium text-amber-800 ring-1 ring-amber-100 hover:bg-amber-100",disabled:!P.value.length,onClick:e[13]||(e[13]=t=>ze.value=!0)}," Resolve ("+p(P.value.length)+") ",9,Gt),s("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:e[14]||(e[14]=(...t)=>r.regenerateSampleTimetable&&r.regenerateSampleTimetable(...t))}," Regenerate Sample Timetable "),s("button",{type:"button",class:"rounded-md bg-white px-2 py-1 text-[10px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:Ne}," Subjects "),s("button",{type:"button",class:"rounded-md bg-white px-2 py-1 text-[10px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[15]||(e[15]=t=>K.value=!0)}," Assign "),s("button",{type:"button",class:"rounded-md bg-emerald-600 px-2 py-1 text-[10px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",disabled:y(g).processing,onClick:e[16]||(e[16]=(...t)=>r.saveTimetable&&r.saveTimetable(...t))},p(y(g).processing?"Saving...":"Save"),9,qt),s("button",{type:"button",class:"rounded-md bg-white px-2 py-1 text-[10px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[17]||(e[17]=t=>W.value=!0)}," Teacher Initials Details "),s("button",{type:"button",class:"rounded-md bg-white px-2 py-1 text-[10px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[18]||(e[18]=(...t)=>r.printTimetable&&r.printTimetable(...t))}," Print ")])]),M.value.message?(u(),c("div",{key:0,class:O(["mb-3 rounded-md border px-3 py-2 text-[11px]",M.value.type==="error"?"border-red-200 bg-red-50 text-red-900":"border-emerald-200 bg-emerald-50 text-emerald-900"])},p(M.value.message),3)):w("",!0),P.value.length?(u(),c("div",Xt,[e[56]||(e[56]=s("div",{class:"font-semibold"},"Limitations check:",-1)),s("div",Jt,[(u(!0),c(_,null,A(P.value,(t,l)=>(u(),c("div",{key:l},p(t),1))),128))])])):w("",!0),(u(),c("div",{id:"class-timetable-preview",key:Pe.value,class:"overflow-hidden rounded-lg border border-gray-300 bg-white text-[11px] text-gray-800",onContextmenu:e[22]||(e[22]=z(()=>{},["prevent"]))},[s("div",Zt,[e[59]||(e[59]=s("div",{class:"mb-1 flex justify-center"},[s("img",{src:"/images/emblem.png",alt:"Emblem",class:"h-8 w-8 object-contain",onerror:"this.style.display='none'"})],-1)),s("div",Qt,p(Ce.value),1),s("div",es,p(Be.value)+" · "+p(Ie.value),1),e[60]||(e[60]=s("div",{class:"mt-1 text-[11px] font-semibold uppercase tracking-wide text-emerald-800"}," SCHOOL GENERAL TIME TABLE ",-1)),s("div",ts,[e[58]||(e[58]=$(" Mwaka: ",-1)),s("span",ss,p(y(g).academic_year||"____"),1),B.value!=="ALL"?(u(),c("span",rs,[e[57]||(e[57]=$(" · Darasa: ",-1)),s("span",os,p($e.value),1)])):w("",!0)])]),s("div",as,[s("div",null,[e[61]||(e[61]=s("span",{class:"font-semibold"},"Kichwa:",-1)),s("span",ls,p(y(g).title||"Ratiba ya Darasa"),1)]),s("div",null,[e[62]||(e[62]=s("span",{class:"font-semibold"},"Muda wa vipindi:",-1)),s("span",ns,p(y(g).start_time)+" - "+p(y(g).end_time),1)]),s("div",is,[e[63]||(e[63]=s("span",{class:"font-semibold"},"Aina ya ratiba:",-1)),s("span",ds,p(Ve.value),1)])]),s("div",cs,[s("table",us,[e[70]||(e[70]=s("thead",null,[s("tr",null,[s("th",{class:"w-12 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," DAY "),s("th",{class:"w-10 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," CLASS "),s("th",{class:"w-12 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," STREAM "),s("th",{class:"w-20 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 07:00 - 07:30 AM "),s("th",{class:"w-14 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 07:30 - 07:50 AM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 08:00 - 08:40 AM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 08:40 - 09:20 AM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 09:20 - 10:00 AM "),s("th",{class:"w-18 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 10:00 - 10:40 AM "),s("th",{class:"w-18 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 10:40 - 11:05 AM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 11:05 - 11:45 AM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 11:45 - 12:25 PM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 12:25 - 01:05 PM "),s("th",{class:"w-18 border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 01:05 - 01:20 PM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 01:20 - 02:00 PM "),s("th",{class:"border border-slate-300 bg-slate-100 px-1 py-1 text-center align-middle"}," 02:00 - 02:40 PM "),s("th",{class:"w-20 border border-slate-300 bg-emerald-100 px-1 py-1 text-center align-middle"}," 03:30 - 05:30 PM ")])],-1)),s("tbody",null,[(u(),c(_,null,A(te,t=>(u(),c(_,{key:t},[(u(!0),c(_,null,A(me(t),(l,n)=>(u(),c(_,{key:`${t}-${l.key}`},[(u(!0),c(_,null,A(l.rows,({row:d,originalIndex:a},o)=>(u(),c("tr",{key:`${t}-${l.key}-${d.stream}-${a}`},[n===0&&o===0?(u(),c("td",{key:0,class:"border border-slate-300 bg-sky-100 px-1 py-4 text-center text-[10px] font-semibold uppercase text-sky-900",rowspan:Ue(t)||1},p(t),9,ms)):w("",!0),o===0?(u(),c("td",{key:1,class:"border border-slate-300 bg-slate-50 px-1 py-1 text-center font-semibold",rowspan:l.rows.length},p(l.label||d.class_label||d.form),9,bs)):w("",!0),s("td",ps,p(d.stream),1),e[64]||(e[64]=s("td",{class:"border border-slate-300 bg-sky-50 px-1 py-1 text-center"},[s("div",{class:"font-semibold"},"ARRIVAL & CLEANING")],-1)),e[65]||(e[65]=s("td",{class:"border border-slate-300 bg-fuchsia-100 px-1 py-1 text-center font-semibold text-fuchsia-900"}," PREP ",-1)),(u(!0),c(_,null,A(d.slots.slice(0,4),(i,m)=>{var b;return u(),c("td",{key:`am-${m}`,class:"border border-slate-300 bg-emerald-50 px-1 py-1 text-center",draggable:T(t,m),onDragstart:f=>T(t,m)&&le(t,a,m),onDragover:e[19]||(e[19]=z(()=>{},["prevent"])),onDrop:f=>T(t,m)&&ne(t,a,m)},[i&&i.subject?(u(),c(_,{key:0},[s("div",null,[$(p(i.subject)+" ",1),(b=d.slots[m+1])!=null&&b.subject&&d.slots[m+1].subject===i.subject?(u(),c("span",xs," D ")):w("",!0)]),s("div",ys,p(i.teacher),1)],64)):(u(),c("div",fs," "))],40,gs)}),128)),e[66]||(e[66]=s("td",{class:"border border-slate-300 bg-sky-200 px-1 py-1 text-center font-semibold text-sky-900"}," BREAK ",-1)),(u(!0),c(_,null,A(d.slots.slice(4,7),(i,m)=>{var b;return u(),c("td",{key:`mid-${m}`,class:"border border-slate-300 bg-indigo-50 px-1 py-1 text-center",draggable:T(t,4+m),onDragstart:f=>T(t,4+m)&&le(t,a,4+m),onDragover:e[20]||(e[20]=z(()=>{},["prevent"])),onDrop:f=>T(t,4+m)&&ne(t,a,4+m)},[t==="FRIDAY"&&m===2?(u(),c("div",vs,"MEWAKA")):(u(),c(_,{key:1},[i&&i.subject?(u(),c(_,{key:0},[s("div",null,[$(p(i.subject)+" ",1),(b=d.slots[4+m+1])!=null&&b.subject&&d.slots[4+m+1].subject===i.subject?(u(),c("span",_s," D ")):w("",!0)]),s("div",ks,p(i.teacher),1)],64)):(u(),c("div",Ss," "))],64))],40,hs)}),128)),e[67]||(e[67]=s("td",{class:"border border-slate-300 bg-sky-200 px-1 py-1 text-center font-semibold text-sky-900"}," BREAK ",-1)),(u(!0),c(_,null,A(d.slots.slice(7,9),(i,m)=>{var b;return u(),c("td",{key:`pm-${m}`,class:O(["border border-slate-300 px-1 py-1 text-center",t==="WEDNESDAY"?"bg-amber-100 text-[9px] font-semibold text-amber-900":t==="THURSDAY"?"bg-amber-200 text-[9px] font-semibold text-amber-900":t==="FRIDAY"?"bg-lime-300 text-[9px] font-semibold text-lime-900":"bg-indigo-50"]),draggable:T(t,7+m),onDragstart:f=>T(t,7+m)&&le(t,a,7+m),onDragover:e[21]||(e[21]=z(()=>{},["prevent"])),onDrop:f=>T(t,7+m)&&ne(t,a,7+m)},[t==="WEDNESDAY"?(u(),c("div",Ns,"RELIGION")):t==="THURSDAY"?(u(),c("div",js,"DEBATE OR CLUBS")):t==="FRIDAY"?(u(),c("div",Cs,"SPORTS AND GAMES")):(u(),c(_,{key:3},[i&&i.subject?(u(),c(_,{key:0},[s("div",null,[$(p(i.subject)+" ",1),(b=d.slots[7+m+1])!=null&&b.subject&&d.slots[7+m+1].subject===i.subject?(u(),c("span",Bs," D ")):w("",!0)]),s("div",Is,p(i.teacher),1)],64)):(u(),c("div",Vs," "))],64))],42,ws)}),128)),e[68]||(e[68]=s("td",{class:"border border-slate-300 bg-emerald-200 px-1 py-1 text-center font-semibold text-emerald-900"}," REMEDIAL ",-1))]))),128))],64))),128)),e[69]||(e[69]=s("tr",null,[s("td",{colspan:17,class:"h-1 bg-yellow-300"})],-1))],64))),64))])])])],32))]),r.showDetailsModal?(u(),c("div",As,[s("div",Ls,[s("div",Ds,[e[72]||(e[72]=s("div",null,[s("h3",{class:"text-sm font-semibold text-gray-800"}," School Timetable Details "),s("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Set timetable type, class, year and time range. These details will appear in the preview header when you save. ")],-1)),s("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:e[23]||(e[23]=t=>r.showDetailsModal=!1)}," Close ")]),s("div",Ts,[s("div",null,[e[73]||(e[73]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Timetable Type",-1)),s("div",Es,[s("button",{type:"button",class:O(["rounded-md px-2 py-1.5 text-[11px] font-semibold ring-1",y(g).type==="class"?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"]),onClick:e[24]||(e[24]=t=>y(g).type="class")}," Class Timetable ",2),s("button",{type:"button",class:O(["rounded-md px-2 py-1.5 text-[11px] font-semibold ring-1",y(g).type==="invigilation"?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"]),onClick:e[25]||(e[25]=t=>y(g).type="invigilation")}," Invigilation ",2),s("button",{type:"button",class:O(["rounded-md px-2 py-1.5 text-[11px] font-semibold ring-1",y(g).type==="exams"?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"]),onClick:e[26]||(e[26]=t=>y(g).type="exams")}," Exams Timetable ",2)])]),s("div",null,[e[74]||(e[74]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Title",-1)),E(s("input",{"onUpdate:modelValue":e[27]||(e[27]=t=>y(g).title=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form I A - Term I Timetable"},null,512),[[U,y(g).title]])]),s("div",Ms,[s("div",null,[e[75]||(e[75]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Class / Group",-1)),E(s("input",{"onUpdate:modelValue":e[28]||(e[28]=t=>y(g).class_name=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form I A"},null,512),[[U,y(g).class_name]])]),s("div",null,[e[76]||(e[76]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Term",-1)),E(s("input",{"onUpdate:modelValue":e[29]||(e[29]=t=>y(g).term=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Term I"},null,512),[[U,y(g).term]])])]),s("div",$s,[s("div",null,[e[77]||(e[77]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Academic Year",-1)),E(s("input",{"onUpdate:modelValue":e[30]||(e[30]=t=>y(g).academic_year=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. 2025"},null,512),[[U,y(g).academic_year]])]),s("div",Us,[s("div",null,[e[78]||(e[78]=s("label",{class:"mb-1 block text-[11px] font-medium"},"Start Time",-1)),E(s("input",{"onUpdate:modelValue":e[31]||(e[31]=t=>y(g).start_time=t),type:"time",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[U,y(g).start_time]])]),s("div",null,[e[79]||(e[79]=s("label",{class:"mb-1 block text-[11px] font-medium"},"End Time",-1)),E(s("input",{"onUpdate:modelValue":e[32]||(e[32]=t=>y(g).end_time=t),type:"time",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[U,y(g).end_time]])])])]),e[80]||(e[80]=s("p",{class:"mt-2 text-[11px] text-gray-500"}," Hifadhi ratiba hii kwa matumizi ya baadaye kama timetable ya darasa au shule nzima. ",-1)),s("div",Fs,[s("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:e[33]||(e[33]=t=>r.showDetailsModal=!1)}," Cancel "),s("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",disabled:y(g).processing,onClick:e[34]||(e[34]=(...t)=>r.saveTimetable&&r.saveTimetable(...t))},p(y(g).processing?"Saving...":"Generate & Save Timetable"),9,Ps)])])])])):w("",!0),w("",!0)])]),_:1})],64))}};export{Ws as default};

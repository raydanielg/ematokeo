import{_ as k}from"./AuthenticatedLayout-BxLnicmg.js";import{E as j,j as N,c as n,a as f,u as h,h as F,w as b,b as e,t as a,d as y,f as x,o as r,K as p,F as m,r as c,l as _,m as T}from"./app-WOp3eoyi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"flex items-center justify-between"},C={class:"flex items-center gap-2"},R=["disabled","value"],Y={key:0,value:""},E=["value"],D={class:"space-y-6"},M={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-5"},P={class:"flex items-center justify-between rounded-xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100"},B={class:"mt-1 text-2xl font-semibold text-gray-900"},$={class:"flex items-center justify-between rounded-xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100"},L={class:"mt-1 text-2xl font-semibold text-gray-900"},V={class:"flex items-center justify-between rounded-xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100"},O={class:"mt-1 text-2xl font-semibold text-gray-900"},W={class:"flex items-center justify-between rounded-xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100"},z={class:"mt-1 text-2xl font-semibold text-gray-900"},G={class:"flex items-center justify-between rounded-xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100"},q={class:"mt-1 text-2xl font-semibold text-gray-900"},H={class:"grid gap-4 lg:grid-cols-3"},K={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100 lg:col-span-2"},U={class:"flex items-center justify-between"},I={class:"text-xs text-gray-500"},J={key:0,class:"font-semibold text-gray-700"},Q={key:1,class:"italic"},X={key:0,class:"flex items-center gap-3 text-xs"},Z={class:"flex items-center gap-1 text-emerald-600"},ee={class:"flex items-center gap-1 text-rose-600"},te={class:"text-[11px] text-gray-500"},se={class:"font-semibold text-gray-700"},le={class:"mt-4 grid gap-4 md:grid-cols-3"},ae={class:"flex flex-col justify-between rounded-lg bg-slate-50 p-4 md:col-span-1"},ne={key:0,class:"mt-3 space-y-2 text-[11px] text-gray-700"},re={class:"flex items-center justify-between"},de={class:"h-2 w-full overflow-hidden rounded-full bg-emerald-100"},oe={class:"mt-3 flex items-center justify-between"},ie={class:"h-2 w-full overflow-hidden rounded-full bg-rose-100"},ue={key:1,class:"mt-3 text-xs text-gray-500"},me={class:"space-y-4 md:col-span-2"},xe={class:"rounded-lg border border-dashed border-gray-200 p-3"},ce={key:0,class:"mt-2 space-y-1 text-[11px] text-gray-700"},ge={class:"w-4 font-semibold text-gray-700"},ye={class:"flex-1 rounded-full bg-gray-100"},pe={class:"w-16 text-right text-[10px] text-gray-600"},fe={key:1,class:"mt-1 text-xs text-gray-500"},be={class:"grid gap-4 lg:grid-cols-3"},ve={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100 lg:col-span-2"},he={class:"mb-3 flex items-center justify-between"},_e={key:0,class:"text-[11px] text-gray-500"},we={key:1,class:"space-y-2 text-[11px]"},Se={class:"text-[10px] font-semibold text-emerald-700"},ke={class:"text-[11px] font-semibold text-gray-900"},je={key:0,class:"text-[10px] text-gray-600"},Ne={class:"rounded-xl bg-white p-5 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},Fe={class:"mb-3 flex items-center justify-between"},Te={key:0,class:"text-[11px] text-gray-500"},Ae={key:1,class:"space-y-2 text-[11px]"},Ce={class:"text-[11px] font-semibold text-gray-900"},Re={class:"mt-0.5 line-clamp-2 text-[10px] text-gray-600"},Ye={class:"mt-0.5 text-[10px] text-gray-400"},Ee={class:"grid gap-4 lg:grid-cols-3"},De={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100 lg:col-span-1"},Me={class:"mb-3 flex items-center justify-between"},Pe={class:"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-0.5 text-[10px] font-medium text-emerald-700"},Be={key:0,class:"space-y-1.5 text-[11px] text-gray-700"},$e={class:"flex items-center gap-2"},Le={class:"flex h-5 w-5 items-center justify-center rounded-full bg-emerald-100 text-[10px] font-semibold text-emerald-700"},Ve={class:"font-semibold text-gray-900 truncate max-w-[140px]"},Oe={class:"text-[10px] text-gray-500"},We={key:0,class:"ml-1"},ze={class:"text-right"},Ge={class:"text-xs font-semibold text-emerald-700"},qe={class:"mt-0.5 h-1.5 w-16 overflow-hidden rounded-full bg-emerald-100"},He={key:1,class:"text-[11px] text-gray-500"},Ke={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100 lg:col-span-1"},Ue={class:"mb-3 flex items-center justify-between"},Ie={class:"inline-flex items-center rounded-full bg-rose-50 px-2.5 py-0.5 text-[10px] font-medium text-rose-700"},Je={key:0,class:"space-y-1.5 text-[11px] text-gray-700"},Qe={class:"flex items-center gap-2"},Xe={class:"flex h-5 w-5 items-center justify-center rounded-full bg-rose-50 text-[10px] font-semibold text-rose-700"},Ze={class:"font-semibold text-gray-900 truncate max-w-[140px]"},et={class:"text-[10px] text-gray-500"},tt={key:0,class:"ml-1"},st={class:"text-right"},lt={class:"text-xs font-semibold text-rose-700"},at={class:"mt-0.5 h-1.5 w-16 overflow-hidden rounded-full bg-rose-100"},nt={key:1,class:"text-[11px] text-gray-500"},it={__name:"Dashboard",props:{stats:{type:Object,default:()=>({})},availableYears:{type:Array,default:()=>[]},upcomingEvents:{type:Array,default:()=>[]},recentAnnouncements:{type:Array,default:()=>[]},resultsSummary:{type:Object,default:()=>({})},topStudents:{type:Array,default:()=>[]},bottomStudents:{type:Array,default:()=>[]}},setup(i){const l=i,v=j(),w=N(()=>{var d,g,s,o;const u=(s=(g=(d=v==null?void 0:v.props)==null?void 0:d.ziggy)==null?void 0:g.query)==null?void 0:s.year,t=u?Number(u):null;return Number.isFinite(t)&&t>0?t:((o=l.resultsSummary)==null?void 0:o.year)||null}),S=u=>{const t=Number(u.target.value);T.get(route("dashboard"),{year:Number.isFinite(t)&&t>0?t:void 0},{preserveScroll:!0})};return(u,t)=>(r(),n(m,null,[f(h(F),{title:"E-Matokeo Dashboard"}),f(k,null,{header:b(()=>[e("div",A,[t[1]||(t[1]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Overview "),e("p",{class:"mt-1 text-sm text-gray-500"}," Summary of key metrics for the current academic year. ")],-1)),e("div",C,[t[0]||(t[0]=e("label",{class:"text-xs font-medium uppercase tracking-wide text-gray-500"}," Year ",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",disabled:!l.availableYears||!l.availableYears.length,value:w.value||"",onChange:S},[!l.availableYears||!l.availableYears.length?(r(),n("option",Y,"No results")):y("",!0),(r(!0),n(m,null,c(l.availableYears,d=>(r(),n("option",{key:d,value:d},a(d),9,E))),128))],40,R)])])]),default:b(()=>{var d,g;return[e("div",D,[e("div",M,[e("div",P,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-xs font-medium text-gray-500"},"Total Students",-1)),e("p",B,a(l.stats.students??0),1)]),t[3]||(t[3]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-50 text-emerald-600"},[e("i",{class:"material-icons text-2xl"},"school")],-1))]),e("div",$,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-xs font-medium text-gray-500"},"Total Teachers",-1)),e("p",L,a(l.stats.teachers??0),1)]),t[5]||(t[5]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-50 text-blue-600"},[e("i",{class:"material-icons text-2xl"},"person_outline")],-1))]),e("div",V,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs font-medium text-gray-500"},"Total Subjects",-1)),e("p",O,a(l.stats.subjects??0),1)]),t[7]||(t[7]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-50 text-amber-600"},[e("i",{class:"material-icons text-2xl"},"library_books")],-1))]),e("div",W,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs font-medium text-gray-500"},"Total Classes",-1)),e("p",z,a(l.stats.classes??0),1)]),t[9]||(t[9]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-violet-50 text-violet-600"},[e("i",{class:"material-icons text-2xl"},"domain")],-1))]),e("div",G,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500"},"Total Parents",-1)),e("p",q,a(l.stats.parents??0),1)]),t[11]||(t[11]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-rose-50 text-rose-600"},[e("i",{class:"material-icons text-2xl"},"family_restroom")],-1))])]),e("div",H,[e("div",K,[e("div",U,[e("div",null,[t[13]||(t[13]=e("h3",{class:"text-sm font-semibold text-gray-800"},"Results Analytics",-1)),e("p",I,[t[12]||(t[12]=x(" Year ",-1)),l.resultsSummary&&l.resultsSummary.year?(r(),n("span",J,a(l.resultsSummary.year),1)):(r(),n("span",Q,"No results yet"))])]),l.resultsSummary&&l.resultsSummary.total?(r(),n("div",X,[e("div",Z,[t[14]||(t[14]=e("span",{class:"h-2 w-2 rounded-full bg-emerald-500"},null,-1)),e("span",null,"Pass: "+a(l.resultsSummary.passRate)+"%",1)]),e("div",ee,[t[15]||(t[15]=e("span",{class:"h-2 w-2 rounded-full bg-rose-500"},null,-1)),e("span",null,"Fail: "+a(l.resultsSummary.failRate)+"%",1)]),e("div",te,[t[16]||(t[16]=x(" Total candidates: ",-1)),e("span",se,a(l.resultsSummary.total),1)])])):y("",!0)]),e("div",le,[e("div",ae,[t[19]||(t[19]=e("p",{class:"text-xs font-semibold text-gray-700"},"Pass / Fail",-1)),l.resultsSummary&&l.resultsSummary.total?(r(),n("div",ne,[e("div",re,[t[17]||(t[17]=e("span",{class:"text-emerald-600 font-medium"},"Pass",-1)),e("span",null,a(l.resultsSummary.pass)+" ("+a(l.resultsSummary.passRate)+"%)",1)]),e("div",de,[e("div",{class:"h-2 rounded-full bg-emerald-500 transition-all",style:p({width:`${l.resultsSummary.passRate}%`})},null,4)]),e("div",oe,[t[18]||(t[18]=e("span",{class:"text-rose-600 font-medium"},"Fail",-1)),e("span",null,a(l.resultsSummary.fail)+" ("+a(l.resultsSummary.failRate)+"%)",1)]),e("div",ie,[e("div",{class:"h-2 rounded-full bg-rose-500 transition-all",style:p({width:`${l.resultsSummary.failRate}%`})},null,4)])])):(r(),n("p",ue,"No results data yet for this year."))]),e("div",me,[e("div",xe,[t[20]||(t[20]=e("h4",{class:"text-xs font-semibold text-gray-700"},"Grade distribution (A–F)",-1)),l.resultsSummary&&l.resultsSummary.total?(r(),n("div",ce,[(r(),n(m,null,c(["A","B","C","D","F"],s=>e("div",{key:s,class:"flex items-center justify-between gap-2"},[e("span",ge,a(s),1),e("div",ye,[e("div",{class:"h-1.5 rounded-full bg-emerald-500 transition-all",style:p({width:l.resultsSummary.grades&&l.resultsSummary.total?`${Math.round((l.resultsSummary.grades[s]||0)/l.resultsSummary.total*100)}%`:"0%"})},null,4)]),e("span",pe,a(l.resultsSummary.grades&&l.resultsSummary.grades[s]?l.resultsSummary.grades[s]:0),1)])),64))])):(r(),n("p",fe,"No grades data available yet."))])])])]),t[21]||(t[21]=e("div",{class:"space-y-4"},[e("div",{class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},[e("div",{class:"flex items-center justify-between text-xs"},[e("h3",{class:"font-semibold text-gray-800"},"Teacher Pass Rate"),e("span",{class:"text-gray-400"},"Top 0")]),e("p",{class:"mt-3 text-xs text-gray-500"},"No data.")]),e("div",{class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},[e("div",{class:"flex items-center justify-between text-xs"},[e("h3",{class:"font-semibold text-gray-800"},"Subject Average"),e("span",{class:"text-gray-400"},"Top 0")]),e("p",{class:"mt-3 text-xs text-gray-500"},"No data.")]),e("div",{class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},[e("div",{class:"flex items-center justify-between text-xs"},[e("h3",{class:"font-semibold text-gray-800"},"Gender Pass Rate")]),e("div",{class:"mt-3 space-y-2 text-xs text-gray-600"},[e("div",{class:"flex items-center justify-between gap-2"},[e("span",{class:"w-4 text-gray-500"},"M"),e("div",{class:"flex-1 rounded-full bg-gray-100"},[e("div",{class:"h-1.5 w-0 rounded-full bg-emerald-500"})]),e("span",null,"0%")]),e("div",{class:"flex items-center justify-between gap-2"},[e("span",{class:"w-4 text-gray-500"},"F"),e("div",{class:"flex-1 rounded-full bg-gray-100"},[e("div",{class:"h-1.5 w-0 rounded-full bg-rose-500"})]),e("span",null,"0%")])])])],-1))]),e("div",be,[e("div",ve,[e("div",he,[t[23]||(t[23]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"},"Calendar & Events"),e("p",{class:"text-xs text-gray-500"},"Upcoming school events from the calendar.")],-1)),f(h(_),{href:u.route("calendar"),class:"rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-100"},{default:b(()=>[...t[22]||(t[22]=[x(" Open Calendar ",-1)])]),_:1},8,["href"])]),!i.upcomingEvents||!i.upcomingEvents.length?(r(),n("div",_e," No upcoming events have been added yet. ")):(r(),n("ul",we,[(r(!0),n(m,null,c(i.upcomingEvents,s=>(r(),n("li",{key:s.id,class:"flex items-start justify-between gap-2 rounded-lg border border-gray-100 bg-slate-50 px-3 py-2"},[e("div",null,[e("div",Se,a(new Date(s.date).toLocaleDateString()),1),e("div",ke,a(s.title),1),s.description?(r(),n("div",je,a(s.description),1)):y("",!0)])]))),128))]))]),e("div",Ne,[e("div",Fe,[t[25]||(t[25]=e("h3",{class:"text-sm font-semibold text-gray-800"},"Latest Announcements",-1)),f(h(_),{href:u.route("announcements.index"),class:"text-[10px] font-medium text-emerald-700 hover:text-emerald-800"},{default:b(()=>[...t[24]||(t[24]=[x(" View all ",-1)])]),_:1},8,["href"])]),!i.recentAnnouncements||!i.recentAnnouncements.length?(r(),n("div",Te," No announcements yet. ")):(r(),n("ul",Ae,[(r(!0),n(m,null,c(i.recentAnnouncements,s=>(r(),n("li",{key:s.id,class:"rounded-lg border border-gray-100 bg-slate-50 px-3 py-2"},[e("div",Ce,a(s.title),1),e("div",Re,a(s.body),1),e("div",Ye,a(new Date(s.created_at).toLocaleString()),1)]))),128))]))])]),e("div",Ee,[e("div",De,[e("div",Me,[t[26]||(t[26]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"},"Top 10 Best Students"),e("p",{class:"text-xs text-gray-500"},"Based on average marks (current year).")],-1)),e("span",Pe," Top "+a(((d=l.topStudents)==null?void 0:d.length)||0),1)]),l.topStudents&&l.topStudents.length?(r(),n("div",Be,[(r(!0),n(m,null,c(l.topStudents,(s,o)=>(r(),n("div",{key:s.student_id||o,class:"flex items-center justify-between gap-2 rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},[e("div",$e,[e("span",Le,a(o+1),1),e("div",null,[e("div",Ve,a(s.full_name||s.exam_number||"Student"),1),e("div",Oe,[x(a(s.exam_number)+" ",1),s.class_level?(r(),n("span",We,"• "+a(s.class_level)+" "+a(s.stream),1)):y("",!0)])])]),e("div",ze,[e("div",Ge,a(s.avg_marks?s.avg_marks.toFixed?s.avg_marks.toFixed(1):Number(s.avg_marks).toFixed(1):"0.0")+"% ",1),e("div",qe,[e("div",{class:"h-1.5 rounded-full bg-emerald-500",style:p({width:`${Math.min(100,Math.max(0,Number(s.avg_marks||0)))}%`})},null,4)])])]))),128))])):(r(),n("p",He,"No student ranking data available yet."))]),e("div",Ke,[e("div",Ue,[t[27]||(t[27]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"},"Top 10 Students Needing Support"),e("p",{class:"text-xs text-gray-500"},"Lowest averages – for follow-up and interventions.")],-1)),e("span",Ie," Top "+a(((g=l.bottomStudents)==null?void 0:g.length)||0),1)]),l.bottomStudents&&l.bottomStudents.length?(r(),n("div",Je,[(r(!0),n(m,null,c(l.bottomStudents,(s,o)=>(r(),n("div",{key:s.student_id||o,class:"flex items-center justify-between gap-2 rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},[e("div",Qe,[e("span",Xe,a(o+1),1),e("div",null,[e("div",Ze,a(s.full_name||s.exam_number||"Student"),1),e("div",et,[x(a(s.exam_number)+" ",1),s.class_level?(r(),n("span",tt,"• "+a(s.class_level)+" "+a(s.stream),1)):y("",!0)])])]),e("div",st,[e("div",lt,a(s.avg_marks?s.avg_marks.toFixed?s.avg_marks.toFixed(1):Number(s.avg_marks).toFixed(1):"0.0")+"% ",1),e("div",at,[e("div",{class:"h-1.5 rounded-full bg-rose-500",style:p({width:`${Math.min(100,Math.max(0,Number(s.avg_marks||0)))}%`})},null,4)])])]))),128))])):(r(),n("p",nt,"No support ranking data available yet."))]),t[28]||(t[28]=e("div",{class:"flex flex-col justify-between rounded-xl bg-gradient-to-br from-slate-900 via-emerald-900 to-emerald-600 p-5 text-slate-50 shadow-sm lg:col-span-1"},[e("div",null,[e("p",{class:"text-[11px] font-semibold uppercase tracking-[0.15em] text-emerald-200"}," Ward Ranking "),e("h3",{class:"mt-1 text-lg font-semibold"},"Coming soon"),e("p",{class:"mt-1 text-[11px] text-emerald-100"}," Compare your school performance against other schools in the same ward with live league tables and trends. ")]),e("div",{class:"mt-4 flex items-end justify-between text-[11px]"},[e("div",{class:"space-y-1"},[e("p",{class:"text-emerald-100"},"Features on the way:"),e("ul",{class:"space-y-0.5 text-emerald-50"},[e("li",{class:"flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-300"}),e("span",null,"Ward ranking table")]),e("li",{class:"flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-300"}),e("span",null,"Trend graph over years")]),e("li",{class:"flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-300"}),e("span",null,"Highlight of top improving schools")])])]),e("div",{class:"flex flex-col items-end text-right text-[10px] text-emerald-200"},[e("span",{class:"rounded-full bg-white/5 px-2 py-0.5"},"Ward league"),e("span",{class:"mt-1 text-[9px] uppercase tracking-[0.16em]"},"Coming in a future update")])])],-1))])])]}),_:1})],64))}};export{it as default};

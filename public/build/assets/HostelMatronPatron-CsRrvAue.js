import{i as m,y as $,N as z,c as a,a as f,u as l,h as B,w as b,b as e,d as g,o as n,t as d,F as c,r as v,l as N,k as i,p as k,v as p}from"./app-8xN0YI5x.js";import{_ as U}from"./AuthenticatedLayout-DdRuYbLg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"space-y-4"},D={key:0,class:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-900"},_={class:"flex items-start gap-2"},E={class:"text-[11px] text-emerald-800"},F={class:"overflow-x-auto rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},I={class:"min-w-full border-collapse text-left text-[11px]"},L={key:0},R={class:"px-3 py-2 align-top"},T={class:"px-3 py-2 align-top"},J={class:"px-3 py-2 align-top"},O={class:"px-3 py-2 align-top"},q={class:"px-3 py-2 align-top"},G={class:"px-3 py-2 align-top"},K={class:"flex items-center justify-end gap-1 text-gray-500"},Q=["onClick"],W={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},X={class:"w-full max-w-xl rounded-2xl bg-white p-5 text-xs text-gray-700 shadow-2xl"},Y={class:"grid gap-3 md:grid-cols-2"},Z=["value"],ee={class:"md:col-span-2"},te={class:"mt-4 flex justify-end gap-2 text-[11px]"},se=["disabled"],oe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4 py-6 backdrop-blur-sm"},le={class:"relative w-full max-w-xs rounded-2xl bg-white px-4 py-5 text-center text-xs text-gray-700 shadow-2xl"},re={class:"flex flex-col items-center gap-2"},ae={class:"text-[11px] text-gray-600"},ue={__name:"HostelMatronPatron",props:{staff:{type:Array,default:()=>[]},hostels:{type:Array,default:()=>[]}},setup(u){const M=u,x=m(!1),y=m(!1),j=m(!1),C=m(null),s=$({hostel_id:"",role:"matron",name:"",phone:"",email:"",password:"",notes:""}),V=()=>{const r=(M.hostels||[])[0];s.hostel_id=r?String(r.id):"",s.role="matron",s.name="",s.phone="",s.email="",s.password="",s.notes="",x.value=!0},h=()=>{x.value=!1},S=()=>{s.post(route("hostel-matron-patron.store"),{preserveScroll:!0,onSuccess:()=>{x.value=!1,s.reset("password"),y.value=!0}})},A=r=>{C.value=r,j.value=!0};return(r,t)=>{const P=z("lottie-player");return n(),a(c,null,[f(l(B),{title:"Matron & Patron"}),f(U,null,{header:b(()=>[e("div",{class:"flex flex-wrap items-center justify-between gap-3"},[t[8]||(t[8]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Matron & Patron "),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage hostel matrons and patrons, including their assigned hostels. ")],-1)),e("div",{class:"flex flex-wrap items-center gap-2 text-xs"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:V}," + Add Matron/Patron ")])])]),default:b(()=>[e("div",H,[r.$page.props.flash&&r.$page.props.flash.success?(n(),a("div",D,[e("div",_,[t[10]||(t[10]=e("span",{class:"mt-0.5 text-emerald-600"},"✔",-1)),e("div",null,[t[9]||(t[9]=e("p",{class:"font-semibold"},"Imehifadhiwa",-1)),e("p",E,d(r.$page.props.flash.success),1)])])])):g("",!0),e("div",F,[e("table",I,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-[11px] font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"#"),e("th",{class:"px-3 py-2"},"Name"),e("th",{class:"px-3 py-2"},"Role"),e("th",{class:"px-3 py-2"},"Hostel"),e("th",{class:"px-3 py-2"},"Phone"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[u.staff.length?g("",!0):(n(),a("tr",L,[...t[11]||(t[11]=[e("td",{colspan:"6",class:"px-3 py-6 text-center text-[11px] text-gray-400"}," No matron or patron records yet. ",-1)])])),(n(!0),a(c,null,v(u.staff,(o,w)=>(n(),a("tr",{key:o.id||w,class:"border-b border-gray-100 text-[11px] text-gray-700 hover:bg-gray-50"},[e("td",R,d(w+1),1),e("td",T,d(o.name||"-"),1),e("td",J,d(o.role||"-"),1),e("td",O,d(o.hostel_name||"-"),1),e("td",q,d(o.phone||"-"),1),e("td",G,[e("div",K,[e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full hover:bg-emerald-50 hover:text-emerald-700",title:"Details",onClick:ne=>A(o)},[...t[12]||(t[12]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Q),f(l(N),{href:r.route("hostel-matron-patron.contract",o.id),class:"inline-flex h-6 w-6 items-center justify-center rounded-full hover:bg-indigo-50 hover:text-indigo-700",title:"Mkataba"},{default:b(()=>[...t[13]||(t[13]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4h10a2 2 0 012 2v11a1 1 0 01-.293.707l-3 3A1 1 0 0115 21H7a2 2 0 01-2-2V6a2 2 0 012-2z"})],-1)])]),_:1},8,["href"]),t[14]||(t[14]=e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full hover:bg-emerald-50 hover:text-emerald-700",title:"Edit"},[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5h2m-1-1v2m-6 6h.01M7 7h.01M17 7h.01M7 17h.01M17 17h.01M4 4h16a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2z"})])],-1)),t[15]||(t[15]=e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full hover:bg-rose-50 hover:text-rose-700",title:"Delete"},[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])])]))),128))])])])]),x.value?(n(),a("div",W,[e("div",X,[e("div",{class:"mb-3 flex items-start justify-between gap-4 border-b border-gray-100 pb-3"},[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-sm font-semibold text-emerald-800"}," Add Matron / Patron "),e("p",{class:"mt-1 text-[11px] text-gray-500"}," Capture basic details for the staff responsible for a specific hostel. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:h}," × ")]),e("div",Y,[e("div",null,[t[19]||(t[19]=e("label",{class:"text-[11px] font-medium text-emerald-700"},"Hostel",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l(s).hostel_id=o),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[18]||(t[18]=e("option",{value:"",disabled:""},"Select hostel",-1)),(n(!0),a(c,null,v(u.hostels,o=>(n(),a("option",{key:o.id,value:String(o.id)},d(o.name)+" ("+d(o.type)+") ",9,Z))),128))],512),[[k,l(s).hostel_id]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"text-[11px] font-medium text-emerald-700"},"Role",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l(s).role=o),class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...t[20]||(t[20]=[e("option",{value:"matron"},"Matron",-1),e("option",{value:"patron"},"Patron",-1)])],512),[[k,l(s).role]])]),e("div",ee,[t[22]||(t[22]=e("label",{class:"text-[11px] font-medium text-gray-600"},"Full name",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).name=o),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Jane Doe"},null,512),[[p,l(s).name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-[11px] font-medium text-gray-600"},"Phone number",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(s).phone=o),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. 07xx xxx xxx"},null,512),[[p,l(s).phone]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"text-[11px] font-medium text-gray-600"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).email=o),type:"email",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. matron@example.com"},null,512),[[p,l(s).email]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"text-[11px] font-medium text-gray-600"},"Password",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l(s).password=o),type:"password",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Temporary password"},null,512),[[p,l(s).password]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"text-[11px] font-medium text-gray-600"},"Notes (optional)",-1)),i(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>l(s).notes=o),rows:"2",class:"mt-1 w-full resize-none rounded-md border border-gray-300 px-3 py-1.5 text-[11px] text-gray-800 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Extra information about this staff member."},null,512),[[p,l(s).notes]])])]),e("div",te,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:h}," Cancel "),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:l(s).processing||!l(s).hostel_id||!l(s).name||!l(s).phone||!l(s).email,onClick:S}," Save ",8,se)])])])):g("",!0),y.value&&r.$page.props.flash&&r.$page.props.flash.success?(n(),a("div",oe,[e("div",le,[e("button",{type:"button",class:"absolute right-2 top-2 inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[7]||(t[7]=o=>y.value=!1)}," × "),e("div",re,[f(P,{src:"/success.json",background:"transparent",speed:"1",style:{width:"120px",height:"120px"},autoplay:""}),t[27]||(t[27]=e("p",{class:"font-semibold text-emerald-800"},"Imehifadhiwa kikamilifu",-1)),e("p",ae,d(r.$page.props.flash.success),1)])])])):g("",!0)]),_:1})],64)}}};export{ue as default};

import{I as P,q as V,a as m,b as E,d as e,u as t,h as F,e as M,n as u,t as b,F as q,f as A,m as x,g as d,v as a,o as p}from"./app-D_FTUGpF.js";const D={class:"min-h-screen bg-slate-100"},S={class:"mx-auto max-w-4xl px-4 py-10"},N={class:"mb-6 flex items-center justify-between text-xs text-gray-600"},R={class:"flex-1"},T={class:"flex items-center gap-2"},$={class:"flex-1"},H={class:"flex items-center gap-2"},I={class:"flex-1"},K={class:"flex items-center gap-2"},O={class:"flex-1"},L={class:"flex items-center gap-2"},z={key:0,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},G={class:"mt-4 space-y-4 text-xs text-gray-700"},J={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-2"},Q={class:"grid gap-2 md:grid-cols-2"},W={class:"space-y-2"},X={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},Y={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},Z={class:"mt-4 flex items-center justify-between text-xs"},_=["disabled"],ee={key:1,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},se={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},te={class:"space-y-2"},oe={class:"space-y-2"},le={class:"grid grid-cols-2 gap-2"},re={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},ne={class:"space-y-2"},de={class:"space-y-2"},ae={class:"mt-4 flex items-center justify-between text-xs"},ie={key:2,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},ue={class:"mt-4 flex items-center justify-between text-xs"},me={key:3,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},be={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},pe={class:"space-y-2"},xe={class:"space-y-2"},ge={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},fe={class:"space-y-2"},ye={class:"space-y-2"},ce={class:"mt-4 flex items-center justify-between text-xs"},ke={__name:"Install",props:{requirements:{type:Object,default:()=>({})},canContinue:{type:Boolean,default:!1},envExampleExists:{type:Boolean,default:!1}},setup(i){P();const n=$ref(1),r=V({app_name:"E-Matokeo",app_url:window.location.origin,db_host:"127.0.0.1",db_port:"3306",db_database:"",db_username:"",db_password:""}),l=V({name:"",username:"",email:"",phone:"",password:"",password_confirmation:""}),U=()=>{r.post(route("install.environment"),{preserveScroll:!0,onSuccess:()=>{n=3}})},j=()=>{l.clearErrors(),l.processing=!0,window.axios.post(route("install.migrate")).finally(()=>{l.processing=!1,n=4})},B=()=>{l.post(route("install.admin"),{preserveScroll:!0})};return(ve,s)=>{var g,f,y,c,v,w,k,h;return p(),m(q,null,[E(t(F),{title:"E-Matokeo Installer"}),e("div",D,[e("div",S,[s[49]||(s[49]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-2xl font-semibold text-gray-800"},"E-Matokeo Installer"),e("p",{class:"mt-1 text-sm text-gray-500"}," Step-by-step setup for your school results & hostel management system. ")],-1)),e("ol",N,[e("li",R,[e("div",T,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",t(n)>=1?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 1 ",2),s[17]||(s[17]=e("span",null,"Requirements",-1))])]),e("li",$,[e("div",H,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",t(n)>=2?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 2 ",2),s[18]||(s[18]=e("span",null,".env Configuration",-1))])]),e("li",I,[e("div",K,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",t(n)>=3?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 3 ",2),s[19]||(s[19]=e("span",null,"Migrations",-1))])]),e("li",O,[e("div",L,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",t(n)>=4?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 4 ",2),s[20]||(s[20]=e("span",null,"Admin Account",-1))])])]),t(n)===1?(p(),m("div",z,[s[27]||(s[27]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Server Requirements",-1)),s[28]||(s[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Check if your hosting environment meets the minimum requirements.",-1)),e("div",G,[e("div",null,[s[21]||(s[21]=e("h3",{class:"mb-1 font-semibold"},"PHP Version",-1)),e("div",J,[e("span",null,"Current: "+b((g=i.requirements.php_version)==null?void 0:g.current)+" (Required: "+b((f=i.requirements.php_version)==null?void 0:f.required)+")",1),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(y=i.requirements.php_version)!=null&&y.ok?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((c=i.requirements.php_version)!=null&&c.ok?"OK":"Upgrade PHP"),3)])]),e("div",null,[s[22]||(s[22]=e("h3",{class:"mb-1 font-semibold"},"PHP Extensions",-1)),e("ul",Q,[(p(!0),m(q,null,A(i.requirements.extensions||{},(o,C)=>(p(),m("li",{key:C,class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},[e("span",null,b(C),1),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",o?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b(o?"Enabled":"Missing"),3)]))),128))])]),e("div",null,[s[25]||(s[25]=e("h3",{class:"mb-1 font-semibold"},"Permissions",-1)),e("ul",W,[e("li",X,[s[23]||(s[23]=e("span",null,"storage/ writable",-1)),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(v=i.requirements.permissions)!=null&&v.storage_writable?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((w=i.requirements.permissions)!=null&&w.storage_writable?"OK":"Fix permissions"),3)]),e("li",Y,[s[24]||(s[24]=e("span",null,"bootstrap/cache writable",-1)),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(k=i.requirements.permissions)!=null&&k.bootstrap_cache_writable?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((h=i.requirements.permissions)!=null&&h.bootstrap_cache_writable?"OK":"Fix permissions"),3)])])])]),e("div",Z,[s[26]||(s[26]=e("p",{class:"text-gray-500"}," Kama kuna requirement haijakaa sawa, rekebisha upande wa hosting kisha refresh ukurasa huu. ",-1)),e("button",{class:u(["rounded-md px-3 py-1.5 text-xs font-semibold text-white shadow-sm",i.canContinue?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-300 cursor-not-allowed"]),disabled:!i.canContinue,onClick:s[0]||(s[0]=o=>n.value=2)}," Continue ",10,_)])])):t(n)===2?(p(),m("div",ee,[s[36]||(s[36]=e("h2",{class:"text-sm font-semibold text-gray-800"},".env Configuration",-1)),s[37]||(s[37]=e("p",{class:"mt-1 text-xs text-gray-500"},[x(" Fill in your application and database details. These will be written into the "),e("code",null,".env"),x(" file. ")],-1)),e("div",se,[e("div",te,[e("div",null,[s[29]||(s[29]=e("label",{class:"mb-1 block font-medium"},"App Name",-1)),d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t(r).app_name=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).app_name]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"mb-1 block font-medium"},"App URL",-1)),d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t(r).app_url=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).app_url]])])]),e("div",oe,[e("div",null,[s[31]||(s[31]=e("label",{class:"mb-1 block font-medium"},"DB Host",-1)),d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>t(r).db_host=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).db_host]])]),e("div",le,[e("div",null,[s[32]||(s[32]=e("label",{class:"mb-1 block font-medium"},"DB Port",-1)),d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>t(r).db_port=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).db_port]])])])])]),e("div",re,[e("div",ne,[e("div",null,[s[33]||(s[33]=e("label",{class:"mb-1 block font-medium"},"DB Name",-1)),d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t(r).db_database=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).db_database]])])]),e("div",de,[e("div",null,[s[34]||(s[34]=e("label",{class:"mb-1 block font-medium"},"DB Username",-1)),d(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t(r).db_username=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).db_username]])]),e("div",null,[s[35]||(s[35]=e("label",{class:"mb-1 block font-medium"},"DB Password",-1)),d(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t(r).db_password=o),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(r).db_password]])])])]),e("div",ae,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[8]||(s[8]=o=>n.value=1)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:U}," Save & Continue ")])])):t(n)===3?(p(),m("div",ie,[s[38]||(s[38]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Run Database Migrations",-1)),s[39]||(s[39]=e("p",{class:"mt-1 text-xs text-gray-500"}," The system will create the necessary tables in your configured database. ",-1)),s[40]||(s[40]=e("div",{class:"mt-4 rounded-lg bg-slate-50 px-3 py-2 text-[11px] text-gray-600"},[e("p",null,[x(" Make sure your database exists and the credentials you provided are correct. This will run "),e("code",null,"php artisan migrate --force"),x(". ")])],-1)),e("div",ue,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[9]||(s[9]=o=>n.value=2)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:j}," Run Migrations ")])])):t(n)===4?(p(),m("div",me,[s[47]||(s[47]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Create Admin Account",-1)),s[48]||(s[48]=e("p",{class:"mt-1 text-xs text-gray-500"}," This account will have full access to manage the school, results and hostels. ",-1)),e("div",be,[e("div",pe,[e("div",null,[s[41]||(s[41]=e("label",{class:"mb-1 block font-medium"},"Full Name",-1)),d(e("input",{"onUpdate:modelValue":s[10]||(s[10]=o=>t(l).name=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).name]])]),e("div",null,[s[42]||(s[42]=e("label",{class:"mb-1 block font-medium"},"Username",-1)),d(e("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>t(l).username=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).username]])])]),e("div",xe,[e("div",null,[s[43]||(s[43]=e("label",{class:"mb-1 block font-medium"},"Email",-1)),d(e("input",{"onUpdate:modelValue":s[12]||(s[12]=o=>t(l).email=o),type:"email",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).email]])]),e("div",null,[s[44]||(s[44]=e("label",{class:"mb-1 block font-medium"},"Phone (optional)",-1)),d(e("input",{"onUpdate:modelValue":s[13]||(s[13]=o=>t(l).phone=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).phone]])])])]),e("div",ge,[e("div",fe,[e("div",null,[s[45]||(s[45]=e("label",{class:"mb-1 block font-medium"},"Password",-1)),d(e("input",{"onUpdate:modelValue":s[14]||(s[14]=o=>t(l).password=o),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).password]])])]),e("div",ye,[e("div",null,[s[46]||(s[46]=e("label",{class:"mb-1 block font-medium"},"Confirm Password",-1)),d(e("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>t(l).password_confirmation=o),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,t(l).password_confirmation]])])])]),e("div",ce,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[16]||(s[16]=o=>n.value=3)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:B}," Create Admin & Finish ")])])):M("",!0)])])],64)}}};export{ke as default};

import{E as P,i as E,y as V,c as m,a as F,b as e,u as l,h as M,d as A,s as u,t as b,F as U,r as D,f as x,k as d,v as a,o as p}from"./app-CZXlYraJ.js";const S={class:"min-h-screen bg-slate-100"},N={class:"mx-auto max-w-4xl px-4 py-10"},R={class:"mb-6 flex items-center justify-between text-xs text-gray-600"},T={class:"flex-1"},H={class:"flex items-center gap-2"},K={class:"flex-1"},O={class:"flex items-center gap-2"},$={class:"flex-1"},I={class:"flex items-center gap-2"},L={class:"flex-1"},z={class:"flex items-center gap-2"},G={key:0,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},J={class:"mt-4 space-y-4 text-xs text-gray-700"},Q={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-2"},W={class:"grid gap-2 md:grid-cols-2"},X={class:"space-y-2"},Y={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},Z={class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},_={class:"mt-4 flex items-center justify-between text-xs"},ee=["disabled"],se={key:1,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},te={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},le={class:"space-y-2"},oe={class:"space-y-2"},re={class:"grid grid-cols-2 gap-2"},ne={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},de={class:"space-y-2"},ae={class:"space-y-2"},ie={class:"mt-4 flex items-center justify-between text-xs"},ue={key:2,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},me={class:"mt-4 flex items-center justify-between text-xs"},be={key:3,class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},pe={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},xe={class:"space-y-2"},ge={class:"space-y-2"},fe={class:"mt-4 grid gap-4 md:grid-cols-2 text-xs text-gray-700"},ye={class:"space-y-2"},ce={class:"space-y-2"},ve={class:"mt-4 flex items-center justify-between text-xs"},he={__name:"Install",props:{requirements:{type:Object,default:()=>({})},canContinue:{type:Boolean,default:!1},envExampleExists:{type:Boolean,default:!1}},setup(i){P();const n=E(1),r=V({app_name:"E-Matokeo",app_url:window.location.origin,db_host:"127.0.0.1",db_port:"3306",db_database:"",db_username:"",db_password:""}),o=V({name:"",username:"",email:"",phone:"",password:"",password_confirmation:""}),q=()=>{r.post(route("install.environment"),{preserveScroll:!0,onSuccess:()=>{n=3}})},j=()=>{o.clearErrors(),o.processing=!0,window.axios.post(route("install.migrate")).finally(()=>{o.processing=!1,n=4})},B=()=>{o.post(route("install.admin"),{preserveScroll:!0})};return(we,s)=>{var g,f,y,c,v,w,k,h;return p(),m(U,null,[F(l(M),{title:"E-Matokeo Installer"}),e("div",S,[e("div",N,[s[49]||(s[49]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-2xl font-semibold text-gray-800"},"E-Matokeo Installer"),e("p",{class:"mt-1 text-sm text-gray-500"}," Step-by-step setup for your school results & hostel management system. ")],-1)),e("ol",R,[e("li",T,[e("div",H,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",n.value>=1?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 1 ",2),s[17]||(s[17]=e("span",null,"Requirements",-1))])]),e("li",K,[e("div",O,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",n.value>=2?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 2 ",2),s[18]||(s[18]=e("span",null,".env Configuration",-1))])]),e("li",$,[e("div",I,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",n.value>=3?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 3 ",2),s[19]||(s[19]=e("span",null,"Migrations",-1))])]),e("li",L,[e("div",z,[e("div",{class:u(["flex h-6 w-6 items-center justify-center rounded-full border text-[11px]",n.value>=4?"border-emerald-500 bg-emerald-500 text-white":"border-gray-300 bg-white"])}," 4 ",2),s[20]||(s[20]=e("span",null,"Admin Account",-1))])])]),n.value===1?(p(),m("div",G,[s[27]||(s[27]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Server Requirements",-1)),s[28]||(s[28]=e("p",{class:"mt-1 text-xs text-gray-500"},"Check if your hosting environment meets the minimum requirements.",-1)),e("div",J,[e("div",null,[s[21]||(s[21]=e("h3",{class:"mb-1 font-semibold"},"PHP Version",-1)),e("div",Q,[e("span",null,"Current: "+b((g=i.requirements.php_version)==null?void 0:g.current)+" (Required: "+b((f=i.requirements.php_version)==null?void 0:f.required)+")",1),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(y=i.requirements.php_version)!=null&&y.ok?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((c=i.requirements.php_version)!=null&&c.ok?"OK":"Upgrade PHP"),3)])]),e("div",null,[s[22]||(s[22]=e("h3",{class:"mb-1 font-semibold"},"PHP Extensions",-1)),e("ul",W,[(p(!0),m(U,null,D(i.requirements.extensions||{},(t,C)=>(p(),m("li",{key:C,class:"flex items-center justify-between rounded-lg border border-gray-100 bg-slate-50 px-3 py-1.5"},[e("span",null,b(C),1),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",t?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b(t?"Enabled":"Missing"),3)]))),128))])]),e("div",null,[s[25]||(s[25]=e("h3",{class:"mb-1 font-semibold"},"Permissions",-1)),e("ul",X,[e("li",Y,[s[23]||(s[23]=e("span",null,"storage/ writable",-1)),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(v=i.requirements.permissions)!=null&&v.storage_writable?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((w=i.requirements.permissions)!=null&&w.storage_writable?"OK":"Fix permissions"),3)]),e("li",Z,[s[24]||(s[24]=e("span",null,"bootstrap/cache writable",-1)),e("span",{class:u(["rounded-full px-2 py-0.5 text-[10px] font-semibold",(k=i.requirements.permissions)!=null&&k.bootstrap_cache_writable?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},b((h=i.requirements.permissions)!=null&&h.bootstrap_cache_writable?"OK":"Fix permissions"),3)])])])]),e("div",_,[s[26]||(s[26]=e("p",{class:"text-gray-500"}," Kama kuna requirement haijakaa sawa, rekebisha upande wa hosting kisha refresh ukurasa huu. ",-1)),e("button",{class:u(["rounded-md px-3 py-1.5 text-xs font-semibold text-white shadow-sm",i.canContinue?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-300 cursor-not-allowed"]),disabled:!i.canContinue,onClick:s[0]||(s[0]=t=>n.value=2)}," Continue ",10,ee)])])):n.value===2?(p(),m("div",se,[s[36]||(s[36]=e("h2",{class:"text-sm font-semibold text-gray-800"},".env Configuration",-1)),s[37]||(s[37]=e("p",{class:"mt-1 text-xs text-gray-500"},[x(" Fill in your application and database details. These will be written into the "),e("code",null,".env"),x(" file. ")],-1)),e("div",te,[e("div",le,[e("div",null,[s[29]||(s[29]=e("label",{class:"mb-1 block font-medium"},"App Name",-1)),d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l(r).app_name=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).app_name]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"mb-1 block font-medium"},"App URL",-1)),d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l(r).app_url=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).app_url]])])]),e("div",oe,[e("div",null,[s[31]||(s[31]=e("label",{class:"mb-1 block font-medium"},"DB Host",-1)),d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>l(r).db_host=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).db_host]])]),e("div",re,[e("div",null,[s[32]||(s[32]=e("label",{class:"mb-1 block font-medium"},"DB Port",-1)),d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>l(r).db_port=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).db_port]])])])])]),e("div",ne,[e("div",de,[e("div",null,[s[33]||(s[33]=e("label",{class:"mb-1 block font-medium"},"DB Name",-1)),d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>l(r).db_database=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).db_database]])])]),e("div",ae,[e("div",null,[s[34]||(s[34]=e("label",{class:"mb-1 block font-medium"},"DB Username",-1)),d(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>l(r).db_username=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).db_username]])]),e("div",null,[s[35]||(s[35]=e("label",{class:"mb-1 block font-medium"},"DB Password",-1)),d(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>l(r).db_password=t),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(r).db_password]])])])]),e("div",ie,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[8]||(s[8]=t=>n.value=1)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:q}," Save & Continue ")])])):n.value===3?(p(),m("div",ue,[s[38]||(s[38]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Run Database Migrations",-1)),s[39]||(s[39]=e("p",{class:"mt-1 text-xs text-gray-500"}," The system will create the necessary tables in your configured database. ",-1)),s[40]||(s[40]=e("div",{class:"mt-4 rounded-lg bg-slate-50 px-3 py-2 text-[11px] text-gray-600"},[e("p",null,[x(" Make sure your database exists and the credentials you provided are correct. This will run "),e("code",null,"php artisan migrate --force"),x(". ")])],-1)),e("div",me,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[9]||(s[9]=t=>n.value=2)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:j}," Run Migrations ")])])):n.value===4?(p(),m("div",be,[s[47]||(s[47]=e("h2",{class:"text-sm font-semibold text-gray-800"},"Create Admin Account",-1)),s[48]||(s[48]=e("p",{class:"mt-1 text-xs text-gray-500"}," This account will have full access to manage the school, results and hostels. ",-1)),e("div",pe,[e("div",xe,[e("div",null,[s[41]||(s[41]=e("label",{class:"mb-1 block font-medium"},"Full Name",-1)),d(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>l(o).name=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).name]])]),e("div",null,[s[42]||(s[42]=e("label",{class:"mb-1 block font-medium"},"Username",-1)),d(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>l(o).username=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).username]])])]),e("div",ge,[e("div",null,[s[43]||(s[43]=e("label",{class:"mb-1 block font-medium"},"Email",-1)),d(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>l(o).email=t),type:"email",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).email]])]),e("div",null,[s[44]||(s[44]=e("label",{class:"mb-1 block font-medium"},"Phone (optional)",-1)),d(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>l(o).phone=t),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).phone]])])])]),e("div",fe,[e("div",ye,[e("div",null,[s[45]||(s[45]=e("label",{class:"mb-1 block font-medium"},"Password",-1)),d(e("input",{"onUpdate:modelValue":s[14]||(s[14]=t=>l(o).password=t),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).password]])])]),e("div",ce,[e("div",null,[s[46]||(s[46]=e("label",{class:"mb-1 block font-medium"},"Confirm Password",-1)),d(e("input",{"onUpdate:modelValue":s[15]||(s[15]=t=>l(o).password_confirmation=t),type:"password",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[a,l(o).password_confirmation]])])])]),e("div",ve,[e("button",{class:"rounded-md bg-gray-100 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-200",onClick:s[16]||(s[16]=t=>n.value=3)}," Back "),e("button",{class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:B}," Create Admin & Finish ")])])):A("",!0)])])],64)}}};export{he as default};

import{y as S,j as w,c as l,a as g,u as n,h as k,w as f,b as e,x as h,d as x,k as i,p,o as a,F as u,r as c,t as r,v as M,f as b,s as E}from"./app-6DsKj5k9.js";import{_ as R}from"./AuthenticatedLayout-ZgPNbOsd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"space-y-4"},N={class:"grid gap-4 lg:grid-cols-3"},V={class:"lg:col-span-2 rounded-xl bg-white p-5 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},C={class:"grid gap-3 md:grid-cols-3"},j={key:0},F=["value"],L={key:0,class:"grid gap-3 md:grid-cols-2"},P=["value"],T={key:0,class:"text-[11px] text-gray-500"},U={class:"flex items-center justify-end gap-2"},D=["disabled"],B={class:"space-y-4"},G={class:"rounded-xl bg-white p-4 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},z={key:0,class:"text-[11px] text-gray-500"},I={key:1,class:"space-y-1 text-[11px]"},K={class:"font-semibold text-gray-800"},O={class:"text-[10px] text-gray-500"},Q={class:"rounded-xl bg-white p-4 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},W={key:0,class:"text-[11px] text-gray-500"},$={key:1,class:"space-y-1 text-[11px] max-h-48 overflow-auto pr-1"},q={class:"flex items-center justify-between"},H={class:"font-semibold text-gray-800"},J={class:"text-[10px] text-gray-500"},X={class:"text-[10px] text-gray-500"},Y={class:"font-medium text-gray-700"},Z={key:0},ee={class:"mt-0.5 line-clamp-2 text-[10px] text-gray-600"},se={class:"mt-0.5 text-[10px] text-gray-500"},oe={__name:"NotificationsSms",props:{exams:{type:Array,default:()=>[]},classLevels:{type:Array,default:()=>[]},recent:{type:Array,default:()=>[]}},setup(d){const v=d,o=S({type:"exam_results",audience:"all_parents",exam_id:"",class_level:"",message:""}),_=()=>{o.post(route("notifications.sms.store"))},m=w(()=>o.exam_id&&(v.exams||[]).find(y=>String(y.id)===String(o.exam_id))||null);return(y,s)=>(a(),l(u,null,[g(n(k),{title:"Results SMS & Reminders"}),g(R,null,{header:f(()=>[...s[5]||(s[5]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Results SMS & Reminders "),e("p",{class:"mt-1 text-sm text-gray-500"}," Send exam results and important school information to parents and teachers via SMS. ")])],-1)])]),default:f(()=>[e("div",A,[e("div",N,[e("div",V,[s[17]||(s[17]=e("h3",{class:"mb-3 text-sm font-semibold text-gray-800"}," Compose Message ",-1)),e("form",{class:"space-y-3",onSubmit:h(_,["prevent"])},[e("div",C,[e("div",null,[s[7]||(s[7]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Purpose",-1)),i(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>n(o).type=t),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...s[6]||(s[6]=[e("option",{value:"exam_results"},"Exam Results",-1),e("option",{value:"general"},"General Information",-1),e("option",{value:"reminder"},"Reminder",-1)])],512),[[p,n(o).type]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Audience",-1)),i(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>n(o).audience=t),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...s[8]||(s[8]=[e("option",{value:"all_parents"},"All Parents / Guardians",-1),e("option",{value:"class_parents"},"Parents by Class / Form",-1),e("option",{value:"all_teachers"},"All Teachers",-1)])],512),[[p,n(o).audience]])]),n(o).audience==="class_parents"?(a(),l("div",j,[s[11]||(s[11]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Class / Form",-1)),i(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>n(o).class_level=t),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[s[10]||(s[10]=e("option",{value:""},"Select class / form",-1)),(a(!0),l(u,null,c(d.classLevels,t=>(a(),l("option",{key:t,value:t},r(t),9,F))),128))],512),[[p,n(o).class_level]])])):x("",!0)]),n(o).type==="exam_results"?(a(),l("div",L,[e("div",null,[s[13]||(s[13]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Exam",-1)),i(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>n(o).exam_id=t),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[s[12]||(s[12]=e("option",{value:""},"Select exam",-1)),(a(!0),l(u,null,c(d.exams,t=>(a(),l("option",{key:t.id,value:t.id},r(t.name)+" ("+r(t.academic_year)+") ",9,P))),128))],512),[[p,n(o).exam_id]])]),m.value?(a(),l("div",T,[s[14]||(s[14]=e("p",{class:"font-semibold text-gray-700"}," Selected Exam ",-1)),e("p",null,r(m.value.name)+" - "+r(m.value.type)+" ("+r(m.value.academic_year)+") ",1)])):x("",!0)])):x("",!0),e("div",null,[s[15]||(s[15]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Message",-1)),i(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>n(o).message=t),rows:"4",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Write your SMS message here. Example: Dear parent, exam results for TERM ONE 2025 are now available..."},null,512),[[M,n(o).message]]),s[16]||(s[16]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," Keep the message short and clear. Long messages may be split into multiple SMS parts by your provider. ",-1))]),e("div",U,[e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",disabled:n(o).processing}," Save & Queue SMS ",8,D)])],32)]),e("div",B,[e("div",G,[s[18]||(s[18]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-800"}," Exams (recent) ",-1)),d.exams.length===0?(a(),l("div",z," No exams found. ")):(a(),l("ul",I,[(a(!0),l(u,null,c(d.exams,t=>(a(),l("li",{key:t.id,class:"flex items-center justify-between rounded border border-gray-100 bg-slate-50 px-2 py-1"},[e("div",null,[e("div",K,r(t.name),1),e("div",O,r(t.type)+" \0b7 "+r(t.academic_year),1)])]))),128))]))]),e("div",Q,[s[21]||(s[21]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-800"}," Recent SMS Notifications ",-1)),d.recent.length===0?(a(),l("div",W," No SMS notifications have been created yet. ")):(a(),l("ul",$,[(a(!0),l(u,null,c(d.recent,t=>(a(),l("li",{key:t.id,class:"rounded border border-gray-100 bg-slate-50 px-2 py-1"},[e("div",q,[e("span",H,r(t.type==="exam_results"?"Exam Results":t.type==="reminder"?"Reminder":"General"),1),e("span",J,r(new Date(t.created_at).toLocaleString()),1)]),e("div",X,[s[19]||(s[19]=b(" Audience: ",-1)),e("span",Y,r(t.audience==="all_parents"?"All Parents":t.audience==="class_parents"?"Parents by Class":"All Teachers"),1),t.class_level?(a(),l("span",Z," \0b7 "+r(t.class_level),1)):x("",!0)]),e("div",ee,r(t.message),1),e("div",se,[s[20]||(s[20]=b(" Status: ",-1)),e("span",{class:E(["font-medium",t.status==="sent"?"text-emerald-700":t.status==="failed"?"text-red-700":"text-amber-700"])},r(t.status),3)])]))),128))]))])])])])]),_:1})],64))}};export{oe as default};

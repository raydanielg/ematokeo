import{q as S,c as w,a as l,b as y,u as n,h as k,w as f,d as e,p as h,e as x,g as i,k as p,o as a,F as u,f as c,t as r,v as M,m as b,n as E}from"./app-Tl4Ohsz1.js";import{_ as R}from"./AuthenticatedLayout-D0sVaQjy.js";import"./ApplicationLogo-DaacQ1Vn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"space-y-4"},N={class:"grid gap-4 lg:grid-cols-3"},V={class:"lg:col-span-2 rounded-xl bg-white p-5 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},C={class:"grid gap-3 md:grid-cols-3"},F={key:0},L=["value"],P={key:0,class:"grid gap-3 md:grid-cols-2"},T=["value"],U={key:0,class:"text-[11px] text-gray-500"},j={class:"flex items-center justify-end gap-2"},D=["disabled"],B={class:"space-y-4"},G={class:"rounded-xl bg-white p-4 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},q={key:0,class:"text-[11px] text-gray-500"},z={key:1,class:"space-y-1 text-[11px]"},I={class:"font-semibold text-gray-800"},K={class:"text-[10px] text-gray-500"},O={class:"rounded-xl bg-white p-4 text-xs text-gray-700 shadow-sm ring-1 ring-gray-100"},Q={key:0,class:"text-[11px] text-gray-500"},W={key:1,class:"space-y-1 text-[11px] max-h-48 overflow-auto pr-1"},$={class:"flex items-center justify-between"},H={class:"font-semibold text-gray-800"},J={class:"text-[10px] text-gray-500"},X={class:"text-[10px] text-gray-500"},Y={class:"font-medium text-gray-700"},Z={key:0},ee={class:"mt-0.5 line-clamp-2 text-[10px] text-gray-600"},te={class:"mt-0.5 text-[10px] text-gray-500"},re={__name:"NotificationsSms",props:{exams:{type:Array,default:()=>[]},classLevels:{type:Array,default:()=>[]},recent:{type:Array,default:()=>[]}},setup(d){const v=d,o=S({type:"exam_results",audience:"all_parents",exam_id:"",class_level:"",message:""}),_=()=>{o.post(route("notifications.sms.store"))},m=w(()=>o.exam_id&&(v.exams||[]).find(g=>String(g.id)===String(o.exam_id))||null);return(g,t)=>(a(),l(u,null,[y(n(k),{title:"Results SMS & Reminders"}),y(R,null,{header:f(()=>[...t[5]||(t[5]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Results SMS & Reminders "),e("p",{class:"mt-1 text-sm text-gray-500"}," Send exam results and important school information to parents and teachers via SMS. ")])],-1)])]),default:f(()=>[e("div",A,[e("div",N,[e("div",V,[t[17]||(t[17]=e("h3",{class:"mb-3 text-sm font-semibold text-gray-800"}," Compose Message ",-1)),e("form",{class:"space-y-3",onSubmit:h(_,["prevent"])},[e("div",C,[e("div",null,[t[7]||(t[7]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Purpose",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n(o).type=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...t[6]||(t[6]=[e("option",{value:"exam_results"},"Exam Results",-1),e("option",{value:"general"},"General Information",-1),e("option",{value:"reminder"},"Reminder",-1)])],512),[[p,n(o).type]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Audience",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n(o).audience=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...t[8]||(t[8]=[e("option",{value:"all_parents"},"All Parents / Guardians",-1),e("option",{value:"class_parents"},"Parents by Class / Form",-1),e("option",{value:"all_teachers"},"All Teachers",-1)])],512),[[p,n(o).audience]])]),n(o).audience==="class_parents"?(a(),l("div",F,[t[11]||(t[11]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Class / Form",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n(o).class_level=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[10]||(t[10]=e("option",{value:""},"Select class / form",-1)),(a(!0),l(u,null,c(d.classLevels,s=>(a(),l("option",{key:s,value:s},r(s),9,L))),128))],512),[[p,n(o).class_level]])])):x("",!0)]),n(o).type==="exam_results"?(a(),l("div",P,[e("div",null,[t[13]||(t[13]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Exam",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n(o).exam_id=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[12]||(t[12]=e("option",{value:""},"Select exam",-1)),(a(!0),l(u,null,c(d.exams,s=>(a(),l("option",{key:s.id,value:s.id},r(s.name)+" ("+r(s.academic_year)+") ",9,T))),128))],512),[[p,n(o).exam_id]])]),m.value?(a(),l("div",U,[t[14]||(t[14]=e("p",{class:"font-semibold text-gray-700"}," Selected Exam ",-1)),e("p",null,r(m.value.name)+" - "+r(m.value.type)+" ("+r(m.value.academic_year)+") ",1)])):x("",!0)])):x("",!0),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Message",-1)),i(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>n(o).message=s),rows:"4",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Write your SMS message here. Example: Dear parent, exam results for TERM ONE 2025 are now available..."},null,512),[[M,n(o).message]]),t[16]||(t[16]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," Keep the message short and clear. Long messages may be split into multiple SMS parts by your provider. ",-1))]),e("div",j,[e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",disabled:n(o).processing}," Save & Queue SMS ",8,D)])],32)]),e("div",B,[e("div",G,[t[18]||(t[18]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-800"}," Exams (recent) ",-1)),d.exams.length===0?(a(),l("div",q," No exams found. ")):(a(),l("ul",z,[(a(!0),l(u,null,c(d.exams,s=>(a(),l("li",{key:s.id,class:"flex items-center justify-between rounded border border-gray-100 bg-slate-50 px-2 py-1"},[e("div",null,[e("div",I,r(s.name),1),e("div",K,r(s.type)+" \0b7 "+r(s.academic_year),1)])]))),128))]))]),e("div",O,[t[21]||(t[21]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-800"}," Recent SMS Notifications ",-1)),d.recent.length===0?(a(),l("div",Q," No SMS notifications have been created yet. ")):(a(),l("ul",W,[(a(!0),l(u,null,c(d.recent,s=>(a(),l("li",{key:s.id,class:"rounded border border-gray-100 bg-slate-50 px-2 py-1"},[e("div",$,[e("span",H,r(s.type==="exam_results"?"Exam Results":s.type==="reminder"?"Reminder":"General"),1),e("span",J,r(new Date(s.created_at).toLocaleString()),1)]),e("div",X,[t[19]||(t[19]=b(" Audience: ",-1)),e("span",Y,r(s.audience==="all_parents"?"All Parents":s.audience==="class_parents"?"Parents by Class":"All Teachers"),1),s.class_level?(a(),l("span",Z," \0b7 "+r(s.class_level),1)):x("",!0)]),e("div",ee,r(s.message),1),e("div",te,[t[20]||(t[20]=b(" Status: ",-1)),e("span",{class:E(["font-medium",s.status==="sent"?"text-emerald-700":s.status==="failed"?"text-red-700":"text-amber-700"])},r(s.status),3)])]))),128))]))])])])])]),_:1})],64))}};export{re as default};

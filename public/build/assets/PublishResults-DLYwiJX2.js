import{i as v,c as a,a as c,u as k,h as C,w as b,b as e,d,o as r,F as n,r as p,t as l,s as P,T as Y,f as y,m as g}from"./app-t3oaDc9p.js";import{_ as j}from"./AuthenticatedLayout-DkEC2RSo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex flex-wrap items-center justify-between gap-3"},T={class:"flex flex-wrap items-center gap-3 text-xs"},N={class:"flex items-center gap-2"},z=["value","selected"],S={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},E={class:"overflow-x-auto"},R={class:"min-w-full border-collapse text-[11px]"},V={key:0},W={class:"px-3 py-1.5 align-top text-sm font-medium text-gray-900"},A={class:"px-3 py-1.5 align-top"},K={class:"flex flex-col"},B={key:0,class:"text-[10px] text-gray-500"},D={class:"px-3 py-1.5 align-top"},L={key:0,class:"inline-flex flex-wrap gap-1"},F={key:1,class:"text-gray-400"},O={class:"px-3 py-1.5 align-top text-center"},U={key:0,class:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100"},$={key:1,class:"inline-flex items-center rounded-full bg-yellow-50 px-2 py-0.5 text-[10px] font-medium text-yellow-700 ring-1 ring-yellow-100"},H={class:"px-3 py-1.5 align-top text-right"},J={class:"flex justify-end gap-2"},Z=["onClick"],q=["href"],G={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-8"},I={class:"max-h-full w-full max-w-4xl overflow-y-auto rounded-xl bg-white p-6 text-xs text-gray-800 shadow-xl"},Q={class:"border border-gray-200 bg-white p-4",id:"publish-results-document"},X={class:"mb-3 text-center"},ee={class:"text-[10px] text-gray-500"},te={class:"font-medium"},se={class:"w-full border-collapse text-[11px]"},ae={key:0},re={class:"border border-emerald-100 px-2 py-1 bg-white"},le={class:"border border-emerald-100 px-2 py-1 bg-white"},oe={key:0},ie={class:"border border-emerald-100 px-2 py-1 bg-white"},de={key:0},ne={key:1},pe={class:"border border-emerald-100 px-2 py-1 text-center bg-white"},ue={key:0},xe={key:1},ge={__name:"PublishResults",props:{years:{type:Array,default:()=>[]},exams:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({year:null})}},setup(o){const u=v(!1),h=i=>{const t=i.target.value||null;g.get(route("results.publish"),{year:t},{preserveState:!0,preserveScroll:!0,replace:!0})},m=(i,t)=>{g.post(route("results.publish.toggle",i),{publish:t},{preserveScroll:!0})},f=()=>{u.value=!0},w=()=>{u.value=!1},_=()=>{window.print()};return(i,t)=>(r(),a(n,null,[c(k(C),{title:"Publish Results"}),c(j,null,{header:b(()=>[e("div",M,[t[2]||(t[2]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Publish Results "),e("p",{class:"mt-1 text-sm text-gray-500"}," Control which exams are published and ready to be shared with students, parents and the public. ")],-1)),e("div",T,[e("div",N,[t[1]||(t[1]=e("label",{class:"text-xs font-medium uppercase tracking-wide text-gray-500"},"Year",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-xs text-gray-700 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",onChange:h},[t[0]||(t[0]=e("option",{value:""},"All Years",-1)),(r(!0),a(n,null,p(o.years,s=>(r(),a("option",{key:s,value:s,selected:o.filters.year===s},l(s),9,z))),128))],32)])])])]),default:b(()=>[e("div",S,[e("div",{class:"mb-3 flex items-center justify-between text-xs text-gray-600"},[t[3]||(t[3]=e("div",null,[e("p",{class:"mb-1 font-medium"},"Exams Publish Control"),e("p",{class:"text-[11px] text-gray-500"}," Use this page to mark exam results as published. Once published, results and related reports can be shared publicly. ")],-1)),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:f}," Preview Publish Notice ")]),e("div",E,[e("table",R,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"bg-gray-50 text-gray-600"},[e("th",{class:"border-b border-gray-200 px-3 py-1.5 text-left"},"Exam"),e("th",{class:"border-b border-gray-200 px-3 py-1.5 text-left"},"Year / Type"),e("th",{class:"border-b border-gray-200 px-3 py-1.5 text-left"},"Class Levels"),e("th",{class:"border-b border-gray-200 px-3 py-1.5 text-center"},"Status"),e("th",{class:"border-b border-gray-200 px-3 py-1.5 text-right"},"Actions")])],-1)),e("tbody",null,[o.exams.length===0?(r(),a("tr",V,[...t[4]||(t[4]=[e("td",{colspan:"5",class:"px-3 py-4 text-center text-[11px] text-gray-400"}," No exams found for the selected filters. ",-1)])])):d("",!0),(r(!0),a(n,null,p(o.exams,s=>(r(),a("tr",{key:s.id,class:"border-b border-gray-100 text-gray-700 odd:bg-white even:bg-gray-50"},[e("td",W,l(s.name),1),e("td",A,[e("div",K,[e("span",null,l(s.academic_year||"—"),1),s.type?(r(),a("span",B,l(s.type),1)):d("",!0)])]),e("td",D,[s.levels&&s.levels.length?(r(),a("span",L,[(r(!0),a(n,null,p(s.levels,x=>(r(),a("span",{key:x,class:"rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100"},l(x),1))),128))])):(r(),a("span",F,"—"))]),e("td",O,[s.is_published?(r(),a("span",U," Published ")):(r(),a("span",$," Draft "))]),e("td",H,[e("div",J,[e("button",{type:"button",class:P(["rounded-md border px-2 py-0.5 text-[10px] font-medium shadow-sm",s.is_published?"border-gray-300 text-gray-600 hover:bg-gray-100":"border-emerald-600 text-emerald-700 hover:bg-emerald-50"]),onClick:x=>m(s.id,!s.is_published)},l(s.is_published?"Unpublish":"Publish Results"),11,Z),e("a",{href:i.route("exams.results",s.id),class:"rounded-md border border-gray-200 px-2 py-0.5 text-[10px] font-medium text-gray-700 hover:bg-gray-100"}," View Results ",8,q)])])]))),128))])])])]),c(Y,{name:"fade"},{default:b(()=>[u.value?(r(),a("div",G,[e("div",I,[e("div",{class:"mb-4 flex items-center justify-between"},[t[6]||(t[6]=e("div",null,[e("h3",{class:"text-sm font-semibold uppercase tracking-wide text-gray-800"}," Taarifa Ya Kuchapishwa Kwa Matokeo "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Waraka huu unaonyesha mitihani iliyochapishwa rasmi na ipo tayari kutangazwa kwa wanafunzi na wazazi. ")],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-semibold text-gray-700 hover:bg-gray-200",onClick:w}," Close "),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:_}," Print ")])]),e("div",Q,[e("div",X,[t[8]||(t[8]=e("div",{class:"mb-2 flex justify-center"},[e("img",{src:"/images/emblem.png",alt:"National Emblem",class:"h-10 w-10 object-contain"})],-1)),t[9]||(t[9]=e("div",{class:"leading-tight"},[e("div",{class:"text-[10px] font-semibold uppercase tracking-wide text-gray-700"}," Jamhuri Ya Muungano Wa Tanzania "),e("div",{class:"text-[10px] text-gray-700"}," Wizara Ya Elimu, Sayansi Na Teknolojia "),e("div",{class:"mt-0.5 text-[10px] text-gray-500"}," Mfumo Wa Taarifa Za Mitihani Na Matokeo Ya Shule (E-Matokeo) ")],-1)),t[10]||(t[10]=e("div",{class:"mt-3 text-[11px] font-semibold uppercase tracking-wide text-gray-800"}," Taarifa Ya Kuchapishwa Kwa Matokeo Ya Mitihani ",-1)),e("div",ee,[t[7]||(t[7]=y(" Mwaka: ",-1)),e("span",te,l(o.filters.year||"Mwaka Wote"),1)])]),e("table",se,[t[12]||(t[12]=e("thead",null,[e("tr",{class:"bg-emerald-50 text-emerald-800"},[e("th",{class:"border border-emerald-100 px-2 py-1 text-left"},"Exam"),e("th",{class:"border border-emerald-100 px-2 py-1 text-left"},"Year / Type"),e("th",{class:"border border-emerald-100 px-2 py-1 text-left"},"Class Levels"),e("th",{class:"border border-emerald-100 px-2 py-1 text-center"},"Status")])],-1)),e("tbody",null,[o.exams.length?d("",!0):(r(),a("tr",ae,[...t[11]||(t[11]=[e("td",{colspan:"4",class:"border border-gray-200 px-2 py-3 text-center text-[11px] text-gray-400"}," Hakuna mitihani iliyopatikana kwa mwaka huu. ",-1)])])),(r(!0),a(n,null,p(o.exams,s=>(r(),a("tr",{key:s.id,class:"text-gray-700"},[e("td",re,l(s.name),1),e("td",le,[y(l(s.academic_year||"—"),1),s.type?(r(),a("span",oe," • "+l(s.type),1)):d("",!0)]),e("td",ie,[s.levels&&s.levels.length?(r(),a("span",de,l(s.levels.join(", ")),1)):(r(),a("span",ne,"—"))]),e("td",pe,[s.is_published?(r(),a("span",ue,"Published")):(r(),a("span",xe,"Draft"))])]))),128))])])])])])):d("",!0)]),_:1})]),_:1})],64))}};export{ge as default};

import{y as N,i as c,j as P,c as o,a as j,u as n,h as E,w as _,b as e,d as x,o as l,F as f,r as b,s as S,t as d,k as v,v as w,p as L,m as O}from"./app-Dhx-yCKK.js";import{_ as z}from"./AuthenticatedLayout-Dss5qv1-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"flex items-center justify-between"},A={key:0,class:"mt-1 text-xs text-emerald-700"},G={key:0},H={key:1,class:"ml-2"},K={class:"space-y-4"},W={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},q={class:"grid gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},J=["onClick"],Q={class:"text-xs font-semibold text-gray-800"},X={class:"mt-4 flex flex-col gap-2 border-t border-dashed border-gray-200 pt-3"},Y={class:"flex flex-wrap gap-2"},Z=["onClick"],ee={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},te={class:"mb-3 flex items-center justify-between"},se={class:"text-sm font-medium text-gray-700"},oe={key:0,class:"py-6 text-center text-[11px] text-gray-500"},le={key:1,class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},re={class:"mb-2 flex items-center justify-between"},ne={class:"text-sm font-semibold text-gray-800"},de={class:"rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100"},ae={class:"mt-1 space-y-1 text-[11px] text-gray-700"},ie={class:"font-semibold text-gray-800"},ue={key:0,class:"text-[10px] text-gray-500"},me=["href"],ce={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},xe={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},fe={class:"mb-3 flex items-center justify-between"},pe={class:"space-y-3 text-xs"},ge={class:"mt-4 flex items-center justify-end gap-2"},ye={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},be={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},ve={class:"mb-3 flex items-center justify-between"},he={class:"grid gap-3 md:grid-cols-2 text-xs"},ke=["value"],we={class:"mt-4 flex items-center justify-end gap-2"},_e={__name:"ResourceBooks",props:{folders:{type:Array,default:()=>[]},subject:{type:String,default:null},form:{type:String,default:null}},setup(i){const C=i,r=N({folder:"",title:"",description:"",file:null}),p=c(!1),g=c(!1),m=c(""),y=c(""),I=P(()=>(C.folders||[]).map(a=>a.folder)),V=[{key:"mathematics",name:"Mathematics"},{key:"english",name:"English"},{key:"kiswahili",name:"Kiswahili"},{key:"physics",name:"Physics"},{key:"chemistry",name:"Chemistry"},{key:"biology",name:"Biology"},{key:"civics",name:"Civics"},{key:"history",name:"History"},{key:"geography",name:"Geography"}],h=c(C.subject||""),k=c(C.form||""),U=[{key:"form-i",label:"Form I"},{key:"form-ii",label:"Form II"},{key:"form-iii",label:"Form III"},{key:"form-iv",label:"Form IV"}],B=()=>{!h.value||!k.value||O.visit(route("resources.books.show",{subject:h.value,form:k.value}))},F=()=>{m.value&&(r.folder=m.value),r.post(route("resources.books.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{r.reset("folder","title","description","file"),m.value="",p.value=!1}})},D=a=>{const[t]=a.target.files;r.file=t||null},$=()=>{y.value="",g.value=!0},M=()=>{p.value=!0},T=()=>{const a=(y.value||"").trim();a&&(m.value="",r.folder=a,r.title=a,g.value=!1,F(),y.value="")};return(a,t)=>(l(),o(f,null,[j(n(E),{title:"Books & References"}),j(z,null,{header:_(()=>[e("div",R,[e("div",null,[t[9]||(t[9]=e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Books & References ",-1)),t[10]||(t[10]=e("p",{class:"mt-1 text-sm text-gray-500"}," Create resource folders and upload documents (PDF, Word, etc.) for teachers. ",-1)),i.subject||n(r)?(l(),o("p",A,[i.subject?(l(),o("span",G,"Subject: "+d(i.subject),1)):x("",!0),n(r)?(l(),o("span",H,"Class: "+d(n(r)),1)):x("",!0)])):x("",!0)]),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:$}," Create Folder "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-semibold text-emerald-700 shadow-sm ring-1 ring-emerald-200 hover:bg-emerald-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:M}," Upload Document ")])])]),default:_(()=>[e("div",K,[e("div",W,[t[13]||(t[13]=e("div",{class:"mb-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},[e("div",null,[e("p",{class:"text-sm font-medium text-gray-700"}," Choose Subject & Class "),e("p",{class:"text-[11px] text-gray-500"}," Tap a subject card then pick Form I  Form IV to open that subject resources page. ")])],-1)),e("div",q,[(l(),o(f,null,b(V,s=>e("button",{key:s.key,type:"button",class:S(["flex flex-col items-start rounded-lg border px-3 py-2 text-left text-[11px] shadow-sm transition hover:border-emerald-400 hover:bg-emerald-50",h.value===s.key?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-slate-50"]),onClick:u=>h.value=s.key},[e("span",Q,d(s.name),1),t[11]||(t[11]=e("span",{class:"mt-0.5 text-[10px] text-gray-500"},"Tap to choose this subject",-1))],10,J)),64))]),e("div",X,[t[12]||(t[12]=e("p",{class:"text-[11px] font-medium text-gray-700"}," Select Class Level ",-1)),e("div",Y,[(l(),o(f,null,b(U,s=>e("button",{key:s.key,type:"button",class:S(["rounded-full px-3 py-1 text-[11px] font-medium shadow-sm ring-1 transition",k.value===s.key?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-emerald-700 ring-emerald-200 hover:bg-emerald-50"]),onClick:u=>{k.value=s.key,B()}},d(s.label),11,Z)),64))])])]),e("div",ee,[e("div",te,[e("p",se," Folders ("+d(i.folders.length)+") ",1),t[14]||(t[14]=e("p",{class:"text-[11px] text-gray-500"}," Each card represents a folder containing uploaded books/documents. ",-1))]),i.folders.length===0?(l(),o("div",oe," No resources uploaded yet. Create a folder name and upload your first document above. ")):(l(),o("div",le,[(l(!0),o(f,null,b(i.folders,s=>(l(),o("div",{key:s.folder,class:"flex flex-col rounded-lg border border-gray-200 bg-slate-50 p-4 shadow-sm"},[e("div",re,[e("h3",ne,d(s.folder),1),e("span",de,d(s.items.length)+" files ",1)]),e("ul",ae,[(l(!0),o(f,null,b(s.items,u=>(l(),o("li",{key:u.id,class:"flex items-start justify-between gap-2 rounded-md border border-gray-200 bg-white px-2 py-1"},[e("div",null,[e("div",ie,d(u.title),1),u.description?(l(),o("div",ue,d(u.description),1)):x("",!0)]),e("a",{href:`/storage/${u.file_path}`,target:"_blank",class:"shrink-0 rounded-md bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100"}," Open ",8,me)]))),128))])]))),128))]))]),g.value?(l(),o("div",ce,[e("div",xe,[e("div",fe,[t[15]||(t[15]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"}," Create Folder "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Type the name of the folder you want to use, then continue to upload documents into it. ")],-1)),e("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:t[0]||(t[0]=s=>g.value=!1)}," Close ")]),e("div",pe,[e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Folder name",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form II Physics, Staff Library"},null,512),[[w,y.value]])])]),e("div",ge,[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:t[2]||(t[2]=s=>g.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:T}," Create Folder ")])])])):x("",!0),p.value?(l(),o("div",ye,[e("div",be,[e("div",ve,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"}," Create Folder & Upload Document "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Choose an existing folder or type a new one, then set document details and upload the file. ")],-1)),e("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:t[3]||(t[3]=s=>p.value=!1)}," Close ")]),e("div",he,[e("div",null,[t[19]||(t[19]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Select existing folder",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[18]||(t[18]=e("option",{value:""}," -- Choose folder (optional) -- ",-1)),(l(!0),o(f,null,b(I.value,s=>(l(),o("option",{key:s,value:s},d(s),9,ke))),128))],512),[[L,m.value]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Or new folder name",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>n(r).folder=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form II Physics, Staff Library"},null,512),[[w,n(r).folder]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Title",-1)),v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>n(r).title=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Physics Book 2 - NECTA"},null,512),[[w,n(r).title]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Description (optional)",-1)),v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>n(r).description=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Short notes for teachers / subject"},null,512),[[w,n(r).description]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"mb-1 block text-[11px] font-medium"},"File",-1)),e("input",{type:"file",class:"w-full text-[11px]",onChange:D},null,32)])]),e("div",we,[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:t[8]||(t[8]=s=>p.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:F}," Upload Document ")])])])):x("",!0)])]),_:1})],64))}};export{_e as default};

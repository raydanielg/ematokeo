import{y as V,i as g,j as B,c as l,a as k,u as d,h as M,w as C,b as e,d as v,t as i,o as r,F as b,r as h,k as c,v as y,p as N}from"./app-CJLHV58l.js";import{_ as $}from"./AuthenticatedLayout-DivsuQqy.js";import"./ApplicationLogo-DdIlblXI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"space-y-4"},O={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},P={class:"mb-3 flex items-center justify-between"},T={class:"text-sm font-medium text-gray-700"},E={key:0,class:"py-6 text-center text-[11px] text-gray-500"},L={key:1,class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},R={class:"mb-2 flex items-center justify-between"},z={class:"text-sm font-semibold text-gray-800"},A={class:"rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100"},W={class:"mt-1 space-y-1 text-[11px] text-gray-700"},q={class:"font-semibold text-gray-800"},G={key:0,class:"text-[10px] text-gray-500"},H=["href"],J={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},K={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},Q={class:"mb-3 flex items-center justify-between"},X={class:"space-y-3 text-xs"},Y={class:"mt-4 flex items-center justify-end gap-2"},Z={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},ee={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},te={class:"mb-3 flex items-center justify-between"},oe={class:"grid gap-3 md:grid-cols-2 text-xs"},se=["value"],le={class:"mt-4 flex items-center justify-end gap-2"},ie={__name:"ResourceBooks",props:{folders:{type:Array,default:()=>[]}},setup(p){const F=p,s=V({folder:"",title:"",description:"",file:null}),u=g(!1),m=g(!1),a=g(""),f=g(""),_=B(()=>(F.folders||[]).map(n=>n.folder)),w=()=>{a.value&&(s.folder=a.value),s.post(route("resources.books.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{s.reset("folder","title","description","file"),a.value="",u.value=!1}})},j=n=>{const[t]=n.target.files;s.file=t||null},U=()=>{f.value="",m.value=!0},D=()=>{u.value=!0},S=()=>{const n=(f.value||"").trim();n&&(a.value="",s.folder=n,s.title=n,m.value=!1,w(),f.value="")};return(n,t)=>(r(),l(b,null,[k(d(M),{title:"Books & References"}),k($,null,{header:C(()=>[e("div",{class:"flex items-center justify-between"},[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Books & References "),e("p",{class:"mt-1 text-sm text-gray-500"}," Create resource folders and upload documents (PDF, Word, etc.) for teachers. ")],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:U}," Create Folder "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-semibold text-emerald-700 shadow-sm ring-1 ring-emerald-200 hover:bg-emerald-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:D}," Upload Document ")])])]),default:C(()=>[e("div",I,[e("div",O,[e("div",P,[e("p",T," Folders ("+i(p.folders.length)+") ",1),t[10]||(t[10]=e("p",{class:"text-[11px] text-gray-500"}," Each card represents a folder containing uploaded books/documents. ",-1))]),p.folders.length===0?(r(),l("div",E," No resources uploaded yet. Create a folder name and upload your first document above. ")):(r(),l("div",L,[(r(!0),l(b,null,h(p.folders,o=>(r(),l("div",{key:o.folder,class:"flex flex-col rounded-lg border border-gray-200 bg-slate-50 p-4 shadow-sm"},[e("div",R,[e("h3",z,i(o.folder),1),e("span",A,i(o.items.length)+" files ",1)]),e("ul",W,[(r(!0),l(b,null,h(o.items,x=>(r(),l("li",{key:x.id,class:"flex items-start justify-between gap-2 rounded-md border border-gray-200 bg-white px-2 py-1"},[e("div",null,[e("div",q,i(x.title),1),x.description?(r(),l("div",G,i(x.description),1)):v("",!0)]),e("a",{href:`/storage/${x.file_path}`,target:"_blank",class:"shrink-0 rounded-md bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100"}," Open ",8,H)]))),128))])]))),128))]))]),m.value?(r(),l("div",J,[e("div",K,[e("div",Q,[t[11]||(t[11]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"}," Create Folder "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Type the name of the folder you want to use, then continue to upload documents into it. ")],-1)),e("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:t[0]||(t[0]=o=>m.value=!1)}," Close ")]),e("div",X,[e("div",null,[t[12]||(t[12]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Folder name",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form II Physics, Staff Library"},null,512),[[y,f.value]])])]),e("div",Y,[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:t[2]||(t[2]=o=>m.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:S}," Create Folder ")])])])):v("",!0),u.value?(r(),l("div",Z,[e("div",ee,[e("div",te,[t[13]||(t[13]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"}," Create Folder & Upload Document "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Choose an existing folder or type a new one, then set document details and upload the file. ")],-1)),e("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:t[3]||(t[3]=o=>u.value=!1)}," Close ")]),e("div",oe,[e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Select existing folder",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>a.value=o),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[14]||(t[14]=e("option",{value:""}," -- Choose folder (optional) -- ",-1)),(r(!0),l(b,null,h(_.value,o=>(r(),l("option",{key:o,value:o},i(o),9,se))),128))],512),[[N,a.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Or new folder name",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>d(s).folder=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Form II Physics, Staff Library"},null,512),[[y,d(s).folder]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Title",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>d(s).title=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Physics Book 2 - NECTA"},null,512),[[y,d(s).title]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Description (optional)",-1)),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>d(s).description=o),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Short notes for teachers / subject"},null,512),[[y,d(s).description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"mb-1 block text-[11px] font-medium"},"File",-1)),e("input",{type:"file",class:"w-full text-[11px]",onChange:j},null,32)])]),e("div",le,[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:t[8]||(t[8]=o=>u.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:w}," Upload Document ")])])])):v("",!0)])]),_:1})],64))}};export{ie as default};

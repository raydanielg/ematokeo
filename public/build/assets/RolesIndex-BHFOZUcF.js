import{_ as b}from"./AuthenticatedLayout-B6-gQ16C.js";import{i as v,j as w,c as l,a as m,u as k,h as S,w as p,b as e,t as d,d as C,o as r,F as x,r as g,s as N,f as h,m as R}from"./app-CWZD6_dF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},V={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},j={class:"mb-4 flex items-center justify-between"},B={class:"text-sm font-semibold text-gray-800"},D={class:"overflow-hidden rounded-xl border border-gray-200"},F={class:"overflow-x-auto"},I={class:"min-w-full text-left text-sm"},E={key:0},P={class:"px-4 py-3"},T={class:"font-medium text-gray-900"},U={class:"text-[10px] text-gray-500"},z={class:"px-4 py-3"},L={class:"px-4 py-3"},O={class:"px-4 py-3"},$=["disabled","value","onChange"],q=["value"],G={class:"px-4 py-3 text-right"},H={key:0,class:"inline-flex items-center rounded-full bg-amber-50 px-2 py-1 text-[10px] font-semibold text-amber-800 ring-1 ring-amber-100"},J={key:1,class:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-1 text-[10px] font-semibold text-emerald-800 ring-1 ring-emerald-100"},W={__name:"RolesIndex",props:{users:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]}},setup(i){const y=i,n=v(new Set),f=w(()=>(y.roles||[]).map(s=>({key:s.key,name:s.name}))),_=(s,a)=>{var c;const t=((c=a==null?void 0:a.target)==null?void 0:c.value)??"teacher";n.value.has(s.id)||(n.value=new Set([...n.value,s.id]),R.post(route("roles.assign"),{user_id:s.id,role:t},{preserveScroll:!0,onFinish:()=>{const o=new Set(n.value);o.delete(s.id),n.value=o}}))},u=s=>n.value.has(s);return(s,a)=>(r(),l(x,null,[m(k(S),{title:"Roles"}),m(b,null,{header:p(()=>[...a[0]||(a[0]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"},"Roles & Permissions"),e("p",{class:"mt-1 text-sm text-gray-500"},[h(" Assign roles to your staff/teachers. Default role is "),e("span",{class:"font-semibold"},"Teacher"),h(". ")])])],-1)])]),default:p(()=>[e("div",A,[e("div",V,[e("div",j,[e("p",B,"Users ("+d(i.users.length)+")",1)]),e("div",D,[e("div",F,[e("table",I,[a[2]||(a[2]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Role"),e("th",{class:"px-4 py-3 text-right"},"Status")])],-1)),e("tbody",null,[i.users.length?C("",!0):(r(),l("tr",E,[...a[1]||(a[1]=[e("td",{colspan:"5",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No users found"),e("div",{class:"mt-1 text-xs text-gray-500"},"Add teachers/users first, then assign roles here.")])],-1)])])),(r(!0),l(x,null,g(i.users,(t,c)=>(r(),l("tr",{key:t.id,class:N(["border-b border-gray-100 text-xs text-gray-700",c%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",P,[e("div",T,d(t.name),1),e("div",U,"ID: "+d(t.id),1)]),e("td",z,d(t.email||"—"),1),e("td",L,d(t.phone||"—"),1),e("td",O,[e("select",{class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",disabled:u(t.id),value:t.role||"teacher",onChange:o=>_(t,o)},[(r(!0),l(x,null,g(f.value,o=>(r(),l("option",{key:o.key,value:o.key},d(o.name),9,q))),128))],40,$)]),e("td",G,[u(t.id)?(r(),l("span",H," Saving... ")):(r(),l("span",J," Ready "))])],2))),128))])])])])])])]),_:1})],64))}};export{W as default};

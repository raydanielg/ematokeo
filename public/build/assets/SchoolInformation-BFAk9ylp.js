import{j as v,r as f,I as O,A,D as F,a as u,b as c,u as N,h as P,w,d as t,e as S,g as d,v as a,k as _,m as k,o as i,F as j,f as E,t as M,s as C,i as y}from"./app-t52y4N_-.js";import{_ as T}from"./AuthenticatedLayout-B1_rsQkn.js";import{_ as b}from"./Alert-DkSd-ITg.js";import"./ApplicationLogo-Cy5Y1wxQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"space-y-6"},L={class:"grid gap-6 md:grid-cols-2"},D={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},Y={class:"w-full text-left text-xs"},G={class:"border-b border-gray-100"},R={class:"px-2 py-2"},q={class:"border-b border-gray-100"},z={class:"px-2 py-2"},H={class:"border-b border-gray-100"},W={class:"px-2 py-2"},J={class:"border-b border-gray-100"},K={class:"px-2 py-2"},Q={class:"px-2 py-2"},X={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},Z={class:"w-full text-left text-xs"},ee={class:"border-b border-gray-100"},te={class:"px-2 py-2"},oe={class:"border-b border-gray-100"},se={class:"px-2 py-2"},re={class:"border-b border-gray-100"},le={class:"px-2 py-2"},ne={class:"border-b border-gray-100"},de={class:"px-2 py-2"},ae={class:"border-b border-gray-100"},ie={class:"px-2 py-2"},ue={class:"px-2 py-2"},pe={class:"grid grid-cols-2 gap-2"},me={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},ce={key:0,class:"flex flex-wrap gap-1"},xe=["onClick"],ge={key:1,class:"text-[11px] text-gray-400"},fe={class:"space-y-2"},ye={class:"flex items-center justify-between gap-3"},be=["disabled"],he={key:0},ve={key:1},we={class:"max-w-md"},Se={key:0,class:"pointer-events-auto fixed inset-0 z-40 flex items-center justify-center bg-black/60 px-4 backdrop-blur-sm"},_e={class:"flex w-full max-w-md flex-col items-center rounded-2xl bg-white p-6 text-center shadow-2xl ring-1 ring-emerald-100"},ke={class:"mb-4 h-32 w-32"},Oe={__name:"SchoolInformation",props:{school:{type:Object,default:()=>({})},subjects:{type:Array,default:()=>[]}},setup(x){const l=x,s=v({name:l.school.name||"",registration_number:l.school.registration_number||"",school_code:l.school.school_code||"",level:l.school.level||"",ownership:l.school.ownership||"",phone:l.school.phone||"",email:l.school.email||"",address:l.school.address||"",district:l.school.district||"",region:l.school.region||"",head_teacher_name:l.school.head_teacher_name||"",head_teacher_phone:l.school.head_teacher_phone||""}),h=v({}),m=f(!1),p=f(null),g=f(!1),B=O();A(()=>{(B.props.value.flash||{}).registration_success&&(g.value=!0)});const n=r=>{typeof s[r]=="string"&&!["level","ownership"].includes(r)&&(s[r]=s[r].toUpperCase()),h[r]=!0,y.put(route("settings.school-information.update"),{[r]:s[r]},{preserveScroll:!0,onFinish:()=>{h[r]=!1}})},V=()=>{m.value=!0,p.value=null;const r={...s};Object.keys(r).forEach(e=>{typeof r[e]=="string"&&!["level","ownership"].includes(e)&&(r[e]=r[e].toUpperCase())}),y.put(route("settings.school-information.update"),r,{preserveScroll:!0,onSuccess:()=>{p.value="success"},onError:()=>{p.value="error"},onFinish:()=>{m.value=!1}})},$=r=>{confirm("Delete this subject from the school?")&&y.delete(route("subjects.destroy",r),{preserveScroll:!0})};return(r,e)=>{const U=F("lottie-player");return i(),u(j,null,[c(N(P),{title:"School Information"}),c(T,null,{header:w(()=>[...e[25]||(e[25]=[t("div",null,[t("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," School Information "),t("p",{class:"mt-1 text-sm text-gray-500"}," Core details about your school used across E-Matokeo. You typically set this once and only update when something changes. ")],-1)])]),default:w(()=>[t("div",I,[c(b,{variant:"info",title:"Fill in your school details",message:"This is the first step. These details are required so that exam numbers, reports, and other modules work correctly."}),t("div",L,[t("div",D,[e[33]||(e[33]=t("h3",{class:"mb-3 text-xs font-semibold uppercase tracking-wide text-gray-500"}," General Information ",-1)),t("table",Y,[t("tbody",null,[t("tr",G,[e[26]||(e[26]=t("td",{class:"w-1/3 px-2 py-2 font-medium text-gray-600"}," School Name ",-1)),t("td",R,[d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),onBlur:e[1]||(e[1]=o=>n("name")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Mlimani Secondary School"},null,544),[[a,s.name]])])]),t("tr",q,[e[27]||(e[27]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Registration No. ",-1)),t("td",z,[d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.registration_number=o),onBlur:e[3]||(e[3]=o=>n("registration_number")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"NECTA / EMIS number"},null,544),[[a,s.registration_number]])])]),t("tr",H,[e[28]||(e[28]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," School Code ",-1)),t("td",W,[d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.school_code=o),onBlur:e[5]||(e[5]=o=>n("school_code")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Used to build exam numbers"},null,544),[[a,s.school_code]])])]),t("tr",J,[e[30]||(e[30]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Level ",-1)),t("td",K,[d(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.level=o),onChange:e[7]||(e[7]=o=>n("level")),class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...e[29]||(e[29]=[t("option",{value:"",disabled:""},"Select level",-1),t("option",{value:"Primary"},"Primary",-1),t("option",{value:"O-Level"},"O-Level (Secondary)",-1),t("option",{value:"A-Level"},"A-Level (Secondary)",-1)])],544),[[_,s.level]])])]),t("tr",null,[e[32]||(e[32]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Ownership ",-1)),t("td",Q,[d(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.ownership=o),onChange:e[9]||(e[9]=o=>n("ownership")),class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...e[31]||(e[31]=[t("option",{value:"",disabled:""},"Select ownership",-1),t("option",{value:"Government"},"Government",-1),t("option",{value:"Private"},"Private",-1),t("option",{value:"Faith-Based"},"Faith-Based",-1),t("option",{value:"Community"},"Community",-1),t("option",{value:"Other"},"Other",-1)])],544),[[_,s.ownership]])])])])])]),t("div",X,[e[40]||(e[40]=t("h3",{class:"mb-3 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Contact & Location ",-1)),t("table",Z,[t("tbody",null,[t("tr",ee,[e[34]||(e[34]=t("td",{class:"w-1/3 px-2 py-2 font-medium text-gray-600"}," Phone ",-1)),t("td",te,[d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.phone=o),onBlur:e[11]||(e[11]=o=>n("phone")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Main school contact number"},null,544),[[a,s.phone]])])]),t("tr",oe,[e[35]||(e[35]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Email ",-1)),t("td",se,[d(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s.email=o),onBlur:e[13]||(e[13]=o=>n("email")),type:"email",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Official school email"},null,544),[[a,s.email]])])]),t("tr",re,[e[36]||(e[36]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Address ",-1)),t("td",le,[d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>s.address=o),onBlur:e[15]||(e[15]=o=>n("address")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"P.O. Box / Street"},null,544),[[a,s.address]])])]),t("tr",ne,[e[37]||(e[37]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," District ",-1)),t("td",de,[d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.district=o),onBlur:e[17]||(e[17]=o=>n("district")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Ilala"},null,544),[[a,s.district]])])]),t("tr",ae,[e[38]||(e[38]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Region ",-1)),t("td",ie,[d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s.region=o),onBlur:e[19]||(e[19]=o=>n("region")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Dar es Salaam"},null,544),[[a,s.region]])])]),t("tr",null,[e[39]||(e[39]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Head Teacher ",-1)),t("td",ue,[t("div",pe,[d(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.head_teacher_name=o),onBlur:e[21]||(e[21]=o=>n("head_teacher_name")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Full name"},null,544),[[a,s.head_teacher_name]]),d(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>s.head_teacher_phone=o),onBlur:e[23]||(e[23]=o=>n("head_teacher_phone")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Phone number"},null,544),[[a,s.head_teacher_phone]])])])])])])])]),t("div",me,[e[41]||(e[41]=t("h3",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Subjects Offered ",-1)),e[42]||(e[42]=t("p",{class:"mb-2 text-[11px] text-gray-500"},[k(" These are the subjects configured for this school. You can remove a subject by clicking the small "),t("span",{class:"font-semibold"},"×"),k(" icon on the chip. To add more, use the Subjects settings pages. ")],-1)),x.subjects.length?(i(),u("div",ce,[(i(!0),u(j,null,E(x.subjects,o=>(i(),u("span",{key:o.id,class:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-800 ring-1 ring-emerald-100"},[t("span",null,M(o.subject_code),1),t("button",{type:"button",class:"text-[11px] text-emerald-500 hover:text-red-600",onClick:je=>$(o.id)}," × ",8,xe)]))),128))])):(i(),u("div",ge," No subjects configured yet. Start by adding subjects under the Subjects section. "))]),t("div",fe,[t("div",ye,[e[43]||(e[43]=t("p",{class:"text-[11px] text-gray-500"}," Changes are saved inline when you leave a field (on blur). You can also click Save below to store everything at once. ",-1)),t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",disabled:m.value,onClick:V},[m.value?(i(),u("span",he,"Saving...")):(i(),u("span",ve,"Save"))],8,be)]),t("div",we,[p.value==="success"?(i(),C(b,{key:0,variant:"success",title:"Saved successfully",message:"Your school information has been saved."})):p.value==="error"?(i(),C(b,{key:1,variant:"danger",title:"Save failed",message:"Something went wrong while saving. Please check the fields and try again."})):S("",!0)])]),g.value?(i(),u("div",Se,[t("div",_e,[t("div",ke,[c(U,{src:"/success.json",background:"transparent",speed:"1",style:{width:"100%",height:"100%"},autoplay:""})]),e[44]||(e[44]=t("h2",{class:"mb-1 text-lg font-semibold text-gray-900"}," Account created successfully ",-1)),e[45]||(e[45]=t("p",{class:"mb-4 text-xs text-gray-500"}," Welcome to E-Matokeo. Next, please fill in your school details so that exams and reports work correctly. ",-1)),t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",onClick:e[24]||(e[24]=o=>g.value=!1)}," Continue ")])])):S("",!0)])]),_:1})],64)}}};export{Oe as default};

import{n as S,i as c,E as F,B as P,N as A,c as u,a as f,u as M,h as T,w as k,b as t,d as v,k as a,s as L,v as i,o as d,t as C,p as j,f as B,F as V,r as I,e as $,m as h}from"./app-B34UvP43.js";import{_ as D}from"./AuthenticatedLayout-sUb00ENA.js";import{_ as w}from"./Alert-w5VBsZOj.js";import"./ApplicationLogo-C11l3LSy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"space-y-6"},G={class:"grid gap-6 md:grid-cols-2"},R={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},z={class:"w-full text-left text-xs"},q={class:"border-b border-gray-100"},H={class:"px-2 py-2"},W={key:0,class:"mt-1 text-[10px] text-red-600"},J={class:"border-b border-gray-100"},K={class:"px-2 py-2"},Q={class:"border-b border-gray-100"},X={class:"px-2 py-2"},Z={class:"border-b border-gray-100"},ee={class:"px-2 py-2"},te={class:"px-2 py-2"},oe={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},se={class:"w-full text-left text-xs"},re={class:"border-b border-gray-100"},le={class:"px-2 py-2"},ne={class:"border-b border-gray-100"},ae={class:"px-2 py-2"},de={class:"border-b border-gray-100"},ie={class:"px-2 py-2"},ue={class:"border-b border-gray-100"},pe={class:"px-2 py-2"},me={class:"border-b border-gray-100"},ce={class:"px-2 py-2"},xe={class:"px-2 py-2"},ge={class:"grid grid-cols-2 gap-2"},fe={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-gray-100"},ye={key:0,class:"flex flex-wrap gap-1"},be=["onClick"],ve={key:1,class:"text-[11px] text-gray-400"},he={class:"space-y-2"},we={class:"flex items-center justify-between gap-3"},_e=["disabled"],Se={key:0},ke={key:1},Ce={class:"max-w-md"},je={key:0,class:"pointer-events-auto fixed inset-0 z-40 flex items-center justify-center bg-black/60 px-4 backdrop-blur-sm"},Be={class:"flex w-full max-w-md flex-col items-center rounded-2xl bg-white p-6 text-center shadow-2xl ring-1 ring-emerald-100"},Ve={class:"mb-4 h-32 w-32"},Pe={__name:"SchoolInformation",props:{school:{type:Object,default:()=>({})},subjects:{type:Array,default:()=>[]}},setup(y){const l=y,s=S({name:l.school.name||"",registration_number:l.school.registration_number||"",school_code:l.school.school_code||"",level:l.school.level||"",ownership:l.school.ownership||"",phone:l.school.phone||"",email:l.school.email||"",address:l.school.address||"",district:l.school.district||"",region:l.school.region||"",head_teacher_name:l.school.head_teacher_name||"",head_teacher_phone:l.school.head_teacher_phone||""}),_=S({}),x=c(!1),m=c(null),g=c(null),b=c(!1),p=c({}),U=F();P(()=>{(U.props.value.flash||{}).registration_success&&(b.value=!0)});const n=r=>{typeof s[r]=="string"&&!["level","ownership"].includes(r)&&(s[r]=s[r].toUpperCase()),_[r]=!0,p.value={},h.put(route("settings.school-information.update"),{[r]:s[r]},{preserveScroll:!0,onError:e=>{p.value=e},onFinish:()=>{_[r]=!1}})},E=()=>{x.value=!0,m.value=null,g.value=null,p.value={};const r={...s};Object.keys(r).forEach(e=>{typeof r[e]=="string"&&!["level","ownership"].includes(e)&&(r[e]=r[e].toUpperCase())}),h.put(route("settings.school-information.update"),r,{preserveScroll:!0,onSuccess:()=>{m.value="success",g.value=null},onError:e=>{m.value="error",p.value=e,e.name&&(g.value=e.name[0])},onFinish:()=>{x.value=!1}})},N=r=>{confirm("Delete this subject from the school?")&&h.delete(route("subjects.destroy",r),{preserveScroll:!0})};return(r,e)=>{const O=A("lottie-player");return d(),u(V,null,[f(M(T),{title:"School Information"}),f(D,null,{header:k(()=>[...e[25]||(e[25]=[t("div",null,[t("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," School Information "),t("p",{class:"mt-1 text-sm text-gray-500"}," Core details about your school used across E-Matokeo. You typically set this once and only update when something changes. ")],-1)])]),default:k(()=>[t("div",Y,[f(w,{variant:"info",title:"Fill in your school details",message:"This is the first step. These details are required so that exam numbers, reports, and other modules work correctly."}),t("div",G,[t("div",R,[e[33]||(e[33]=t("h3",{class:"mb-3 text-xs font-semibold uppercase tracking-wide text-gray-500"}," General Information ",-1)),t("table",z,[t("tbody",null,[t("tr",q,[e[26]||(e[26]=t("td",{class:"w-1/3 px-2 py-2 font-medium text-gray-600"}," School Name ",-1)),t("td",H,[t("div",null,[a(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),onBlur:e[1]||(e[1]=o=>n("name")),type:"text",class:L(["w-full rounded-md border px-2 py-1.5 text-xs focus:outline-none focus:ring-emerald-500",p.value.name?"border-red-400 focus:border-red-500":"border-gray-200 focus:border-emerald-500"]),placeholder:"e.g. Mlimani Secondary School"},null,34),[[i,s.name]]),p.value.name?(d(),u("p",W,C(p.value.name[0]),1)):v("",!0)])])]),t("tr",J,[e[27]||(e[27]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Registration No. ",-1)),t("td",K,[a(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.registration_number=o),onBlur:e[3]||(e[3]=o=>n("registration_number")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"NECTA / EMIS number"},null,544),[[i,s.registration_number]])])]),t("tr",Q,[e[28]||(e[28]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," School Code ",-1)),t("td",X,[a(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.school_code=o),onBlur:e[5]||(e[5]=o=>n("school_code")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Used to build exam numbers"},null,544),[[i,s.school_code]])])]),t("tr",Z,[e[30]||(e[30]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Level ",-1)),t("td",ee,[a(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.level=o),onChange:e[7]||(e[7]=o=>n("level")),class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...e[29]||(e[29]=[t("option",{value:"",disabled:""},"Select level",-1),t("option",{value:"Primary"},"Primary",-1),t("option",{value:"O-Level"},"O-Level (Secondary)",-1),t("option",{value:"A-Level"},"A-Level (Secondary)",-1)])],544),[[j,s.level]])])]),t("tr",null,[e[32]||(e[32]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Ownership ",-1)),t("td",te,[a(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.ownership=o),onChange:e[9]||(e[9]=o=>n("ownership")),class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...e[31]||(e[31]=[t("option",{value:"",disabled:""},"Select ownership",-1),t("option",{value:"Government"},"Government",-1),t("option",{value:"Private"},"Private",-1),t("option",{value:"Faith-Based"},"Faith-Based",-1),t("option",{value:"Community"},"Community",-1),t("option",{value:"Other"},"Other",-1)])],544),[[j,s.ownership]])])])])])]),t("div",oe,[e[40]||(e[40]=t("h3",{class:"mb-3 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Contact & Location ",-1)),t("table",se,[t("tbody",null,[t("tr",re,[e[34]||(e[34]=t("td",{class:"w-1/3 px-2 py-2 font-medium text-gray-600"}," Phone ",-1)),t("td",le,[a(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.phone=o),onBlur:e[11]||(e[11]=o=>n("phone")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Main school contact number"},null,544),[[i,s.phone]])])]),t("tr",ne,[e[35]||(e[35]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Email ",-1)),t("td",ae,[a(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s.email=o),onBlur:e[13]||(e[13]=o=>n("email")),type:"email",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Official school email"},null,544),[[i,s.email]])])]),t("tr",de,[e[36]||(e[36]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Address ",-1)),t("td",ie,[a(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>s.address=o),onBlur:e[15]||(e[15]=o=>n("address")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"P.O. Box / Street"},null,544),[[i,s.address]])])]),t("tr",ue,[e[37]||(e[37]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," District ",-1)),t("td",pe,[a(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.district=o),onBlur:e[17]||(e[17]=o=>n("district")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Ilala"},null,544),[[i,s.district]])])]),t("tr",me,[e[38]||(e[38]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Region ",-1)),t("td",ce,[a(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s.region=o),onBlur:e[19]||(e[19]=o=>n("region")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. Dar es Salaam"},null,544),[[i,s.region]])])]),t("tr",null,[e[39]||(e[39]=t("td",{class:"px-2 py-2 font-medium text-gray-600"}," Head Teacher ",-1)),t("td",xe,[t("div",ge,[a(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.head_teacher_name=o),onBlur:e[21]||(e[21]=o=>n("head_teacher_name")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Full name"},null,544),[[i,s.head_teacher_name]]),a(t("input",{"onUpdate:modelValue":e[22]||(e[22]=o=>s.head_teacher_phone=o),onBlur:e[23]||(e[23]=o=>n("head_teacher_phone")),type:"text",class:"w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Phone number"},null,544),[[i,s.head_teacher_phone]])])])])])])])]),t("div",fe,[e[41]||(e[41]=t("h3",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500"}," Subjects Offered ",-1)),e[42]||(e[42]=t("p",{class:"mb-2 text-[11px] text-gray-500"},[B(" These are the subjects configured for this school. You can remove a subject by clicking the small "),t("span",{class:"font-semibold"},"×"),B(" icon on the chip. To add more, use the Subjects settings pages. ")],-1)),y.subjects.length?(d(),u("div",ye,[(d(!0),u(V,null,I(y.subjects,o=>(d(),u("span",{key:o.id,class:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-800 ring-1 ring-emerald-100"},[t("span",null,C(o.subject_code),1),t("button",{type:"button",class:"text-[11px] text-emerald-500 hover:text-red-600",onClick:$e=>N(o.id)}," × ",8,be)]))),128))])):(d(),u("div",ve," No subjects configured yet. Start by adding subjects under the Subjects section. "))]),t("div",he,[t("div",we,[e[43]||(e[43]=t("p",{class:"text-[11px] text-gray-500"}," Changes are saved inline when you leave a field (on blur). You can also click Save below to store everything at once. ",-1)),t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",disabled:x.value,onClick:E},[x.value?(d(),u("span",Se,"Saving...")):(d(),u("span",ke,"Save"))],8,_e)]),t("div",Ce,[m.value==="success"?(d(),$(w,{key:0,variant:"success",title:"Saved successfully",message:"Your school information has been saved."})):m.value==="error"?(d(),$(w,{key:1,variant:"danger",title:"Save failed",message:g.value||"Something went wrong while saving. Please check the fields and try again."},null,8,["message"])):v("",!0)])]),b.value?(d(),u("div",je,[t("div",Be,[t("div",Ve,[f(O,{src:"/success.json",background:"transparent",speed:"1",style:{width:"100%",height:"100%"},autoplay:""})]),e[44]||(e[44]=t("h2",{class:"mb-1 text-lg font-semibold text-gray-900"}," Account created successfully ",-1)),e[45]||(e[45]=t("p",{class:"mb-4 text-xs text-gray-500"}," Welcome to E-Matokeo. Next, please fill in your school details so that exams and reports work correctly. ",-1)),t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",onClick:e[24]||(e[24]=o=>b.value=!1)}," Continue ")])])):v("",!0)])]),_:1})],64)}}};export{Pe as default};

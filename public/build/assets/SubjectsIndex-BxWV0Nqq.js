import{i as c,n as D,I as O,c as a,a as C,u as V,h as F,w as k,b as e,d as h,t as d,o as l,F as x,r as _,x as K,k as p,p as U,s as L,v as A,q as G,f as w,m as y}from"./app-BJUliZOe.js";import{_ as H}from"./AuthenticatedLayout-OKprl57E.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},R={class:"mb-3 flex items-center justify-between gap-3"},z={class:"text-sm font-medium text-gray-700"},q={class:"overflow-x-auto"},W={class:"min-w-full text-left text-sm"},$={key:0},Y={class:"px-3 py-2 align-top font-mono text-xs text-gray-900"},J={class:"px-3 py-2 align-top"},Q={class:"px-3 py-2 align-top"},X={class:"px-3 py-2 align-top"},Z={class:"flex justify-end gap-2"},ee=["onClick"],te={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4"},se={class:"w-full max-w-lg rounded-xl bg-white p-5 shadow-xl ring-1 ring-gray-200"},oe=["value"],ae={class:"rounded-md border border-gray-200 bg-white p-2"},le={class:"grid grid-cols-2 gap-2"},ne=["checked","onChange"],de={class:"font-medium text-gray-800"},re={class:"grid grid-cols-2 gap-3"},ie={class:"flex items-center gap-2"},ue={class:"mt-4 flex justify-end gap-2"},ce=["disabled"],me=["disabled"],be={key:0},ge={key:1},xe={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},pe={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ye={class:"mb-2 flex items-start justify-between gap-3"},fe={class:"mt-1 text-[11px] text-gray-600"},ve={class:"font-semibold"},he={class:"font-semibold"},_e=["disabled"],we={class:"mt-4 flex justify-end gap-2"},je=["disabled"],Se=["disabled"],Ee={__name:"SubjectsIndex",props:{subjects:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]}},setup(m){const b=c(!1),r=c(!1),f=c(!1),n=c(!1),u=c(null),o=D({class_ids:[],subject_code:"",name:"",assign_to_current_user:!1}),j=[{code:"KIS",name:"Kiswahili"},{code:"ENG",name:"English Language"},{code:"B/MAT",name:"Basic Mathematics"},{code:"CIV",name:"Civics"},{code:"HIS",name:"History"},{code:"GEO",name:"Geography"},{code:"BIO",name:"Biology"},{code:"CHE",name:"Chemistry"},{code:"PHY",name:"Physics"},{code:"GK",name:"General Knowledge"},{code:"AGRI",name:"Agriculture"},{code:"COMM",name:"Commerce"},{code:"BOOK",name:"Book Keeping"},{code:"ECON",name:"Economics"},{code:"ACC",name:"Accountancy"},{code:"ENT",name:"Entrepreneurship"},{code:"COMP",name:"Computer Studies"},{code:"ICT",name:"Information and Computer Studies"},{code:"LIT",name:"Literature in English"},{code:"K/F",name:"Kiswahili for Foreigners"},{code:"ARAB",name:"Arabic"},{code:"FREN",name:"French"},{code:"GER",name:"German"},{code:"CHI",name:"Chinese"},{code:"ISL",name:"Islamic Knowledge"},{code:"BIB",name:"Bible Knowledge"},{code:"ECO",name:"Ecology"},{code:"HSC",name:"Home Science"},{code:"F/N",name:"Food and Nutrition"},{code:"TD",name:"Technical Drawing"},{code:"WD",name:"Woodwork"},{code:"MW",name:"Metalwork"},{code:"BC",name:"Building Construction"},{code:"ELC",name:"Electrical Installation"},{code:"AUT",name:"Automotive Mechanics"},{code:"PLU",name:"Plumbing"},{code:"TAIL",name:"Tailoring"},{code:"ART",name:"Fine Art"},{code:"MUS",name:"Music"},{code:"PE",name:"Physical Education"},{code:"SPO",name:"Sports"},{code:"THE",name:"Theatre Arts"},{code:"BUS",name:"Business Studies"}],g=c(""),E=()=>{o.class_ids=[],o.subject_code="",o.name="",o.assign_to_current_user=!1,g.value="",b.value=!0},S=()=>{r.value||(b.value=!1)},M=()=>{r.value||(r.value=!0,y.post(route("subjects.store"),o,{preserveScroll:!0,onSuccess:()=>{r.value=!1,b.value=!1,y.reload({only:["subjects"]})},onError:()=>{r.value=!1}}))},I=i=>{u.value=i,f.value=!0},v=()=>{n.value||(f.value=!1,u.value=null)},B=()=>{!u.value||n.value||(n.value=!0,y.delete(route("subjects.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>{n.value=!1,v(),y.reload({only:["subjects"]})},onError:()=>{n.value=!1},onFinish:()=>{n.value=!1}}))},T=i=>{const t=o.class_ids.indexOf(i);t===-1?o.class_ids.push(i):o.class_ids.splice(t,1)};return O(()=>g.value,i=>{if(!i)return;const t=j.find(s=>s.code===i);t&&(o.subject_code=t.code,o.name=t.name)}),(i,t)=>(l(),a(x,null,[C(V(F),{title:"Subjects"}),C(H,null,{header:k(()=>[e("div",{class:"flex items-center justify-between"},[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Subjects "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all subjects with codes and the classes they are assigned to. ")],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",onClick:E}," Add Subject ")])])]),default:k(()=>[e("div",P,[e("div",R,[e("p",z," Subjects ("+d(m.subjects.length)+") ",1)]),e("div",q,[e("table",W,[t[8]||(t[8]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Code"),e("th",{class:"px-3 py-2"},"Subject Name"),e("th",{class:"px-3 py-2"},"Classes Assigned"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[m.subjects.length===0?(l(),a("tr",$,[...t[5]||(t[5]=[e("td",{colspan:"4",class:"px-3 py-4 text-center text-xs text-gray-500"}," No subjects found yet. ",-1)])])):h("",!0),(l(!0),a(x,null,_(m.subjects,s=>(l(),a("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",Y,d(s.subject_code),1),e("td",J,d(s.name),1),e("td",Q,d(s.class_levels||"—"),1),e("td",X,[e("div",Z,[t[6]||(t[6]=e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[11px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100"}," View ",-1)),t[7]||(t[7]=e("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100"}," Edit ",-1)),e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",onClick:N=>I(s)}," Delete ",8,ee)])])]))),128))])])])]),b.value?(l(),a("div",te,[e("div",se,[e("div",{class:"mb-3 flex items-start justify-between gap-3"},[t[9]||(t[9]=e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Add Subject"),e("p",{class:"mt-1 text-xs text-gray-500"}," Select a class for this school, then add the subject you want to import for that class and for this user. ")],-1)),e("button",{type:"button",class:"text-xs text-gray-400 hover:text-gray-600",onClick:S}," ✕ ")]),e("form",{class:"space-y-3 text-xs text-gray-700",onSubmit:K(M,["prevent"])},[e("div",null,[t[11]||(t[11]=e("label",{class:"mb-1 block font-medium"},"Suggested subjects",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),class:"w-full rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[10]||(t[10]=e("option",{value:""},"-- Select from suggested list (or type manually below) --",-1)),(l(),a(x,null,_(j,s=>e("option",{key:s.code,value:s.code},d(s.code)+" - "+d(s.name),9,oe)),64))],512),[[U,g.value]]),t[12]||(t[12]=e("p",{class:"mt-2 text-[11px] text-gray-500"}," Ukichagua kwenye list, itajaza Subject Name na Code automatically. Ukikosa somo, andika manually. ",-1))]),e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1 block font-medium"},"Select class(es) for this Subject",-1)),e("div",ae,[e("div",le,[(l(!0),a(x,null,_(m.classes,s=>(l(),a("label",{key:s.id,class:L(["flex cursor-pointer items-center gap-2 rounded-md border px-2 py-2 text-[11px]",o.class_ids.includes(s.id)?"border-emerald-300 bg-emerald-50":"border-gray-200 bg-white hover:bg-gray-50"])},[e("input",{type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:o.class_ids.includes(s.id),onChange:N=>T(s.id)},null,40,ne),e("span",de,d(s.name),1)],2))),128))]),t[13]||(t[13]=e("p",{class:"mt-2 text-[11px] text-gray-500"}," You can select multiple classes. ",-1))])]),e("div",re,[e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block font-medium"},"Subject Name",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIVICS",required:""},null,512),[[A,o.name]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block font-medium"},"Subject Code",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.subject_code=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIV",required:""},null,512),[[A,o.subject_code]])])]),e("div",ie,[p(e("input",{id:"assign_to_me","onUpdate:modelValue":t[3]||(t[3]=s=>o.assign_to_current_user=s),type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,512),[[G,o.assign_to_current_user]]),t[17]||(t[17]=e("label",{for:"assign_to_me",class:"text-[11px] text-gray-600"}," Also assign this subject to me as a teacher. ",-1))]),e("div",ue,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:S,disabled:r.value}," Cancel ",8,ce),e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-70",disabled:r.value},[r.value?(l(),a("span",ge,"Saving...")):(l(),a("span",be,"Save Subject"))],8,me)])],32)])])):h("",!0),f.value&&u.value?(l(),a("div",xe,[e("div",pe,[e("div",ye,[e("div",null,[t[21]||(t[21]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Delete subject?",-1)),e("p",fe,[t[18]||(t[18]=w(" This will remove ",-1)),e("span",ve,d(u.value.subject_code),1),t[19]||(t[19]=w(" — ",-1)),e("span",he,d(u.value.name),1),t[20]||(t[20]=w(". ",-1))])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:n.value,onClick:v}," × ",8,_e)]),e("div",we,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:n.value,onClick:v}," Cancel ",8,je),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700 disabled:opacity-60",disabled:n.value,onClick:B},d(n.value?"Deleting...":"Delete"),9,Se)])])])):h("",!0)]),_:1})],64))}};export{Ee as default};

import{r as p,j as C,z as A,a as l,b as v,u as M,h as V,w as h,d as e,e as j,t as n,o as a,F as m,f as x,p as E,g as r,k as _,v as g,l as B,i as w}from"./app-t52y4N_-.js";import{_ as I}from"./AuthenticatedLayout-B1_rsQkn.js";import"./ApplicationLogo-Cy5Y1wxQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},G={class:"mb-3 flex items-center justify-between gap-3"},O={class:"text-sm font-medium text-gray-700"},U={class:"overflow-x-auto"},F={class:"min-w-full text-left text-sm"},K={key:0},T={class:"px-3 py-2 align-top font-mono text-xs text-gray-900"},D={class:"px-3 py-2 align-top"},H={class:"px-3 py-2 align-top"},R={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4"},q={class:"w-full max-w-lg rounded-xl bg-white p-5 shadow-xl ring-1 ring-gray-200"},L=["value"],P=["value"],z={class:"grid grid-cols-2 gap-3"},Y={class:"flex items-center gap-2"},$={class:"mt-4 flex justify-end gap-2"},J=["disabled"],Q=["disabled"],W={key:0},X={key:1},oe={__name:"SubjectsIndex",props:{subjects:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]}},setup(i){const u=p(!1),d=p(!1),o=C({class_id:"",subject_code:"",name:"",class_levels:"",description:"",assign_to_current_user:!1}),f=[{code:"CIV",name:"Civics"},{code:"HIS",name:"History"},{code:"GEO",name:"Geography"},{code:"KIS",name:"Kiswahili"},{code:"ENG",name:"English Language"},{code:"PHY",name:"Physics"},{code:"CHE",name:"Chemistry"},{code:"BIO",name:"Biology"},{code:"B/MAT",name:"Basic Mathematics"},{code:"BOOK",name:"Book Keeping"},{code:"COMM",name:"Commerce"},{code:"ECON",name:"Economics"},{code:"GK",name:"General Knowledge"},{code:"COMP",name:"Computer Studies"},{code:"AGRI",name:"Agriculture"},{code:"FREN",name:"French"},{code:"GER",name:"German"},{code:"ARAB",name:"Arabic"},{code:"FINE",name:"Fine Art"},{code:"MUS",name:"Music"}],c=p(""),S=()=>{o.class_id="",o.subject_code="",o.name="",o.class_levels="",o.description="",o.assign_to_current_user=!1,c.value="",u.value=!0},y=()=>{d.value||(u.value=!1)},k=()=>{d.value||(d.value=!0,w.post(route("subjects.store"),o,{preserveScroll:!0,onSuccess:()=>{d.value=!1,u.value=!1,w.reload({only:["subjects"]})},onError:()=>{d.value=!1}}))};return A(()=>c.value,b=>{if(!b)return;const t=f.find(s=>s.code===b);t&&(o.subject_code=t.code,o.name=t.name)}),(b,t)=>(a(),l(m,null,[v(M(V),{title:"Subjects"}),v(I,null,{header:h(()=>[e("div",{class:"flex items-center justify-between"},[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Subjects "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all subjects with codes and the classes they are assigned to. ")],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",onClick:S}," Add Subject ")])])]),default:h(()=>[e("div",N,[e("div",G,[e("p",O," Subjects ("+n(i.subjects.length)+") ",1)]),e("div",U,[e("table",F,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Code"),e("th",{class:"px-3 py-2"},"Subject Name"),e("th",{class:"px-3 py-2"},"Classes Assigned"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[i.subjects.length===0?(a(),l("tr",K,[...t[7]||(t[7]=[e("td",{colspan:"4",class:"px-3 py-4 text-center text-xs text-gray-500"}," No subjects found yet. ",-1)])])):j("",!0),(a(!0),l(m,null,x(i.subjects,s=>(a(),l("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",T,n(s.subject_code),1),e("td",D,n(s.name),1),e("td",H,n(s.class_levels||"—"),1),t[8]||(t[8]=e("td",{class:"px-3 py-2 align-top"},[e("div",{class:"flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[11px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100"}," View "),e("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100"}," Edit "),e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100"}," Delete ")])],-1))]))),128))])])])]),u.value?(a(),l("div",R,[e("div",q,[e("div",{class:"mb-3 flex items-start justify-between gap-3"},[t[10]||(t[10]=e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Add Subject"),e("p",{class:"mt-1 text-xs text-gray-500"}," Select a class for this school, then add the subject you want to import for that class and for this user. ")],-1)),e("button",{type:"button",class:"text-xs text-gray-400 hover:text-gray-600",onClick:y}," ✕ ")]),e("form",{class:"space-y-3 text-xs text-gray-700",onSubmit:E(k,["prevent"])},[e("div",null,[t[12]||(t[12]=e("label",{class:"mb-1 block font-medium"},"Choose from suggested subjects",-1)),r(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[11]||(t[11]=e("option",{value:""},"-- Type manually or pick from this list --",-1)),(a(),l(m,null,x(f,s=>e("option",{key:s.code,value:s.code},n(s.code)+" - "+n(s.name),9,L)),64))],512),[[_,c.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1 block font-medium"},"Select Class for this Subject",-1)),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.class_id=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},[t[13]||(t[13]=e("option",{value:"",disabled:""},"Select class...",-1)),(a(!0),l(m,null,x(i.classes,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,P))),128))],512),[[_,o.class_id]])]),e("div",z,[e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block font-medium"},"Subject Name",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIVICS",required:""},null,512),[[g,o.name]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"mb-1 block font-medium"},"Subject Code",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.subject_code=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIV",required:""},null,512),[[g,o.subject_code]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"mb-1 block font-medium"},"Description (optional)",-1)),r(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.description=s),rows:"3",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Any extra details about this subject"},null,512),[[g,o.description]])]),e("div",Y,[r(e("input",{id:"assign_to_me","onUpdate:modelValue":t[5]||(t[5]=s=>o.assign_to_current_user=s),type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,512),[[B,o.assign_to_current_user]]),t[18]||(t[18]=e("label",{for:"assign_to_me",class:"text-[11px] text-gray-600"}," Also assign this subject to me as a teacher. ",-1))]),e("div",$,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:y,disabled:d.value}," Cancel ",8,J),e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-70",disabled:d.value},[d.value?(a(),l("span",X,"Saving...")):(a(),l("span",W,"Save Subject"))],8,Q)])],32)])])):j("",!0)]),_:1})],64))}};export{oe as default};

import{i as b,n as k,I as A,c as a,a as f,u as E,h as I,w as h,b as e,d as v,t as d,o as n,F as m,r as x,x as B,k as g,p as M,s as T,v as _,q as N,m as w}from"./app-ckjzilG7.js";import{_ as O}from"./AuthenticatedLayout-CsruZptQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},K={class:"mb-3 flex items-center justify-between gap-3"},U={class:"text-sm font-medium text-gray-700"},F={class:"overflow-x-auto"},L={class:"min-w-full text-left text-sm"},G={key:0},H={class:"px-3 py-2 align-top font-mono text-xs text-gray-900"},P={class:"px-3 py-2 align-top"},D={class:"px-3 py-2 align-top"},R={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4"},q={class:"w-full max-w-lg rounded-xl bg-white p-5 shadow-xl ring-1 ring-gray-200"},z=["value"],W={class:"rounded-md border border-gray-200 bg-white p-2"},Y={class:"grid grid-cols-2 gap-2"},$=["checked","onChange"],J={class:"font-medium text-gray-800"},Q={class:"grid grid-cols-2 gap-3"},X={class:"flex items-center gap-2"},Z={class:"mt-4 flex justify-end gap-2"},ee=["disabled"],te=["disabled"],se={key:0},oe={key:1},re={__name:"SubjectsIndex",props:{subjects:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]}},setup(i){const c=b(!1),l=b(!1),o=k({class_ids:[],subject_code:"",name:"",assign_to_current_user:!1}),p=[{code:"KIS",name:"Kiswahili"},{code:"ENG",name:"English Language"},{code:"B/MAT",name:"Basic Mathematics"},{code:"CIV",name:"Civics"},{code:"HIS",name:"History"},{code:"GEO",name:"Geography"},{code:"BIO",name:"Biology"},{code:"CHE",name:"Chemistry"},{code:"PHY",name:"Physics"},{code:"GK",name:"General Knowledge"},{code:"AGRI",name:"Agriculture"},{code:"COMM",name:"Commerce"},{code:"BOOK",name:"Book Keeping"},{code:"ECON",name:"Economics"},{code:"ACC",name:"Accountancy"},{code:"ENT",name:"Entrepreneurship"},{code:"COMP",name:"Computer Studies"},{code:"ICT",name:"Information and Computer Studies"},{code:"LIT",name:"Literature in English"},{code:"K/F",name:"Kiswahili for Foreigners"},{code:"ARAB",name:"Arabic"},{code:"FREN",name:"French"},{code:"GER",name:"German"},{code:"CHI",name:"Chinese"},{code:"ISL",name:"Islamic Knowledge"},{code:"BIB",name:"Bible Knowledge"},{code:"ECO",name:"Ecology"},{code:"HSC",name:"Home Science"},{code:"F/N",name:"Food and Nutrition"},{code:"TD",name:"Technical Drawing"},{code:"WD",name:"Woodwork"},{code:"MW",name:"Metalwork"},{code:"BC",name:"Building Construction"},{code:"ELC",name:"Electrical Installation"},{code:"AUT",name:"Automotive Mechanics"},{code:"PLU",name:"Plumbing"},{code:"TAIL",name:"Tailoring"},{code:"ART",name:"Fine Art"},{code:"MUS",name:"Music"},{code:"PE",name:"Physical Education"},{code:"SPO",name:"Sports"},{code:"THE",name:"Theatre Arts"},{code:"BUS",name:"Business Studies"}],u=b(""),S=()=>{o.class_ids=[],o.subject_code="",o.name="",o.assign_to_current_user=!1,u.value="",c.value=!0},y=()=>{l.value||(c.value=!1)},C=()=>{l.value||(l.value=!0,w.post(route("subjects.store"),o,{preserveScroll:!0,onSuccess:()=>{l.value=!1,c.value=!1,w.reload({only:["subjects"]})},onError:()=>{l.value=!1}}))},j=r=>{const t=o.class_ids.indexOf(r);t===-1?o.class_ids.push(r):o.class_ids.splice(t,1)};return A(()=>u.value,r=>{if(!r)return;const t=p.find(s=>s.code===r);t&&(o.subject_code=t.code,o.name=t.name)}),(r,t)=>(n(),a(m,null,[f(E(I),{title:"Subjects"}),f(O,null,{header:h(()=>[e("div",{class:"flex items-center justify-between"},[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Subjects "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all subjects with codes and the classes they are assigned to. ")],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",onClick:S}," Add Subject ")])])]),default:h(()=>[e("div",V,[e("div",K,[e("p",U," Subjects ("+d(i.subjects.length)+") ",1)]),e("div",F,[e("table",L,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Code"),e("th",{class:"px-3 py-2"},"Subject Name"),e("th",{class:"px-3 py-2"},"Classes Assigned"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[i.subjects.length===0?(n(),a("tr",G,[...t[5]||(t[5]=[e("td",{colspan:"4",class:"px-3 py-4 text-center text-xs text-gray-500"}," No subjects found yet. ",-1)])])):v("",!0),(n(!0),a(m,null,x(i.subjects,s=>(n(),a("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",H,d(s.subject_code),1),e("td",P,d(s.name),1),e("td",D,d(s.class_levels||"—"),1),t[6]||(t[6]=e("td",{class:"px-3 py-2 align-top"},[e("div",{class:"flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[11px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100"}," View "),e("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100"}," Edit "),e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100"}," Delete ")])],-1))]))),128))])])])]),c.value?(n(),a("div",R,[e("div",q,[e("div",{class:"mb-3 flex items-start justify-between gap-3"},[t[8]||(t[8]=e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Add Subject"),e("p",{class:"mt-1 text-xs text-gray-500"}," Select a class for this school, then add the subject you want to import for that class and for this user. ")],-1)),e("button",{type:"button",class:"text-xs text-gray-400 hover:text-gray-600",onClick:y}," ✕ ")]),e("form",{class:"space-y-3 text-xs text-gray-700",onSubmit:B(C,["prevent"])},[e("div",null,[t[10]||(t[10]=e("label",{class:"mb-1 block font-medium"},"Suggested subjects",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),class:"w-full rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[9]||(t[9]=e("option",{value:""},"-- Select from suggested list (or type manually below) --",-1)),(n(),a(m,null,x(p,s=>e("option",{key:s.code,value:s.code},d(s.code)+" - "+d(s.name),9,z)),64))],512),[[M,u.value]]),t[11]||(t[11]=e("p",{class:"mt-2 text-[11px] text-gray-500"}," Ukichagua kwenye list, itajaza Subject Name na Code automatically. Ukikosa somo, andika manually. ",-1))]),e("div",null,[t[13]||(t[13]=e("label",{class:"mb-1 block font-medium"},"Select class(es) for this Subject",-1)),e("div",W,[e("div",Y,[(n(!0),a(m,null,x(i.classes,s=>(n(),a("label",{key:s.id,class:T(["flex cursor-pointer items-center gap-2 rounded-md border px-2 py-2 text-[11px]",o.class_ids.includes(s.id)?"border-emerald-300 bg-emerald-50":"border-gray-200 bg-white hover:bg-gray-50"])},[e("input",{type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:o.class_ids.includes(s.id),onChange:ae=>j(s.id)},null,40,$),e("span",J,d(s.name),1)],2))),128))]),t[12]||(t[12]=e("p",{class:"mt-2 text-[11px] text-gray-500"}," You can select multiple classes. ",-1))])]),e("div",Q,[e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1 block font-medium"},"Subject Name",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIVICS",required:""},null,512),[[_,o.name]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1 block font-medium"},"Subject Code",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.subject_code=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-xs focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. CIV",required:""},null,512),[[_,o.subject_code]])])]),e("div",X,[g(e("input",{id:"assign_to_me","onUpdate:modelValue":t[3]||(t[3]=s=>o.assign_to_current_user=s),type:"checkbox",class:"h-3 w-3 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,512),[[N,o.assign_to_current_user]]),t[16]||(t[16]=e("label",{for:"assign_to_me",class:"text-[11px] text-gray-600"}," Also assign this subject to me as a teacher. ",-1))]),e("div",Z,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:y,disabled:l.value}," Cancel ",8,ee),e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-70",disabled:l.value},[l.value?(n(),a("span",oe,"Saving...")):(n(),a("span",se,"Save Subject"))],8,te)])],32)])])):v("",!0)]),_:1})],64))}};export{re as default};

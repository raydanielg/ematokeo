import{i as N,j as O,c as n,a as y,u as T,h as A,w as v,b as t,t as d,o,F as p,r as b,d as m,k as U,v as B}from"./app-6DsKj5k9.js";import{_ as D}from"./AuthenticatedLayout-ZgPNbOsd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"flex flex-wrap items-center justify-between gap-3"},V={class:"flex items-center gap-2"},$={class:"py-6"},E={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},J={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},M={class:"mb-3 flex flex-wrap items-center justify-between gap-3"},z={class:"text-sm font-medium text-gray-700"},F={key:0,class:"py-10 text-center"},I={key:1,class:"space-y-4"},q={class:"flex flex-wrap items-start justify-between gap-3"},H={class:"text-sm font-semibold text-gray-900"},G={class:"mt-0.5 text-[11px] text-gray-500"},K={key:0},P={key:1},Q={key:2},W={key:3},X={key:4},Y={class:"rounded-md bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-800 ring-1 ring-emerald-100"},Z={class:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2"},ee={class:"flex items-start justify-between gap-2"},te={class:"text-xs font-semibold text-gray-900"},se={class:"mt-0.5 text-[11px] text-gray-500"},ae={class:"text-[10px] font-semibold text-gray-500"},ne={class:"mt-2 flex flex-wrap gap-1"},oe=["title"],re={key:0,class:"text-[11px] text-gray-500"},de={__name:"TeacherAssignments",props:{teachers:{type:Array,default:()=>[]}},setup(w){const f=w,x=N(""),g=O(()=>{const a=String(x.value||"").toLowerCase().trim();return a?(f.teachers||[]).filter(e=>{const s=String((e==null?void 0:e.name)||"").toLowerCase(),r=String((e==null?void 0:e.email)||"").toLowerCase(),i=String((e==null?void 0:e.phone)||"").toLowerCase(),h=String((e==null?void 0:e.check_number)||"").toLowerCase(),u=((e==null?void 0:e.subjects)||[]).some(c=>{const l=String((c==null?void 0:c.subject_code)||"").toLowerCase(),_=String((c==null?void 0:c.subject_name)||"").toLowerCase();return l.includes(a)||_.includes(a)}),S=((e==null?void 0:e.subjects)||[]).some(c=>((c==null?void 0:c.classes)||[]).some(l=>{const _=String((l==null?void 0:l.label)||"").toLowerCase(),L=String((l==null?void 0:l.stream)||"").toLowerCase(),C=String((l==null?void 0:l.level)||"").toLowerCase();return _.includes(a)||L.includes(a)||C.includes(a)}));return s.includes(a)||r.includes(a)||i.includes(a)||h.includes(a)||u||S}):f.teachers||[]}),j=a=>{const e=String((a==null?void 0:a.subject_code)||"").trim(),s=String((a==null?void 0:a.subject_name)||"").trim();return e&&s?`${e} - ${s}`:e||s||"-"},k=()=>{const a={exported_at:new Date().toISOString(),total_teachers:(g.value||[]).length,teachers:g.value||[]},e=JSON.stringify(a,null,2),s=new Blob([e],{type:"application/json;charset=utf-8"}),r=URL.createObjectURL(s),h=`teacher-assignments_${new Date().toISOString().slice(0,10)}.json`,u=document.createElement("a");u.href=r,u.download=h,document.body.appendChild(u),u.click(),u.remove(),URL.revokeObjectURL(r)};return(a,e)=>(o(),n(p,null,[y(T(A),{title:"Teacher Assignments"}),y(D,null,{header:v(()=>[t("div",R,[e[2]||(e[2]=t("div",null,[t("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teacher Assignments "),t("p",{class:"mt-1 text-sm text-gray-500"}," Orodha ya walimu pamoja na masomo wanayofundisha na madarasa/streams walizo-assigniwa. ")],-1)),t("div",V,[e[1]||(e[1]=t("div",{class:"text-xs font-semibold text-gray-700"},"Search:",-1)),U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),type:"text",placeholder:"Search teacher / subject / class / stream",class:"w-72 max-w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-xs shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[B,x.value]]),t("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:k}," Export JSON ")])])]),default:v(()=>[t("div",$,[t("div",E,[t("div",J,[t("div",M,[t("p",z," Teachers ("+d(g.value.length)+") ",1),e[3]||(e[3]=t("p",{class:"text-[11px] text-gray-500"}," Tip: unaweza kutafuta kwa jina, subject code, class au stream. ",-1))]),g.value.length===0?(o(),n("div",F,[...e[4]||(e[4]=[t("div",{class:"text-sm font-semibold text-gray-700"},"No assignments found",-1),t("div",{class:"mt-1 text-xs text-gray-500"}," Hakuna data ya assignments, au search imeficha matokeo. ",-1)])])):(o(),n("div",I,[(o(!0),n(p,null,b(g.value,s=>(o(),n("div",{key:s.id,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},[t("div",q,[t("div",null,[t("div",H,d(s.name),1),t("div",G,[s.check_number?(o(),n("span",K,d(s.check_number),1)):m("",!0),s.check_number&&(s.email||s.phone)?(o(),n("span",P," · ")):m("",!0),s.email?(o(),n("span",Q,d(s.email),1)):m("",!0),s.email&&s.phone?(o(),n("span",W," · ")):m("",!0),s.phone?(o(),n("span",X,d(s.phone),1)):m("",!0)])]),t("div",Y,d((s.subjects||[]).length)+" subjects ",1)]),t("div",Z,[(o(!0),n(p,null,b(s.subjects||[],r=>(o(),n("div",{key:r.id,class:"rounded-lg border border-gray-100 bg-gray-50 p-3"},[t("div",ee,[t("div",null,[t("div",te,d(j(r)),1),t("div",se," Assigned classes/streams ("+d((r.classes||[]).length)+") ",1)]),t("div",ae,d(r.subject_code),1)]),t("div",ne,[(o(!0),n(p,null,b(r.classes||[],i=>(o(),n("span",{key:i.id,class:"inline-flex items-center rounded-full bg-white px-2 py-0.5 text-[10px] font-semibold text-gray-700 ring-1 ring-gray-200",title:(i.level?i.level+" ":"")+(i.stream||"")},d(i.label||(i.level+" "+(i.stream||"")).trim()),9,oe))),128)),(r.classes||[]).length===0?(o(),n("span",re," No classes assigned. ")):m("",!0)])]))),128))])]))),128))]))])])])]),_:1})],64))}};export{de as default};

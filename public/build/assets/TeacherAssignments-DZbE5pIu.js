import{i as O,j as T,c as o,a as y,u as U,h as D,w as v,b as a,t as d,o as r,F as x,r as _,d as g,k as E,v as F}from"./app-B6eS_iC8.js";import{_ as I}from"./AuthenticatedLayout-B5zucoMp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex flex-wrap items-center justify-between gap-3"},R={class:"flex items-center gap-2"},V={class:"py-6"},$={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},J={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},z={class:"mb-3 flex flex-wrap items-center justify-between gap-3"},q={class:"text-sm font-medium text-gray-700"},H={key:0,class:"py-10 text-center"},G={key:1,class:"space-y-4"},K={class:"flex flex-wrap items-start justify-between gap-3"},P={class:"text-sm font-semibold text-gray-900"},Q={class:"mt-0.5 text-[11px] text-gray-500"},W={key:0},X={key:1},Y={key:2},Z={key:3},ee={key:4},se={class:"rounded-md bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-800 ring-1 ring-emerald-100"},te={class:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2"},ae={class:"flex items-start justify-between gap-2"},ne={class:"flex flex-wrap items-center gap-2"},oe={class:"inline-flex items-center rounded-md bg-emerald-600 px-2 py-0.5 text-[10px] font-bold text-white"},re={class:"text-xs font-semibold text-gray-900"},le={class:"mt-0.5 text-[11px] text-gray-500"},ie={key:0,class:"mt-2 text-[11px] text-gray-500"},de={key:1,class:"mt-3 grid grid-cols-1 gap-2 sm:grid-cols-2"},ce={class:"text-xs font-semibold text-gray-800"},me={class:"mt-1 flex flex-wrap gap-1"},ue={key:0,class:"text-[11px] text-gray-500"},_e={__name:"TeacherAssignments",props:{teachers:{type:Array,default:()=>[]}},setup(w){const f=w,b=O(""),p=T(()=>{const t=String(b.value||"").toLowerCase().trim();return t?(f.teachers||[]).filter(e=>{const s=String((e==null?void 0:e.name)||"").toLowerCase(),n=String((e==null?void 0:e.email)||"").toLowerCase(),l=String((e==null?void 0:e.phone)||"").toLowerCase(),u=String((e==null?void 0:e.check_number)||"").toLowerCase(),m=((e==null?void 0:e.subjects)||[]).some(c=>{const i=String((c==null?void 0:c.subject_code)||"").toLowerCase(),h=String((c==null?void 0:c.subject_name)||"").toLowerCase();return i.includes(t)||h.includes(t)}),N=((e==null?void 0:e.subjects)||[]).some(c=>((c==null?void 0:c.classes)||[]).some(i=>{const h=String((i==null?void 0:i.label)||"").toLowerCase(),A=String((i==null?void 0:i.stream)||"").toLowerCase(),B=String((i==null?void 0:i.level)||"").toLowerCase();return h.includes(t)||A.includes(t)||B.includes(t)}));return s.includes(t)||n.includes(t)||l.includes(t)||u.includes(t)||m||N}):f.teachers||[]}),k=t=>{const e=String((t==null?void 0:t.subject_code)||"").trim(),s=String((t==null?void 0:t.subject_name)||"").trim();return e&&s?`${e} - ${s}`:e||s||"-"},j=t=>{const e=Number((t==null?void 0:t.parent_class_id)||0),s=Number((t==null?void 0:t.id)||0);return e>0?e:s},S=t=>{const e=String((t==null?void 0:t.name)||"").trim();return e||String((t==null?void 0:t.level)||"").trim()||"Class"},C=t=>{const e=new Map;return(t||[]).forEach(s=>{const n=j(s);if(!n)return;e.has(n)||e.set(n,{base_class_id:n,base_label:S(s),streams:new Set});const l=String((s==null?void 0:s.stream)||"").trim();l&&e.get(n).streams.add(l)}),Array.from(e.values()).map(s=>({base_class_id:s.base_class_id,base_label:s.base_label,streams:Array.from(s.streams.values()).sort((n,l)=>n.localeCompare(l))})).sort((s,n)=>Number(s.base_class_id)-Number(n.base_class_id))},L=()=>{const t={exported_at:new Date().toISOString(),total_teachers:(p.value||[]).length,teachers:p.value||[]},e=JSON.stringify(t,null,2),s=new Blob([e],{type:"application/json;charset=utf-8"}),n=URL.createObjectURL(s),u=`teacher-assignments_${new Date().toISOString().slice(0,10)}.json`,m=document.createElement("a");m.href=n,m.download=u,document.body.appendChild(m),m.click(),m.remove(),URL.revokeObjectURL(n)};return(t,e)=>(r(),o(x,null,[y(U(D),{title:"Teacher Assignments"}),y(I,null,{header:v(()=>[a("div",M,[e[2]||(e[2]=a("div",null,[a("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teacher Assignments "),a("p",{class:"mt-1 text-sm text-gray-500"}," Orodha ya walimu pamoja na masomo wanayofundisha na madarasa/streams walizo-assigniwa. ")],-1)),a("div",R,[e[1]||(e[1]=a("div",{class:"text-xs font-semibold text-gray-700"},"Search:",-1)),E(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),type:"text",placeholder:"Search teacher / subject / class / stream",class:"w-72 max-w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-xs shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,512),[[F,b.value]]),a("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:L}," Export JSON ")])])]),default:v(()=>[a("div",V,[a("div",$,[a("div",J,[a("div",z,[a("p",q," Teachers ("+d(p.value.length)+") ",1),e[3]||(e[3]=a("p",{class:"text-[11px] text-gray-500"}," Tip: unaweza kutafuta kwa jina, subject code, class au stream. ",-1))]),p.value.length===0?(r(),o("div",H,[...e[4]||(e[4]=[a("div",{class:"text-sm font-semibold text-gray-700"},"No assignments found",-1),a("div",{class:"mt-1 text-xs text-gray-500"}," Hakuna data ya assignments, au search imeficha matokeo. ",-1)])])):(r(),o("div",G,[(r(!0),o(x,null,_(p.value,s=>(r(),o("div",{key:s.id,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},[a("div",K,[a("div",null,[a("div",P,d(s.name),1),a("div",Q,[s.check_number?(r(),o("span",W,d(s.check_number),1)):g("",!0),s.check_number&&(s.email||s.phone)?(r(),o("span",X," · ")):g("",!0),s.email?(r(),o("span",Y,d(s.email),1)):g("",!0),s.email&&s.phone?(r(),o("span",Z," · ")):g("",!0),s.phone?(r(),o("span",ee,d(s.phone),1)):g("",!0)])]),a("div",se,d((s.subjects||[]).length)+" subjects ",1)]),a("div",te,[(r(!0),o(x,null,_(s.subjects||[],n=>(r(),o("div",{key:n.id,class:"rounded-lg border border-gray-100 bg-gray-50 p-3"},[a("div",ae,[a("div",null,[a("div",ne,[a("span",oe,d(n.subject_code||"SUB"),1),a("div",re,d(k(n)),1)]),a("div",le," Assigned classes/streams ("+d((n.classes||[]).length)+") ",1)]),e[5]||(e[5]=a("div",{class:"text-[10px] font-semibold text-gray-500"},null,-1))]),(n.classes||[]).length===0?(r(),o("div",ie," No classes assigned. ")):(r(),o("div",de,[(r(!0),o(x,null,_(C(n.classes),l=>(r(),o("div",{key:l.base_class_id,class:"rounded-lg bg-white p-3 ring-1 ring-gray-200"},[a("div",ce,d(l.base_label),1),a("div",me,[(l.streams||[]).length===0?(r(),o("span",ue," No streams ")):g("",!0),(r(!0),o(x,null,_(l.streams||[],u=>(r(),o("span",{key:u,class:"inline-flex items-center rounded-full bg-sky-50 px-2 py-0.5 text-[10px] font-semibold text-sky-800 ring-1 ring-sky-100"},d(u),1))),128))])]))),128))]))]))),128))])]))),128))]))])])])]),_:1})],64))}};export{_e as default};

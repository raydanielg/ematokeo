import{i as b,j as V,n as ae,I as he,c as n,a as fe,u as Qe,h as et,w as ve,d as m,b as e,o,F as x,r as g,t as i,k,p as ne,v as z,f as j,s as tt,x as _e,m as B}from"./app-D9idW1_W.js";import{_ as st}from"./AuthenticatedLayout-BtLoqiTQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const lt={class:"flex items-center justify-between"},at={class:"flex gap-2"},nt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},ot={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},rt={class:"mb-2 flex items-start justify-between gap-3"},dt=["disabled"],it={class:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-900"},ut={class:"mt-1 flex flex-wrap gap-1"},ct={key:0,class:"text-[10px] text-amber-900"},pt={class:"mt-4 flex justify-end"},bt=["disabled"],mt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},xt={class:"w-full max-w-xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},gt={class:"mb-2 flex items-start justify-between gap-3"},yt=["disabled"],ht={class:"max-h-64 space-y-2 overflow-auto rounded-lg border border-gray-200 bg-white p-2"},ft={class:"text-[11px] font-semibold text-amber-900"},vt={class:"mt-1 flex flex-wrap gap-1"},_t={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},wt={class:"mt-4 flex justify-end gap-2"},kt=["disabled"],jt=["disabled"],Ct={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Nt={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},St={class:"mb-3 flex items-start justify-between gap-3"},At={class:"mt-0.5 text-[11px] text-gray-500"},Tt=["disabled"],Mt={key:0,class:"py-8 text-center text-[11px] text-gray-500"},Ft={key:1,class:"space-y-3"},Xt={class:"overflow-hidden rounded-lg border border-gray-200"},$t={class:"min-w-full border-collapse text-[11px]"},It={key:0},Vt={class:"border-b border-gray-100 px-3 py-2"},zt=["onUpdate:modelValue"],Bt=["value"],Rt={key:0,class:"mt-1"},Dt=["onUpdate:modelValue"],Ut=["value"],Lt={class:"border-b border-gray-100 px-3 py-2"},Et=["onUpdate:modelValue"],Ot=["value"],qt={class:"border-b border-gray-100 px-3 py-2"},Wt=["onUpdate:modelValue"],Ht={class:"border-b border-gray-100 px-3 py-2 text-right"},Pt=["disabled","onClick"],Jt={class:"flex items-center justify-between"},Kt=["disabled"],Yt={class:"flex justify-end gap-2"},Zt=["disabled"],Gt=["disabled"],Qt={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},es={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},ts={class:"mb-4 flex flex-wrap items-center justify-between gap-3"},ss={class:"mt-0.5 text-[11px] text-gray-500"},ls={class:"font-semibold text-gray-700"},as={class:"overflow-hidden rounded-xl border border-gray-200"},ns={class:"overflow-x-auto"},os={class:"min-w-full text-left text-sm"},rs={class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},ds={class:"w-10 px-4 py-3"},is=["checked"],us={key:0},cs={class:"px-4 py-2 align-top"},ps=["checked","onChange"],bs={class:"px-3 py-2 align-top"},ms={class:"flex flex-col"},xs={class:"text-gray-800"},gs={class:"text-[10px] text-gray-500"},ys={class:"px-3 py-2 align-top"},hs={class:"px-3 py-2 align-top"},fs={class:"px-3 py-2 align-top"},vs={key:0,class:"flex flex-wrap gap-1"},_s={key:1,class:"text-gray-500"},ws={class:"px-3 py-2 align-top"},ks={key:0,class:"space-y-1"},js={class:"text-[10px] font-semibold text-emerald-900"},Cs={class:"mt-0.5 flex flex-wrap gap-1"},Ns={key:1,class:"flex flex-wrap gap-1"},Ss={key:2,class:"text-gray-500"},As={class:"px-3 py-2 align-top"},Ts={class:"flex justify-end gap-1.5"},Ms=["onClick"],Fs=["onClick"],Xs=["onClick"],$s=["onClick"],Is=["onClick"],Vs={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},zs={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Bs={class:"mb-3 flex items-center justify-between"},Rs={class:"mt-0.5 text-[11px] text-gray-500"},Ds={class:"font-semibold"},Us={key:0,class:"py-6 text-center text-[11px] text-gray-500"},Ls={key:1,class:"overflow-hidden rounded-lg border border-gray-200"},Es={class:"min-w-full border-collapse text-[11px]"},Os={key:0},qs={class:"border-b border-gray-100 px-3 py-2"},Ws={class:"border-b border-gray-100 px-3 py-2"},Hs={class:"font-medium text-gray-800"},Ps={class:"text-[10px] text-gray-500"},Js={class:"border-b border-gray-100 px-3 py-2 font-semibold"},Ks={class:"mt-4 flex justify-end"},Ys={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Zs={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Gs={class:"mb-3 flex items-center justify-between"},Qs={class:"space-y-2 text-[11px] text-gray-700"},el={class:"flex justify-between gap-3"},tl={class:"text-right text-gray-900"},sl={class:"flex justify-between gap-3"},ll={class:"text-right"},al={class:"flex justify-between gap-3"},nl={class:"mt-0.5 text-[11px] font-medium text-gray-900"},ol={class:"flex justify-between gap-3"},rl={class:"mt-0.5 text-[11px] font-medium text-gray-900"},dl={class:"col-span-2"},il={class:"mt-1 flex flex-wrap gap-1"},ul={key:0,class:"text-[11px] text-gray-500"},cl={key:0,class:"col-span-2"},pl={class:"mt-1 space-y-2"},bl={class:"text-[10px] font-semibold text-amber-900"},ml={class:"mt-1 space-y-1"},xl={class:"text-[10px] font-semibold text-amber-900"},gl={class:"mt-0.5 flex flex-wrap gap-1"},yl={class:"mt-4 flex justify-end"},hl={key:5,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},fl={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},vl={class:"mb-3 flex items-center justify-between"},_l={class:"grid grid-cols-2 gap-3"},wl={class:"grid grid-cols-2 gap-3"},kl={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},jl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Cl=["checked","onChange"],Nl={class:"font-medium text-gray-800"},Sl={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Al={class:"mt-1 grid grid-cols-2 gap-1"},Tl=["checked","onChange"],Ml={class:"text-gray-800"},Fl={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},Xl={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},$l=["checked","onChange"],Il={class:"font-medium text-gray-800"},Vl={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},zl={class:"mt-4 flex justify-end gap-2"},Bl={key:6,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Rl={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Dl={class:"mb-3 text-[11px] text-gray-600"},Ul={class:"font-semibold"},Ll={class:"mt-3 flex justify-end gap-2"},El={key:7,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Ol={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ql={class:"mb-3 flex items-center justify-between"},Wl={class:"grid grid-cols-2 gap-3"},Hl={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Pl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Jl=["checked","onChange"],Kl={class:"font-medium text-gray-800"},Yl={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Zl={class:"mt-1 grid grid-cols-2 gap-1"},Gl=["checked","onChange"],Ql={class:"text-gray-800"},ea={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},ta={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},sa=["checked","onChange"],la={class:"font-medium text-gray-800"},aa={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},na={class:"mt-4 flex justify-end gap-2"},oa={key:8,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},ra={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},da={class:"mb-3 text-[11px] text-gray-600"},ia={class:"font-semibold"},ba={__name:"TeachersIndex",props:{teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},allClasses:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classSubjectMap:{type:Object,default:()=>({})}},setup(C){const h=C,F=b(!1);b(!1);const U=b(!1),X=b(!1),L=b(!1),E=b(!1),P=b(!1),O=b(!1),J=b(!1),K=b(!1),R=b(!1),q=b({classId:null,teachers:[],context:null}),N=b(!1),W=b([]),Y=b(null),v=b([]),we=l=>{T(v.value,l)},ke=V(()=>{const l=(h.teachers||[]).map(a=>Number(a.id)).filter(a=>Number.isFinite(a));if(!l.length)return!1;const t=new Set((v.value||[]).map(a=>Number(a)));return l.every(a=>t.has(a))}),je=()=>{const l=(h.teachers||[]).map(s=>Number(s.id)).filter(s=>Number.isFinite(s)),t=new Set((v.value||[]).map(s=>Number(s))),a=l.length>0&&l.every(s=>t.has(s));v.value=a?[]:l},Ce=()=>{(v.value||[]).length&&(O.value=!0)},Ne=()=>{O.value=!1},Se=()=>{(v.value||[]).length&&B.post(route("teachers.bulk-destroy"),{teacher_ids:v.value},{preserveScroll:!0,onSuccess:()=>{v.value=[],O.value=!1}})},p=ae({name:"",phone:"",class_ids:[],subject_ids:[]}),S=b([]),u=ae({id:null,name:"",phone:"",check_number:"",teaching_classes:"",class_ids:[],subject_ids:[]}),A=b([]),Z=l=>{var s;const t=(l||[]).map(r=>Number(r)).filter(r=>Number.isFinite(r));if(!t.length)return null;const a=new Set;for(const r of t){const d=Array.isArray((s=h.classSubjectMap)==null?void 0:s[r])?h.classSubjectMap[r]:[];for(const y of d){const f=Number(y);Number.isFinite(f)&&a.add(f)}}return a.size?a:null},$=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(h.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:Number(a.id),label:D(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},oe=(l,t)=>{const a=new Set;for(const s of l||[])for(const r of $(s))a.add(Number(r.id));return(t||[]).filter(s=>a.has(Number(s)))},re=(l,t)=>{const a=new Set((t||[]).map(r=>Number(r)).filter(r=>Number.isFinite(r))),s=new Set;for(const r of l||[]){const d=Number(r);if(!Number.isFinite(d)||d<=0)continue;const y=$(d);if(!y.length){s.add(d);continue}const f=y.filter(M=>a.has(Number(M.id)));if(f.length)for(const M of f)s.add(Number(M.id));else for(const M of y)s.add(Number(M.id))}return Array.from(s)},G=V(()=>re(S.value,p.class_ids)),Q=V(()=>re(A.value,u.class_ids)),de=(l,t)=>{W.value=Array.isArray(l)?l:[],Y.value=typeof t=="function"?t:null,J.value=!0},ee=()=>{N.value||(J.value=!1,W.value=[],Y.value=null)},Ae=()=>{if(N.value)return;const l=Y.value;ee(),l&&l()},ie=async({classIds:l,subjectIds:t,excludeTeacherId:a})=>{var s;N.value=!0;try{const d=await(await fetch(route("teachers.assignment-conflicts"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({class_ids:l,subject_ids:t,exclude_teacher_id:a||void 0})})).json();return Array.isArray(d==null?void 0:d.conflicts)?d.conflicts:[]}catch{return[]}finally{N.value=!1}},T=(l,t)=>{const a=Number(t);if(!Number.isFinite(a))return;const s=l.findIndex(r=>Number(r)===a);s===-1?l.push(a):l.splice(s,1)},Te=l=>T(p.class_ids,l),Me=l=>T(p.subject_ids,l),Fe=l=>T(u.class_ids,l),Xe=l=>T(u.subject_ids,l),ue=(l,t,a)=>{q.value={classId:Number(l),teachers:Array.isArray(t)?t:[],context:a},K.value=!0},ce=()=>{R.value||(K.value=!1,q.value={classId:null,teachers:[],context:null})},$e=()=>{ce()},pe=async(l,t=null)=>{R.value=!0;try{const a=route("teachers.class-assignment-check",{class_id:Number(l),exclude_teacher_id:t?Number(t):void 0}),r=await(await fetch(a,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();return{hasTeacher:!!(r!=null&&r.has_teacher),teachers:Array.isArray(r==null?void 0:r.teachers)?r.teachers:[]}}catch{return{hasTeacher:!1,teachers:[]}}finally{R.value=!1}},Ie=l=>{T(S.value,l),p.class_ids=oe(S.value,p.class_ids),p.subject_ids=[]},Ve=l=>{T(A.value,l),u.class_ids=oe(A.value,u.class_ids),u.subject_ids=[]},ze=async l=>{const t=Number(l);if(!Number.isFinite(t))return;const a=p.class_ids.includes(t);if(Te(t),a)return;const s=await pe(t,null);s.hasTeacher&&ue(t,s.teachers,{type:"add"})},Be=async l=>{const t=Number(l);if(!Number.isFinite(t))return;const a=u.class_ids.includes(t);if(Fe(t),a)return;const s=await pe(t,u.id);s.hasTeacher&&ue(t,s.teachers,{type:"edit"})},be=l=>{const t=Z(l);return t?(h.subjects||[]).filter(a=>t.has(Number(a.id))):h.subjects||[]},me=V(()=>be(G.value)),xe=V(()=>be(Q.value));he(()=>[S.value,p.class_ids],()=>{const l=Z(G.value);if(!l){p.subject_ids=[];return}p.subject_ids=(p.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0}),he(()=>[A.value,u.class_ids],()=>{const l=Z(Q.value);if(!l){u.subject_ids=[];return}u.subject_ids=(u.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0}),ae({class_id:""});const c=b(null),te=b(!1),I=b({teacher:null,limits:[]}),H=b(!1),w=b(!1),_=b([]),ge=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(h.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:a.id,label:D(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},Re=l=>{var s;const t=Number(l);if(!Number.isFinite(t)||t<=0)return null;const a=Array.isArray((s=h.classSubjectMap)==null?void 0:s[t])?h.classSubjectMap[t]:null;return a?new Set(a.map(r=>Number(r)).filter(r=>Number.isFinite(r))):null},De=l=>{const t=l.stream_id?Number(l.stream_id):Number(l.base_class_id),a=Re(t);return a?(h.subjects||[]).filter(s=>a.has(Number(s.id))):h.subjects||[]},Ue=V(()=>{var l;return(((l=I.value)==null?void 0:l.limits)||[]).reduce((t,a)=>t+(Number(a.periods_per_week)||0),0)}),ye=()=>{p.name="",p.phone="",p.class_ids=[],p.subject_ids=[],S.value=[]},Le=async()=>{const l=G.value,t={name:p.name,phone:p.phone,class_ids:l,subject_ids:p.subject_ids};if(t.class_ids.length&&t.subject_ids.length){const a=await ie({classIds:t.class_ids,subjectIds:t.subject_ids,excludeTeacherId:null});if(a.length){de(a,()=>{B.post(route("teachers.store"),t,{preserveScroll:!0,onSuccess:()=>{ye(),F.value=!1}})});return}}B.post(route("teachers.store"),t,{preserveScroll:!0,onSuccess:()=>{ye(),F.value=!1}})},Ee=l=>{c.value=l,U.value=!0},Oe=l=>{c.value=l,u.id=l.id,u.name=l.name,u.phone=l.phone,u.check_number=l.check_number,u.teaching_classes=l.teaching_classes,u.class_ids=Array.isArray(l.assigned_stream_class_ids)?[...l.assigned_stream_class_ids]:[],u.subject_ids=Array.isArray(l.assigned_subject_ids)?[...l.assigned_subject_ids]:[];const t=new Set;for(const a of u.class_ids||[]){const s=(h.allClasses||[]).find(d=>Number(d.id)===Number(a)),r=s!=null&&s.parent_class_id?Number(s.parent_class_id):Number(a);Number.isFinite(r)&&r>0&&t.add(r)}A.value=Array.from(t),X.value=!0},qe=async()=>{if(!u.id)return;const l=Q.value,t={name:u.name,phone:u.phone,check_number:u.check_number,class_ids:l,subject_ids:u.subject_ids};if(t.class_ids.length&&t.subject_ids.length){const a=await ie({classIds:t.class_ids,subjectIds:t.subject_ids,excludeTeacherId:u.id});if(a.length){de(a,()=>{B.put(route("teachers.update",u.id),t,{preserveScroll:!0,onSuccess:()=>{X.value=!1}})});return}}B.put(route("teachers.update",u.id),t,{preserveScroll:!0,onSuccess:()=>{X.value=!1}})},We=l=>{c.value=l,L.value=!0},He=()=>{c.value&&B.delete(route("teachers.destroy",c.value.id),{preserveScroll:!0,onSuccess:()=>{L.value=!1}})},Pe=async l=>{c.value=l,E.value=!0,te.value=!0;try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();I.value={teacher:(a==null?void 0:a.teacher)||{id:l.id,name:l.name},limits:Array.isArray(a==null?void 0:a.limits)?a.limits:[]}}catch{I.value={teacher:{id:l.id,name:l.name},limits:[]}}finally{te.value=!1}},Je=async l=>{c.value=l,P.value=!0,H.value=!0,_.value=[];try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json(),s=Array.isArray(a==null?void 0:a.limits)?a.limits:[];_.value=s.map(r=>{const d=Number(r.school_class_id)||"",y=(h.allClasses||[]).find(Ge=>Number(Ge.id)===Number(d)),f=y!=null&&y.parent_class_id?Number(y.parent_class_id):d,M=y!=null&&y.parent_class_id?d:"";return{base_class_id:f||"",stream_id:M||"",subject_id:Number(r.subject_id)||"",periods_per_week:Number(r.periods_per_week)||0}})}catch{_.value=[]}finally{H.value=!1}},se=()=>{w.value||(P.value=!1,_.value=[])},Ke=()=>{_.value=[..._.value,{base_class_id:"",stream_id:"",subject_id:"",periods_per_week:0}]},Ye=l=>{_.value=_.value.filter((t,a)=>a!==l)},Ze=async()=>{var t;if(!c.value||w.value)return;const l=(_.value||[]).map(a=>{const s=a.stream_id?Number(a.stream_id):Number(a.base_class_id),r=a.periods_per_week===""||a.periods_per_week===null||typeof a.periods_per_week>"u"?0:Number(a.periods_per_week);return{school_class_id:s,subject_id:Number(a.subject_id),teacher_id:Number(c.value.id),periods_per_week:Number.isFinite(r)&&r>=0?r:0}}).filter(a=>Number.isFinite(a.school_class_id)&&a.school_class_id>0).filter(a=>Number.isFinite(a.subject_id)&&a.subject_id>0);if(l.length){w.value=!0;try{await fetch(route("timetables.weekly-limits.save"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({limits:l})}),se()}finally{w.value=!1}}},D=l=>{const t=l!=null&&l.name?String(l.name).trim():"",a=l!=null&&l.level?String(l.level).trim():"";return t||a},le=l=>{const t=l!=null&&l.subject_code?String(l.subject_code).trim():"",a=l!=null&&l.name?String(l.name).trim():"";return t&&a?`${t} - ${a}`:t||a};return(l,t)=>(o(),n(x,null,[fe(Qe(et),{title:"Teachers"}),fe(st,null,{header:ve(()=>[e("div",lt,[t[15]||(t[15]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all registered teachers with their contact details, registration number and assigned classes. ")],-1)),e("div",at,[e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:t[0]||(t[0]=a=>F.value=!0)}," Add Teacher "),v.value.length?(o(),n("button",{key:0,type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-red-700",onClick:Ce}," Delete selected ("+i(v.value.length)+") ",1)):m("",!0)])])]),default:ve(()=>{var a;return[K.value?(o(),n("div",nt,[e("div",ot,[e("div",rt,[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"This class already has teacher(s)"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa hili tayari lina mwalimu. Mfumo unaruhusu walimu zaidi ya mmoja. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:R.value,onClick:ce}," × ",8,dt)]),e("div",it,[t[17]||(t[17]=e("div",{class:"font-semibold"},"Existing teacher(s):",-1)),e("div",ut,[(o(!0),n(x,null,g(q.value.teachers||[],s=>(o(),n("span",{key:s.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(s.name),1))),128)),(q.value.teachers||[]).length?m("",!0):(o(),n("span",ct," — "))])]),e("div",pt,[e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:R.value,onClick:$e}," OK ",8,bt)])])])):m("",!0),J.value?(o(),n("div",mt,[e("div",xt,[e("div",gt,[t[18]||(t[18]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Taarifa: tayari kuna mwalimu"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa/stream na somo hili tayari lina mwalimu. Unataka kuruhusu walimu wawili (au zaidi) wafundishe pamoja? ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:N.value,onClick:ee}," × ",8,yt)]),e("div",ht,[(o(!0),n(x,null,g(W.value,s=>(o(),n("div",{key:`${s.class_id}-${s.subject_id}`,class:"rounded-md border border-amber-200 bg-amber-50 p-2"},[e("div",ft,i(s.class_label)+" · "+i(s.subject_label),1),e("div",vt,[(o(!0),n(x,null,g(s.teachers||[],r=>(o(),n("span",{key:r.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(r.name),1))),128))])]))),128)),W.value.length?m("",!0):(o(),n("div",_t," No conflicts. "))]),e("div",wt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:N.value,onClick:ee}," Cancel ",8,kt),e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:N.value,onClick:Ae}," Ruhusu wawili (Endelea) ",8,jt)])])])):m("",!0),P.value&&c.value?(o(),n("div",Ct,[e("div",Nt,[e("div",St,[e("div",null,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Assign vipindi (weekly limits)",-1)),e("p",At,i(c.value.name)+" · Weka vipindi kwa wiki kwa kila darasa na somo. ",1)]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:w.value,onClick:se}," × ",8,Tt)]),H.value?(o(),n("div",Mt," Loading... ")):(o(),n("div",Ft,[e("div",Xt,[e("table",$t,[t[24]||(t[24]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki"),e("th",{class:"border-b border-gray-200 px-3 py-2"})])],-1)),e("tbody",null,[_.value.length?m("",!0):(o(),n("tr",It,[...t[20]||(t[20]=[e("td",{colspan:"4",class:"px-3 py-6 text-center text-[11px] text-gray-500"},' Hakuna row bado. Bonyeza "Add row" kuongeza. ',-1)])])),(o(!0),n(x,null,g(_.value,(s,r)=>(o(),n("tr",{key:r,class:"hover:bg-gray-50"},[e("td",Vt,[k(e("select",{"onUpdate:modelValue":d=>s.base_class_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[21]||(t[21]=e("option",{value:""},"Select class...",-1)),(o(!0),n(x,null,g(C.classes,d=>(o(),n("option",{key:d.id,value:d.id},i(D(d)),9,Bt))),128))],8,zt),[[ne,s.base_class_id]]),ge(s.base_class_id).length?(o(),n("div",Rt,[k(e("select",{"onUpdate:modelValue":d=>s.stream_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[22]||(t[22]=e("option",{value:""},"No stream (base class)",-1)),(o(!0),n(x,null,g(ge(s.base_class_id),d=>(o(),n("option",{key:d.id,value:d.id},i(d.label),9,Ut))),128))],8,Dt),[[ne,s.stream_id]])])):m("",!0)]),e("td",Lt,[k(e("select",{"onUpdate:modelValue":d=>s.subject_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[23]||(t[23]=e("option",{value:""},"Select subject...",-1)),(o(!0),n(x,null,g(De(s),d=>(o(),n("option",{key:d.id,value:d.id},i(le(d)),9,Ot))),128))],8,Et),[[ne,s.subject_id]])]),e("td",qt,[k(e("input",{"onUpdate:modelValue":d=>s.periods_per_week=d,type:"number",min:"0",max:"50",class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,8,Wt),[[z,s.periods_per_week,void 0,{number:!0}]])]),e("td",Ht,[e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",disabled:w.value,onClick:d=>Ye(r)}," Remove ",8,Pt)])]))),128))])])]),e("div",Jt,[e("button",{type:"button",class:"rounded-md bg-slate-50 px-3 py-1.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200 hover:bg-slate-100",disabled:w.value,onClick:Ke}," Add row ",8,Kt),e("div",Yt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:w.value,onClick:se}," Cancel ",8,Zt),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60",disabled:w.value||H.value||!_.value.length,onClick:Ze},i(w.value?"Saving...":"Save vipindi"),9,Gt)])])]))])])):m("",!0),e("div",Qt,[e("div",es,[e("div",ts,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-sm font-semibold text-gray-800"},"Teachers",-1)),e("p",ss,[t[25]||(t[25]=j("Jumla: ",-1)),e("span",ls,i(C.teachers.length),1)])])]),e("div",as,[e("div",ns,[e("table",os,[e("thead",null,[e("tr",rs,[e("th",ds,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:ke.value,onChange:je},null,40,is)]),t[27]||(t[27]=e("th",{class:"px-4 py-3"},"Name",-1)),t[28]||(t[28]=e("th",{class:"px-4 py-3"},"Phone",-1)),t[29]||(t[29]=e("th",{class:"px-4 py-3"},"Check No.",-1)),t[30]||(t[30]=e("th",{class:"px-4 py-3"},"Assigned Classes",-1)),t[31]||(t[31]=e("th",{class:"px-4 py-3"},"Assigned Subjects",-1)),t[32]||(t[32]=e("th",{class:"px-4 py-3 text-right"},"Actions",-1))])]),e("tbody",null,[C.teachers.length===0?(o(),n("tr",us,[...t[33]||(t[33]=[e("td",{colspan:"7",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No teachers yet"),e("div",{class:"mt-1 text-xs text-gray-500"},[j("Bado hujaongeza mwalimu. Bonyeza "),e("span",{class:"font-semibold"},"Add Teacher"),j(" kuanza.")])])],-1)])])):m("",!0),(o(!0),n(x,null,g(C.teachers,(s,r)=>(o(),n("tr",{key:s.id,class:tt(["border-b border-gray-100 text-xs text-gray-700",r%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",cs,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:v.value.map(d=>Number(d)).includes(Number(s.id)),onChange:d=>we(s.id)},null,40,ps)]),e("td",bs,[e("div",ms,[e("span",xs,i(s.name),1),e("span",gs,i(s.email),1)])]),e("td",ys,i(s.phone||"—"),1),e("td",hs,i(s.check_number||"—"),1),e("td",fs,[s.assigned_classes&&s.assigned_classes.length?(o(),n("div",vs,[(o(!0),n(x,null,g(s.assigned_classes,d=>(o(),n("span",{key:d,class:"rounded bg-gray-100 px-1.5 py-0.5 text-[10px] text-gray-700"},i(d),1))),128))])):(o(),n("span",_s,"—"))]),e("td",ws,[s.assigned_class_subjects&&Object.keys(s.assigned_class_subjects).length?(o(),n("div",ks,[(o(!0),n(x,null,g(s.assigned_class_subjects,(d,y)=>(o(),n("div",{key:y,class:"rounded-md border border-emerald-100 bg-emerald-50/40 px-2 py-1"},[e("div",js,i(y),1),e("div",Cs,[(o(!0),n(x,null,g(d,f=>(o(),n("span",{key:`${y}-${f}`,class:"rounded bg-white/70 px-1.5 py-0.5 text-[10px] text-emerald-800 ring-1 ring-emerald-100"},i(f),1))),128))])]))),128))])):s.assigned_subjects&&s.assigned_subjects.length?(o(),n("div",Ns,[(o(!0),n(x,null,g(s.assigned_subjects,d=>(o(),n("span",{key:d,class:"rounded bg-emerald-50 px-1.5 py-0.5 text-[10px] text-emerald-800"},i(d),1))),128))])):(o(),n("span",Ss,"—"))]),e("td",As,[e("div",Ts,[e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Timetable preview",onClick:d=>Pe(s)},[...t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 4h18"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("rect",{x:"3",y:"6",width:"18",height:"16",rx:"2"}),e("path",{d:"M7 10h4"}),e("path",{d:"M7 14h4"}),e("path",{d:"M13 10h4"}),e("path",{d:"M13 14h4"})],-1)])],8,Ms),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-amber-50 text-amber-700 ring-1 ring-amber-100 hover:bg-amber-100",title:"Assign vipindi",onClick:d=>Je(s)},[...t[35]||(t[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,Fs),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Details",onClick:d=>Ee(s)},[...t[36]||(t[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4"}),e("path",{d:"M12 8h.01"})],-1)])],8,Xs),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",title:"Edit",onClick:d=>Oe(s)},[...t[37]||(t[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,$s),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-red-50 text-red-700 ring-1 ring-red-200 hover:bg-red-100",title:"Delete",onClick:d=>We(s)},[...t[38]||(t[38]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M19 6l-1 14H6L5 6"}),e("path",{d:"M10 11v6"}),e("path",{d:"M14 11v6"})],-1)])],8,Is)])])],2))),128))])])])])])]),E.value&&c.value?(o(),n("div",Vs,[e("div",zs,[e("div",Bs,[e("div",null,[t[39]||(t[39]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher timetable preview",-1)),e("p",Rs,[j(i(((a=I.value.teacher)==null?void 0:a.name)||c.value.name)+" · Total vipindi kwa wiki: ",1),e("span",Ds,i(Ue.value),1)])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[1]||(t[1]=s=>E.value=!1)}," × ")]),te.value?(o(),n("div",Us," Loading... ")):(o(),n("div",Ls,[e("table",Es,[t[41]||(t[41]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki")])],-1)),e("tbody",null,[I.value.limits.length?m("",!0):(o(),n("tr",Os,[...t[40]||(t[40]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-[11px] text-gray-500"}," Hakuna limitations zilizowekwa kwa huyu mwalimu bado. ",-1)])])),(o(!0),n(x,null,g(I.value.limits,s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",qs,i(s.class_label),1),e("td",Ws,[e("div",Hs,i(s.subject_code),1),e("div",Ps,i(s.subject_name),1)]),e("td",Js,i(s.periods_per_week),1)]))),128))])])])),e("div",Ks,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[2]||(t[2]=s=>E.value=!1)}," Close ")])])])):m("",!0),U.value&&c.value?(o(),n("div",Ys,[e("div",Zs,[e("div",Gs,[t[42]||(t[42]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher details"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Full profile preview for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[3]||(t[3]=s=>U.value=!1)}," × ")]),e("dl",Qs,[e("div",el,[t[43]||(t[43]=e("dt",{class:"font-semibold text-gray-600"},"Name",-1)),e("dd",tl,i(c.value.name),1)]),e("div",sl,[t[44]||(t[44]=e("dt",{class:"font-semibold text-gray-600"},"Email",-1)),e("dd",ll,i(c.value.email),1)]),e("div",al,[t[45]||(t[45]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Phone",-1)),e("dd",nl,i(c.value.phone||"—"),1)]),e("div",ol,[t[46]||(t[46]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Check No.",-1)),e("dd",rl,i(c.value.check_number||"—"),1)]),e("div",dl,[t[47]||(t[47]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Assigned classes",-1)),e("dd",il,[(o(!0),n(x,null,g(c.value.assigned_classes||[],s=>(o(),n("span",{key:s,class:"rounded bg-gray-100 px-2 py-0.5 text-[10px] text-gray-700"},i(s),1))),128)),(c.value.assigned_classes||[]).length?m("",!0):(o(),n("span",ul,"—"))])]),c.value.collaborations&&Object.keys(c.value.collaborations).length?(o(),n("div",cl,[t[48]||(t[48]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Anaeshirikiana nae (same class & subject)",-1)),e("dd",pl,[(o(!0),n(x,null,g(c.value.collaborations,(s,r)=>(o(),n("div",{key:r,class:"rounded-lg border border-amber-200 bg-amber-50/50 p-2"},[e("div",bl,i(r),1),e("div",ml,[(o(!0),n(x,null,g(s,(d,y)=>(o(),n("div",{key:`${r}-${y}`},[e("div",xl,i(y),1),e("div",gl,[(o(!0),n(x,null,g(d,f=>(o(),n("span",{key:f.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(f.name),1))),128))])]))),128))])]))),128))])])):m("",!0)]),e("div",yl,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[4]||(t[4]=s=>U.value=!1)}," Close ")])])])):m("",!0),X.value&&c.value?(o(),n("div",hl,[e("div",fl,[e("div",vl,[t[49]||(t[49]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Edit Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Update basic details for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[5]||(t[5]=s=>X.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:_e(qe,["prevent"])},[e("div",null,[t[50]||(t[50]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[z,u.name]])]),e("div",_l,[e("div",null,[t[51]||(t[51]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),k(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>u.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[z,u.phone]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Check / Registration No.",-1)),k(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>u.check_number=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"TCH-XXXXXX (optional)"},null,512),[[z,u.check_number]])])]),e("div",wl,[e("div",null,[t[54]||(t[54]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",kl,[(o(!0),n(x,null,g(C.classes,s=>(o(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",jl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:A.value.includes(s.id),onChange:r=>Ve(s.id)},null,40,Cl),e("span",Nl,i(D(s)),1)]),A.value.includes(s.id)?(o(),n("div",Sl,[t[53]||(t[53]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Al,[(o(!0),n(x,null,g($(s.id),r=>(o(),n("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:u.class_ids.includes(r.id),onChange:d=>Be(r.id)},null,40,Tl),e("span",Ml,i(r.label),1)]))),128)),$(s.id).length?m("",!0):(o(),n("div",Fl," Hakuna streams kwenye darasa hili. "))])])):m("",!0)]))),128))]),t[55]||(t[55]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[56]||(t[56]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",Xl,[(o(!0),n(x,null,g(xe.value,s=>(o(),n("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:u.subject_ids.includes(s.id),onChange:r=>Xe(s.id)},null,40,$l),e("span",Il,i(le(s)),1)]))),128)),xe.value.length?m("",!0):(o(),n("div",Vl," Chagua stream kwanza ili masomo yaonekane. "))]),t[57]||(t[57]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Masomo yanatokana na streams ulizochagua.",-1))])]),e("div",zl,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[9]||(t[9]=s=>X.value=!1)}," Cancel "),t[58]||(t[58]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save changes ",-1))])],32)])])):m("",!0),L.value&&c.value?(o(),n("div",Bl,[e("div",Rl,[t[61]||(t[61]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete teacher?",-1)),e("p",Dl,[t[59]||(t[59]=j(" This will remove ",-1)),e("span",Ul,i(c.value.name),1),t[60]||(t[60]=j(" from the list of teachers. You can re-create them later if needed. ",-1))]),e("div",Ll,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[10]||(t[10]=s=>L.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:He}," Delete ")])])])):m("",!0),F.value?(o(),n("div",El,[e("div",Ol,[e("div",ql,[t[62]||(t[62]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Add Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Register a new teacher with contact details and the classes they teach. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[11]||(t[11]=s=>F.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:_e(Le,["prevent"])},[e("div",null,[t[63]||(t[63]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),k(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>p.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. John Peter Mwakalinga",required:""},null,512),[[z,p.name]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),k(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>p.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[z,p.phone]])]),e("div",Wl,[e("div",null,[t[66]||(t[66]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",Hl,[(o(!0),n(x,null,g(C.classes,s=>(o(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",Pl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:S.value.includes(s.id),onChange:r=>Ie(s.id)},null,40,Jl),e("span",Kl,i(D(s)),1)]),S.value.includes(s.id)?(o(),n("div",Yl,[t[65]||(t[65]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Zl,[(o(!0),n(x,null,g($(s.id),r=>(o(),n("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:p.class_ids.includes(r.id),onChange:d=>ze(r.id)},null,40,Gl),e("span",Ql,i(r.label),1)]))),128)),$(s.id).length?m("",!0):(o(),n("div",ea," Hakuna streams kwenye darasa hili. "))])])):m("",!0)]))),128))]),t[67]||(t[67]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[68]||(t[68]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",ta,[(o(!0),n(x,null,g(me.value,s=>(o(),n("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:p.subject_ids.includes(s.id),onChange:r=>Me(s.id)},null,40,sa),e("span",la,i(le(s)),1)]))),128)),me.value.length?m("",!0):(o(),n("div",aa," Chagua stream kwanza ili masomo yaonekane. "))]),t[69]||(t[69]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Masomo yanatokana na streams ulizochagua.",-1))])]),e("div",na,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[14]||(t[14]=s=>F.value=!1)}," Cancel "),t[70]||(t[70]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save Teacher ",-1))])],32)])])):m("",!0),O.value?(o(),n("div",oa,[e("div",ra,[t[73]||(t[73]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete selected teachers?",-1)),e("p",da,[t[71]||(t[71]=j(" You are about to delete ",-1)),e("span",ia,i(v.value.length),1),t[72]||(t[72]=j(" teacher(s). This will also remove their class/subject assignments. ",-1))]),e("div",{class:"mt-3 flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:Ne}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:Se}," Delete ")])])])):m("",!0)]}),_:1})],64))}};export{ba as default};

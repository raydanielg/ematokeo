import{i as m,n as D,j as P,I as H,c as o,a as O,u as pe,h as ce,w as J,d as v,b as e,o as a,t as i,F as x,r as y,k as b,p as _,v as w,f as j,s as be,x as I,m as F}from"./app-DKcP-QqN.js";import{_ as me}from"./AuthenticatedLayout-C-kGnBQM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={class:"flex items-center justify-between"},ge={class:"flex gap-2"},ye={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},fe={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ve={class:"mb-3 flex items-start justify-between gap-3"},he={class:"mt-0.5 text-[11px] text-gray-500"},_e=["disabled"],we={key:0,class:"py-8 text-center text-[11px] text-gray-500"},ke={key:1,class:"space-y-3"},je={class:"overflow-hidden rounded-lg border border-gray-200"},Ce={class:"min-w-full border-collapse text-[11px]"},Se={key:0},Me={class:"border-b border-gray-100 px-3 py-2"},Ae=["onUpdate:modelValue"],Ne=["value"],Te={class:"border-b border-gray-100 px-3 py-2"},Ve=["onUpdate:modelValue"],$e=["value"],Ue={class:"border-b border-gray-100 px-3 py-2"},Fe=["onUpdate:modelValue"],ze={class:"border-b border-gray-100 px-3 py-2 text-right"},Xe=["disabled","onClick"],qe={class:"flex items-center justify-between"},Re=["disabled"],Le={class:"flex justify-end gap-2"},Be=["disabled"],De=["disabled"],Pe={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},Ie={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},Ee={class:"mb-4 flex flex-wrap items-center justify-between gap-3"},We={class:"mt-0.5 text-[11px] text-gray-500"},He={class:"font-semibold text-gray-700"},Oe={class:"overflow-hidden rounded-xl border border-gray-200"},Je={class:"overflow-x-auto"},Ze={class:"min-w-full text-left text-sm"},Ke={key:0},Qe={class:"px-3 py-2 align-top"},Ye={class:"flex flex-col"},Ge={class:"text-gray-800"},et={class:"text-[10px] text-gray-500"},tt={class:"px-3 py-2 align-top"},st={class:"px-3 py-2 align-top"},lt={class:"px-3 py-2 align-top"},ot={key:0,class:"flex flex-wrap gap-1"},at={key:1,class:"text-gray-500"},nt={class:"px-3 py-2 align-top"},rt={key:0,class:"flex flex-wrap gap-1"},dt={key:1,class:"text-gray-500"},it={class:"px-3 py-2 align-top"},ut={class:"flex justify-end gap-1.5"},pt=["onClick"],ct=["onClick"],bt=["onClick"],mt=["onClick"],xt=["onClick"],gt={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},yt={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ft={class:"mb-3 flex items-center justify-between"},vt={class:"mt-0.5 text-[11px] text-gray-500"},ht={class:"font-semibold"},_t={key:0,class:"py-6 text-center text-[11px] text-gray-500"},wt={key:1,class:"overflow-hidden rounded-lg border border-gray-200"},kt={class:"min-w-full border-collapse text-[11px]"},jt={key:0},Ct={class:"border-b border-gray-100 px-3 py-2"},St={class:"border-b border-gray-100 px-3 py-2"},Mt={class:"font-medium text-gray-800"},At={class:"text-[10px] text-gray-500"},Nt={class:"border-b border-gray-100 px-3 py-2 font-semibold"},Tt={class:"mt-4 flex justify-end"},Vt={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},$t={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Ut={class:"mb-3 flex items-center justify-between"},Ft={class:"space-y-2 text-[11px] text-gray-700"},zt={class:"flex justify-between gap-3"},Xt={class:"text-right text-gray-900"},qt={class:"flex justify-between gap-3"},Rt={class:"text-right"},Lt={class:"flex justify-between gap-3"},Bt={class:"text-right"},Dt={class:"flex justify-between gap-3"},Pt={class:"text-right"},It={class:"flex justify-between gap-3"},Et={class:"max-w-[60%] text-right"},Wt={key:0},Ht={key:1},Ot={class:"flex justify-between gap-3"},Jt={class:"max-w-[60%] text-right"},Zt={key:0},Kt={key:1},Qt={class:"mt-4 flex justify-end"},Yt={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Gt={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},es={class:"mb-3 flex items-center justify-between"},ts={class:"grid grid-cols-2 gap-3"},ss={class:"grid grid-cols-2 gap-3"},ls=["value"],os=["value"],as={class:"mt-4 flex justify-end gap-2"},ns={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},rs={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ds={class:"mb-3 text-[11px] text-gray-600"},is={class:"font-semibold"},us={class:"mt-3 flex justify-end gap-2"},ps={key:5,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},cs={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},bs={class:"mb-3 flex items-center justify-between"},ms={class:"grid grid-cols-2 gap-3"},xs=["value"],gs=["value"],ys={class:"mt-4 flex justify-end gap-2"},fs={key:6,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},vs={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},hs={class:"mb-3 flex items-center justify-between"},_s=["value"],ws={class:"mt-2 flex justify-end gap-2"},Ss={__name:"TeachersIndex",props:{teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},allClasses:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classSubjectMap:{type:Object,default:()=>({})}},setup(h){const A=h,C=m(!1),S=m(!1),N=m(!1),M=m(!1),T=m(!1),V=m(!1),z=m(!1),c=D({name:"",phone:"",class_ids:[],subject_ids:[]}),d=D({id:null,name:"",phone:"",check_number:"",teaching_classes:"",class_ids:[],subject_ids:[]}),X=l=>{const t=(l||[]).map(p=>Number(p)).filter(p=>Number.isFinite(p));if(!t.length)return null;const n=t.map(p=>{var r;return Array.isArray((r=A.classSubjectMap)==null?void 0:r[p])?A.classSubjectMap[p]:[]}).map(p=>new Set(p.map(r=>Number(r)).filter(r=>Number.isFinite(r))));if(!n.length)return null;let s=n[0];for(let p=1;p<n.length;p++){const r=new Set;for(const W of s)n[p].has(W)&&r.add(W);s=r}return s},E=l=>{const t=X(l);return t?(A.subjects||[]).filter(n=>t.has(Number(n.id))):A.subjects||[]},Z=P(()=>E(c.class_ids)),K=P(()=>E(d.class_ids));H(()=>c.class_ids,()=>{const l=X(c.class_ids);l&&(c.subject_ids=(c.subject_ids||[]).filter(t=>l.has(Number(t))))},{deep:!0}),H(()=>d.class_ids,()=>{const l=X(d.class_ids);l&&(d.subject_ids=(d.subject_ids||[]).filter(t=>l.has(Number(t))))},{deep:!0});const $=D({class_id:""}),u=m(null),q=m(!1),k=m({teacher:null,limits:[]}),U=m(!1),f=m(!1),g=m([]),Q=P(()=>{var l;return(((l=k.value)==null?void 0:l.limits)||[]).reduce((t,n)=>t+(Number(n.periods_per_week)||0),0)}),Y=()=>{c.name="",c.phone="",c.class_ids=[],c.subject_ids=[]},G=()=>{F.post(route("teachers.store"),c,{preserveScroll:!0,onSuccess:()=>{Y(),C.value=!1}})},ee=()=>{$.class_id&&F.post(route("teachers.import-samples"),$,{preserveScroll:!0,onSuccess:()=>{S.value=!1}})},te=l=>{u.value=l,N.value=!0},se=l=>{u.value=l,d.id=l.id,d.name=l.name,d.phone=l.phone,d.check_number=l.check_number,d.teaching_classes=l.teaching_classes,d.class_ids=Array.isArray(l.assigned_class_ids)?[...l.assigned_class_ids]:[],d.subject_ids=Array.isArray(l.assigned_subject_ids)?[...l.assigned_subject_ids]:[],M.value=!0},le=()=>{d.id&&F.put(route("teachers.update",d.id),{name:d.name,phone:d.phone,check_number:d.check_number,teaching_classes:d.teaching_classes,class_ids:d.class_ids,subject_ids:d.subject_ids},{preserveScroll:!0,onSuccess:()=>{M.value=!1}})},oe=l=>{u.value=l,T.value=!0},ae=()=>{u.value&&F.delete(route("teachers.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>{T.value=!1}})},ne=async l=>{u.value=l,V.value=!0,q.value=!0;try{const n=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();k.value={teacher:(n==null?void 0:n.teacher)||{id:l.id,name:l.name},limits:Array.isArray(n==null?void 0:n.limits)?n.limits:[]}}catch{k.value={teacher:{id:l.id,name:l.name},limits:[]}}finally{q.value=!1}},re=async l=>{u.value=l,z.value=!0,U.value=!0,g.value=[];try{const n=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json(),s=Array.isArray(n==null?void 0:n.limits)?n.limits:[];g.value=s.map(p=>({school_class_id:Number(p.school_class_id)||"",subject_id:Number(p.subject_id)||"",periods_per_week:Number(p.periods_per_week)||0}))}catch{g.value=[]}finally{U.value=!1}},R=()=>{f.value||(z.value=!1,g.value=[])},de=()=>{g.value=[...g.value,{school_class_id:"",subject_id:"",periods_per_week:0}]},ie=l=>{g.value=g.value.filter((t,n)=>n!==l)},ue=async()=>{var t;if(!u.value||f.value)return;const l=(g.value||[]).map(n=>({school_class_id:Number(n.school_class_id),subject_id:Number(n.subject_id),teacher_id:Number(u.value.id),periods_per_week:Number(n.periods_per_week)})).filter(n=>Number.isFinite(n.school_class_id)&&n.school_class_id>0).filter(n=>Number.isFinite(n.subject_id)&&n.subject_id>0).filter(n=>Number.isFinite(n.periods_per_week)&&n.periods_per_week>=0);if(l.length){f.value=!0;try{await fetch(route("timetables.weekly-limits.save"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({limits:l})}),R()}finally{f.value=!1}}},L=l=>(l!=null&&l.level?String(l.level).trim():"")||(l==null?void 0:l.name)||"",B=l=>{const t=l!=null&&l.subject_code?String(l.subject_code).trim():"",n=l!=null&&l.name?String(l.name).trim():"";return t&&n?`${t} - ${n}`:t||n};return(l,t)=>(a(),o(x,null,[O(pe(ce),{title:"Teachers"}),O(me,null,{header:J(()=>[e("div",xe,[t[24]||(t[24]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all registered teachers with their contact details, registration number and assigned classes. ")],-1)),e("div",ge,[e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:t[0]||(t[0]=n=>C.value=!0)}," Add Teacher "),e("button",{type:"button",class:"rounded-md bg-white px-3 py-1.5 text-xs font-semibold text-emerald-700 ring-1 ring-emerald-200 hover:bg-emerald-50",onClick:t[1]||(t[1]=n=>S.value=!0)}," Import Sample Teachers ")])])]),default:J(()=>{var n;return[z.value&&u.value?(a(),o("div",ye,[e("div",fe,[e("div",ve,[e("div",null,[t[25]||(t[25]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Assign vipindi (weekly limits)",-1)),e("p",he,i(u.value.name)+" · Weka vipindi kwa wiki kwa kila darasa na somo. ",1)]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:f.value,onClick:R}," × ",8,_e)]),U.value?(a(),o("div",we," Loading... ")):(a(),o("div",ke,[e("div",je,[e("table",Ce,[t[29]||(t[29]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki"),e("th",{class:"border-b border-gray-200 px-3 py-2"})])],-1)),e("tbody",null,[g.value.length?v("",!0):(a(),o("tr",Se,[...t[26]||(t[26]=[e("td",{colspan:"4",class:"px-3 py-6 text-center text-[11px] text-gray-500"},' Hakuna row bado. Bonyeza "Add row" kuongeza. ',-1)])])),(a(!0),o(x,null,y(g.value,(s,p)=>(a(),o("tr",{key:p,class:"hover:bg-gray-50"},[e("td",Me,[b(e("select",{"onUpdate:modelValue":r=>s.school_class_id=r,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[27]||(t[27]=e("option",{value:""},"Select class...",-1)),(a(!0),o(x,null,y(h.allClasses,r=>(a(),o("option",{key:r.id,value:r.id},i(L(r)),9,Ne))),128))],8,Ae),[[_,s.school_class_id]])]),e("td",Te,[b(e("select",{"onUpdate:modelValue":r=>s.subject_id=r,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[28]||(t[28]=e("option",{value:""},"Select subject...",-1)),(a(!0),o(x,null,y(h.subjects,r=>(a(),o("option",{key:r.id,value:r.id},i(B(r)),9,$e))),128))],8,Ve),[[_,s.subject_id]])]),e("td",Ue,[b(e("input",{"onUpdate:modelValue":r=>s.periods_per_week=r,type:"number",min:"0",max:"50",class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,8,Fe),[[w,s.periods_per_week,void 0,{number:!0}]])]),e("td",ze,[e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",disabled:f.value,onClick:r=>ie(p)}," Remove ",8,Xe)])]))),128))])])]),e("div",qe,[e("button",{type:"button",class:"rounded-md bg-slate-50 px-3 py-1.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200 hover:bg-slate-100",disabled:f.value,onClick:de}," Add row ",8,Re),e("div",Le,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:f.value,onClick:R}," Cancel ",8,Be),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60",disabled:f.value||U.value||!g.value.length,onClick:ue},i(f.value?"Saving...":"Save vipindi"),9,De)])])]))])])):v("",!0),e("div",Pe,[e("div",Ie,[e("div",Ee,[e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm font-semibold text-gray-800"},"Teachers",-1)),e("p",We,[t[30]||(t[30]=j("Jumla: ",-1)),e("span",He,i(h.teachers.length),1)])])]),e("div",Oe,[e("div",Je,[e("table",Ze,[t[38]||(t[38]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Check No."),e("th",{class:"px-4 py-3"},"Assigned Classes"),e("th",{class:"px-4 py-3"},"Assigned Subjects"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",null,[h.teachers.length===0?(a(),o("tr",Ke,[...t[32]||(t[32]=[e("td",{colspan:"6",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No teachers yet"),e("div",{class:"mt-1 text-xs text-gray-500"},[j("Bado hujaongeza mwalimu. Bonyeza "),e("span",{class:"font-semibold"},"Add Teacher"),j(" kuanza.")])])],-1)])])):v("",!0),(a(!0),o(x,null,y(h.teachers,(s,p)=>(a(),o("tr",{key:s.id,class:be(["border-b border-gray-100 text-xs text-gray-700",p%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",Qe,[e("div",Ye,[e("span",Ge,i(s.name),1),e("span",et,i(s.email),1)])]),e("td",tt,i(s.phone||"—"),1),e("td",st,i(s.check_number||"—"),1),e("td",lt,[s.assigned_classes&&s.assigned_classes.length?(a(),o("div",ot,[(a(!0),o(x,null,y(s.assigned_classes,r=>(a(),o("span",{key:r,class:"rounded bg-gray-100 px-1.5 py-0.5 text-[10px] text-gray-700"},i(r),1))),128))])):(a(),o("span",at,"—"))]),e("td",nt,[s.assigned_subjects&&s.assigned_subjects.length?(a(),o("div",rt,[(a(!0),o(x,null,y(s.assigned_subjects,r=>(a(),o("span",{key:r,class:"rounded bg-emerald-50 px-1.5 py-0.5 text-[10px] text-emerald-800"},i(r),1))),128))])):(a(),o("span",dt,"—"))]),e("td",it,[e("div",ut,[e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Timetable preview",onClick:r=>ne(s)},[...t[33]||(t[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 4h18"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("rect",{x:"3",y:"6",width:"18",height:"16",rx:"2"}),e("path",{d:"M7 10h4"}),e("path",{d:"M7 14h4"}),e("path",{d:"M13 10h4"}),e("path",{d:"M13 14h4"})],-1)])],8,pt),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-amber-50 text-amber-700 ring-1 ring-amber-100 hover:bg-amber-100",title:"Assign vipindi",onClick:r=>re(s)},[...t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,ct),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Details",onClick:r=>te(s)},[...t[35]||(t[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4"}),e("path",{d:"M12 8h.01"})],-1)])],8,bt),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",title:"Edit",onClick:r=>se(s)},[...t[36]||(t[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,mt),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-red-50 text-red-700 ring-1 ring-red-200 hover:bg-red-100",title:"Delete",onClick:r=>oe(s)},[...t[37]||(t[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M19 6l-1 14H6L5 6"}),e("path",{d:"M10 11v6"}),e("path",{d:"M14 11v6"})],-1)])],8,xt)])])],2))),128))])])])])])]),V.value&&u.value?(a(),o("div",gt,[e("div",yt,[e("div",ft,[e("div",null,[t[39]||(t[39]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher timetable preview",-1)),e("p",vt,[j(i(((n=k.value.teacher)==null?void 0:n.name)||u.value.name)+" · Total vipindi kwa wiki: ",1),e("span",ht,i(Q.value),1)])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[2]||(t[2]=s=>V.value=!1)}," × ")]),q.value?(a(),o("div",_t," Loading... ")):(a(),o("div",wt,[e("table",kt,[t[41]||(t[41]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki")])],-1)),e("tbody",null,[k.value.limits.length?v("",!0):(a(),o("tr",jt,[...t[40]||(t[40]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-[11px] text-gray-500"}," Hakuna limitations zilizowekwa kwa huyu mwalimu bado. ",-1)])])),(a(!0),o(x,null,y(k.value.limits,s=>(a(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ct,i(s.class_label),1),e("td",St,[e("div",Mt,i(s.subject_code),1),e("div",At,i(s.subject_name),1)]),e("td",Nt,i(s.periods_per_week),1)]))),128))])])])),e("div",Tt,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[3]||(t[3]=s=>V.value=!1)}," Close ")])])])):v("",!0),N.value&&u.value?(a(),o("div",Vt,[e("div",$t,[e("div",Ut,[t[42]||(t[42]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher details"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Full profile preview for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[4]||(t[4]=s=>N.value=!1)}," × ")]),e("dl",Ft,[e("div",zt,[t[43]||(t[43]=e("dt",{class:"font-semibold text-gray-600"},"Name",-1)),e("dd",Xt,i(u.value.name),1)]),e("div",qt,[t[44]||(t[44]=e("dt",{class:"font-semibold text-gray-600"},"Email",-1)),e("dd",Rt,i(u.value.email),1)]),e("div",Lt,[t[45]||(t[45]=e("dt",{class:"font-semibold text-gray-600"},"Phone",-1)),e("dd",Bt,i(u.value.phone||"—"),1)]),e("div",Dt,[t[46]||(t[46]=e("dt",{class:"font-semibold text-gray-600"},"Check No.",-1)),e("dd",Pt,i(u.value.check_number||"—"),1)]),e("div",It,[t[47]||(t[47]=e("dt",{class:"font-semibold text-gray-600"},"Classes",-1)),e("dd",Et,[u.value.assigned_classes&&u.value.assigned_classes.length?(a(),o("span",Wt,i(u.value.assigned_classes.join(", ")),1)):(a(),o("span",Ht,"—"))])]),e("div",Ot,[t[48]||(t[48]=e("dt",{class:"font-semibold text-gray-600"},"Subjects",-1)),e("dd",Jt,[u.value.assigned_subjects&&u.value.assigned_subjects.length?(a(),o("span",Zt,i(u.value.assigned_subjects.join(", ")),1)):(a(),o("span",Kt,"—"))])])]),e("div",Qt,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[5]||(t[5]=s=>N.value=!1)}," Close ")])])])):v("",!0),M.value&&u.value?(a(),o("div",Yt,[e("div",Gt,[e("div",es,[t[49]||(t[49]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Edit Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Update basic details for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[6]||(t[6]=s=>M.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:I(le,["prevent"])},[e("div",null,[t[50]||(t[50]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>d.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[w,d.name]])]),e("div",ts,[e("div",null,[t[51]||(t[51]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),b(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[w,d.phone]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Check / Registration No.",-1)),b(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>d.check_number=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[w,d.check_number]])])]),e("div",null,[t[53]||(t[53]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Classes (one or more)",-1)),b(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>d.teaching_classes=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[w,d.teaching_classes]])]),e("div",ss,[e("div",null,[t[54]||(t[54]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),b(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>d.class_ids=s),multiple:"",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[(a(!0),o(x,null,y(h.classes,s=>(a(),o("option",{key:s.id,value:s.id},i(L(s)),9,ls))),128))],512),[[_,d.class_ids]]),t[55]||(t[55]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," Chagua darasa (base class tu, bila streams). Masomo yatakayotangazwa chini yata-apply kwa madarasa yote. ",-1))]),e("div",null,[t[56]||(t[56]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),b(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>d.subject_ids=s),multiple:"",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[(a(!0),o(x,null,y(K.value,s=>(a(),o("option",{key:s.id,value:s.id},i(B(s)),9,os))),128))],512),[[_,d.subject_ids]]),t[57]||(t[57]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," Ukichagua masomo na madarasa mengi, masomo hayo yataunganishwa kwa kila darasa. ",-1))])]),e("div",as,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[13]||(t[13]=s=>M.value=!1)}," Cancel "),t[58]||(t[58]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save changes ",-1))])],32)])])):v("",!0),T.value&&u.value?(a(),o("div",ns,[e("div",rs,[t[61]||(t[61]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete teacher?",-1)),e("p",ds,[t[59]||(t[59]=j(" This will remove ",-1)),e("span",is,i(u.value.name),1),t[60]||(t[60]=j(" from the list of teachers. You can re-create them later if needed. ",-1))]),e("div",us,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[14]||(t[14]=s=>T.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:ae}," Delete ")])])])):v("",!0),C.value?(a(),o("div",ps,[e("div",cs,[e("div",bs,[t[62]||(t[62]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Add Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Register a new teacher with contact details and the classes they teach. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[15]||(t[15]=s=>C.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:I(G,["prevent"])},[e("div",null,[t[63]||(t[63]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),b(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>c.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. John Peter Mwakalinga",required:""},null,512),[[w,c.name]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number (optional)",-1)),b(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>c.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX"},null,512),[[w,c.phone]])]),e("div",ms,[e("div",null,[t[65]||(t[65]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),b(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>c.class_ids=s),multiple:"",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[(a(!0),o(x,null,y(h.classes,s=>(a(),o("option",{key:s.id,value:s.id},i(L(s)),9,xs))),128))],512),[[_,c.class_ids]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),b(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>c.subject_ids=s),multiple:"",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[(a(!0),o(x,null,y(Z.value,s=>(a(),o("option",{key:s.id,value:s.id},i(B(s)),9,gs))),128))],512),[[_,c.subject_ids]])])]),e("div",ys,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[20]||(t[20]=s=>C.value=!1)}," Cancel "),t[67]||(t[67]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save Teacher ",-1))])],32)])])):v("",!0),S.value?(a(),o("div",fs,[e("div",vs,[e("div",hs,[t[68]||(t[68]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Import Sample Teachers"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Quickly create 38 sample teachers for a selected class and assign them to subjects. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[21]||(t[21]=s=>S.value=!1)}," × ")]),e("form",{class:"space-y-4",onSubmit:I(ee,["prevent"])},[e("div",null,[t[70]||(t[70]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Class",-1)),b(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>$.class_id=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},[t[69]||(t[69]=e("option",{value:"",disabled:""},"Select class...",-1)),(a(!0),o(x,null,y(h.classes,s=>(a(),o("option",{key:s.id,value:s.id},i(s.name),9,_s))),128))],512),[[_,$.class_id]]),t[71]||(t[71]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," We will generate 38 sample teachers linked to this class and rotate them across subjects. ",-1))]),e("div",ws,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[23]||(t[23]=s=>S.value=!1)}," Cancel "),t[72]||(t[72]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Import Sample Teachers ",-1))])],32)])])):v("",!0)]}),_:1})],64))}};export{Ss as default};

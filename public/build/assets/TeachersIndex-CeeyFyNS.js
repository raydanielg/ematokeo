import{i as p,j as V,n as le,I as ge,c as n,a as ye,u as Ze,h as Ge,w as he,d as b,b as e,o,F as m,r as g,t as i,k,p as ae,v as z,f as j,s as Qe,x as fe,m as B}from"./app-Dhx-yCKK.js";import{_ as et}from"./AuthenticatedLayout-Dss5qv1-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={class:"flex items-center justify-between"},st={class:"flex gap-2"},lt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},at={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},nt={class:"mb-2 flex items-start justify-between gap-3"},ot=["disabled"],rt={class:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-900"},dt={class:"mt-1 flex flex-wrap gap-1"},it={key:0,class:"text-[10px] text-amber-900"},ut={class:"mt-4 flex justify-end"},ct=["disabled"],pt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},bt={class:"w-full max-w-xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},mt={class:"mb-2 flex items-start justify-between gap-3"},xt=["disabled"],gt={class:"max-h-64 space-y-2 overflow-auto rounded-lg border border-gray-200 bg-white p-2"},yt={class:"text-[11px] font-semibold text-amber-900"},ht={class:"mt-1 flex flex-wrap gap-1"},ft={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},vt={class:"mt-4 flex justify-end gap-2"},_t=["disabled"],wt=["disabled"],kt={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},jt={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Ct={class:"mb-3 flex items-start justify-between gap-3"},Nt={class:"mt-0.5 text-[11px] text-gray-500"},St=["disabled"],At={key:0,class:"py-8 text-center text-[11px] text-gray-500"},Tt={key:1,class:"space-y-3"},Mt={class:"overflow-hidden rounded-lg border border-gray-200"},Ft={class:"min-w-full border-collapse text-[11px]"},Xt={key:0},$t={class:"border-b border-gray-100 px-3 py-2"},It=["onUpdate:modelValue"],Vt=["value"],zt={key:0,class:"mt-1"},Bt=["onUpdate:modelValue"],Dt=["value"],Rt={class:"border-b border-gray-100 px-3 py-2"},Ut=["onUpdate:modelValue"],Et=["value"],Lt={class:"border-b border-gray-100 px-3 py-2"},Ot=["onUpdate:modelValue"],qt={class:"border-b border-gray-100 px-3 py-2 text-right"},Wt=["disabled","onClick"],Ht={class:"flex items-center justify-between"},Pt=["disabled"],Jt={class:"flex justify-end gap-2"},Kt=["disabled"],Yt=["disabled"],Zt={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},Gt={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},Qt={class:"mb-4 flex flex-wrap items-center justify-between gap-3"},es={class:"mt-0.5 text-[11px] text-gray-500"},ts={class:"font-semibold text-gray-700"},ss={class:"overflow-hidden rounded-xl border border-gray-200"},ls={class:"overflow-x-auto"},as={class:"min-w-full text-left text-sm"},ns={class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},os={class:"w-10 px-4 py-3"},rs=["checked"],ds={key:0},is={class:"px-4 py-2 align-top"},us=["checked","onChange"],cs={class:"px-3 py-2 align-top"},ps={class:"flex flex-col"},bs={class:"text-gray-800"},ms={class:"text-[10px] text-gray-500"},xs={class:"px-3 py-2 align-top"},gs={class:"px-3 py-2 align-top"},ys={class:"px-3 py-2 align-top"},hs={key:0,class:"flex flex-wrap gap-1"},fs={key:1,class:"text-gray-500"},vs={class:"px-3 py-2 align-top"},_s={key:0,class:"space-y-1"},ws={class:"text-[10px] font-semibold text-emerald-900"},ks={class:"mt-0.5 flex flex-wrap gap-1"},js={key:1,class:"flex flex-wrap gap-1"},Cs={key:2,class:"text-gray-500"},Ns={class:"px-3 py-2 align-top"},Ss={class:"flex justify-end gap-1.5"},As=["onClick"],Ts=["onClick"],Ms=["onClick"],Fs=["onClick"],Xs=["onClick"],$s={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Is={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Vs={class:"mb-3 flex items-center justify-between"},zs={class:"mt-0.5 text-[11px] text-gray-500"},Bs={class:"font-semibold"},Ds={key:0,class:"py-6 text-center text-[11px] text-gray-500"},Rs={key:1,class:"overflow-hidden rounded-lg border border-gray-200"},Us={class:"min-w-full border-collapse text-[11px]"},Es={key:0},Ls={class:"border-b border-gray-100 px-3 py-2"},Os={class:"border-b border-gray-100 px-3 py-2"},qs={class:"font-medium text-gray-800"},Ws={class:"text-[10px] text-gray-500"},Hs={class:"border-b border-gray-100 px-3 py-2 font-semibold"},Ps={class:"mt-4 flex justify-end"},Js={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Ks={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Ys={class:"mb-3 flex items-center justify-between"},Zs={class:"space-y-2 text-[11px] text-gray-700"},Gs={class:"flex justify-between gap-3"},Qs={class:"text-right text-gray-900"},el={class:"flex justify-between gap-3"},tl={class:"text-right"},sl={class:"flex justify-between gap-3"},ll={class:"mt-0.5 text-[11px] font-medium text-gray-900"},al={class:"flex justify-between gap-3"},nl={class:"mt-0.5 text-[11px] font-medium text-gray-900"},ol={class:"col-span-2"},rl={class:"mt-1 flex flex-wrap gap-1"},dl={key:0,class:"text-[11px] text-gray-500"},il={key:0,class:"col-span-2"},ul={class:"mt-1 space-y-2"},cl={class:"text-[10px] font-semibold text-amber-900"},pl={class:"mt-1 space-y-1"},bl={class:"text-[10px] font-semibold text-amber-900"},ml={class:"mt-0.5 flex flex-wrap gap-1"},xl={class:"mt-4 flex justify-end"},gl={key:5,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},yl={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},hl={class:"mb-3 flex items-center justify-between"},fl={class:"grid grid-cols-2 gap-3"},vl={class:"grid grid-cols-2 gap-3"},_l={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},wl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},kl=["checked","onChange"],jl={class:"font-medium text-gray-800"},Cl={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Nl={class:"mt-1 grid grid-cols-2 gap-1"},Sl=["checked","onChange"],Al={class:"text-gray-800"},Tl={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},Ml={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Fl=["checked","onChange"],Xl={class:"font-medium text-gray-800"},$l={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},Il={class:"mt-4 flex justify-end gap-2"},Vl={key:6,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},zl={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Bl={class:"mb-3 text-[11px] text-gray-600"},Dl={class:"font-semibold"},Rl={class:"mt-3 flex justify-end gap-2"},Ul={key:7,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},El={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Ll={class:"mb-3 flex items-center justify-between"},Ol={class:"grid grid-cols-2 gap-3"},ql={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Wl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Hl=["checked","onChange"],Pl={class:"font-medium text-gray-800"},Jl={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Kl={class:"mt-1 grid grid-cols-2 gap-1"},Yl=["checked","onChange"],Zl={class:"text-gray-800"},Gl={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},Ql={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},ea=["checked","onChange"],ta={class:"font-medium text-gray-800"},sa={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},la={class:"mt-4 flex justify-end gap-2"},aa={key:8,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},na={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},oa={class:"mb-3 text-[11px] text-gray-600"},ra={class:"font-semibold"},ca={__name:"TeachersIndex",props:{teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},allClasses:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classSubjectMap:{type:Object,default:()=>({})}},setup(C){const h=C,F=p(!1);p(!1);const R=p(!1),X=p(!1),U=p(!1),E=p(!1),W=p(!1),L=p(!1),H=p(!1),ne=p(!1),P=p(!1),J=p({classId:null,teachers:[],context:null}),N=p(!1),O=p([]),K=p(null),v=p([]),ve=l=>{T(v.value,l)},_e=V(()=>{const l=(h.teachers||[]).map(a=>Number(a.id)).filter(a=>Number.isFinite(a));if(!l.length)return!1;const t=new Set((v.value||[]).map(a=>Number(a)));return l.every(a=>t.has(a))}),we=()=>{const l=(h.teachers||[]).map(s=>Number(s.id)).filter(s=>Number.isFinite(s)),t=new Set((v.value||[]).map(s=>Number(s))),a=l.length>0&&l.every(s=>t.has(s));v.value=a?[]:l},ke=()=>{(v.value||[]).length&&(L.value=!0)},je=()=>{L.value=!1},Ce=()=>{(v.value||[]).length&&B.post(route("teachers.bulk-destroy"),{teacher_ids:v.value},{preserveScroll:!0,onSuccess:()=>{v.value=[],L.value=!1}})},x=le({name:"",phone:"",class_ids:[],subject_ids:[]}),S=p([]),u=le({id:null,name:"",phone:"",check_number:"",teaching_classes:"",class_ids:[],subject_ids:[]}),A=p([]),Y=l=>{var s;const t=(l||[]).map(r=>Number(r)).filter(r=>Number.isFinite(r));if(!t.length)return null;const a=new Set;for(const r of t){const d=Array.isArray((s=h.classSubjectMap)==null?void 0:s[r])?h.classSubjectMap[r]:[];for(const y of d){const f=Number(y);Number.isFinite(f)&&a.add(f)}}return a.size?a:null},$=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(h.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:Number(a.id),label:D(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},oe=(l,t)=>{const a=new Set;for(const s of l||[])for(const r of $(s))a.add(Number(r.id));return(t||[]).filter(s=>a.has(Number(s)))},re=(l,t)=>{const a=new Set((t||[]).map(r=>Number(r)).filter(r=>Number.isFinite(r))),s=new Set;for(const r of l||[]){const d=Number(r);if(!Number.isFinite(d)||d<=0)continue;const y=$(d);if(!y.length){s.add(d);continue}const f=y.filter(M=>a.has(Number(M.id)));if(f.length)for(const M of f)s.add(Number(M.id));else for(const M of y)s.add(Number(M.id))}return Array.from(s)},Z=V(()=>re(S.value,x.class_ids)),G=V(()=>re(A.value,u.class_ids)),de=(l,t)=>{O.value=Array.isArray(l)?l:[],K.value=typeof t=="function"?t:null,H.value=!0},Q=()=>{N.value||(H.value=!1,O.value=[],K.value=null)},Ne=()=>{if(N.value)return;const l=K.value;Q(),l&&l()},ie=async({classIds:l,subjectIds:t,excludeTeacherId:a})=>{var s;N.value=!0;try{const d=await(await fetch(route("teachers.assignment-conflicts"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({class_ids:l,subject_ids:t,exclude_teacher_id:a||void 0})})).json();return Array.isArray(d==null?void 0:d.conflicts)?d.conflicts:[]}catch{return[]}finally{N.value=!1}},T=(l,t)=>{const a=Number(t);if(!Number.isFinite(a))return;const s=l.findIndex(r=>Number(r)===a);s===-1?l.push(a):l.splice(s,1)},Se=l=>T(x.class_ids,l),Ae=l=>T(x.subject_ids,l),Te=l=>T(u.class_ids,l),Me=l=>T(u.subject_ids,l),ue=()=>{P.value||(ne.value=!1,J.value={classId:null,teachers:[],context:null})},Fe=()=>{ue()},Xe=l=>{T(S.value,l),x.class_ids=oe(S.value,x.class_ids),x.subject_ids=[]},$e=l=>{T(A.value,l),u.class_ids=oe(A.value,u.class_ids),u.subject_ids=[]},Ie=async l=>{const t=Number(l);Number.isFinite(t)&&Se(t)},Ve=async l=>{const t=Number(l);Number.isFinite(t)&&Te(t)},ce=l=>{const t=Y(l);return t?(h.subjects||[]).filter(a=>t.has(Number(a.id))):h.subjects||[]},pe=V(()=>ce(Z.value)),be=V(()=>ce(G.value));ge(()=>[S.value,x.class_ids],()=>{const l=Y(Z.value);if(!l){x.subject_ids=[];return}x.subject_ids=(x.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0}),ge(()=>[A.value,u.class_ids],()=>{const l=Y(G.value);if(!l){u.subject_ids=[];return}u.subject_ids=(u.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0}),le({class_id:""});const c=p(null),ee=p(!1),I=p({teacher:null,limits:[]}),q=p(!1),w=p(!1),_=p([]),me=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(h.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:a.id,label:D(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},ze=l=>{var s;const t=Number(l);if(!Number.isFinite(t)||t<=0)return null;const a=Array.isArray((s=h.classSubjectMap)==null?void 0:s[t])?h.classSubjectMap[t]:null;return a?new Set(a.map(r=>Number(r)).filter(r=>Number.isFinite(r))):null},Be=l=>{const t=l.stream_id?Number(l.stream_id):Number(l.base_class_id),a=ze(t);return a?(h.subjects||[]).filter(s=>a.has(Number(s.id))):h.subjects||[]},De=V(()=>{var l;return(((l=I.value)==null?void 0:l.limits)||[]).reduce((t,a)=>t+(Number(a.periods_per_week)||0),0)}),xe=()=>{x.name="",x.phone="",x.class_ids=[],x.subject_ids=[],S.value=[]},Re=async()=>{const l=Z.value,t={name:x.name,phone:x.phone,class_ids:l,subject_ids:x.subject_ids};if(t.class_ids.length&&t.subject_ids.length){const a=await ie({classIds:t.class_ids,subjectIds:t.subject_ids,excludeTeacherId:null});if(a.length){de(a,()=>{B.post(route("teachers.store"),t,{preserveScroll:!0,onSuccess:()=>{xe(),F.value=!1}})});return}}B.post(route("teachers.store"),t,{preserveScroll:!0,onSuccess:()=>{xe(),F.value=!1}})},Ue=l=>{c.value=l,R.value=!0},Ee=l=>{c.value=l,u.id=l.id,u.name=l.name,u.phone=l.phone,u.check_number=l.check_number,u.teaching_classes=l.teaching_classes,u.class_ids=Array.isArray(l.assigned_stream_class_ids)?[...l.assigned_stream_class_ids]:[],u.subject_ids=Array.isArray(l.assigned_subject_ids)?[...l.assigned_subject_ids]:[];const t=new Set;for(const a of u.class_ids||[]){const s=(h.allClasses||[]).find(d=>Number(d.id)===Number(a)),r=s!=null&&s.parent_class_id?Number(s.parent_class_id):Number(a);Number.isFinite(r)&&r>0&&t.add(r)}A.value=Array.from(t),X.value=!0},Le=async()=>{if(!u.id)return;const l=G.value,t={name:u.name,phone:u.phone,check_number:u.check_number,class_ids:l,subject_ids:u.subject_ids};if(t.class_ids.length&&t.subject_ids.length){const a=await ie({classIds:t.class_ids,subjectIds:t.subject_ids,excludeTeacherId:u.id});if(a.length){de(a,()=>{B.put(route("teachers.update",u.id),t,{preserveScroll:!0,onSuccess:()=>{X.value=!1}})});return}}B.put(route("teachers.update",u.id),t,{preserveScroll:!0,onSuccess:()=>{X.value=!1}})},Oe=l=>{c.value=l,U.value=!0},qe=()=>{c.value&&B.delete(route("teachers.destroy",c.value.id),{preserveScroll:!0,onSuccess:()=>{U.value=!1}})},We=async l=>{c.value=l,E.value=!0,ee.value=!0;try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();I.value={teacher:(a==null?void 0:a.teacher)||{id:l.id,name:l.name},limits:Array.isArray(a==null?void 0:a.limits)?a.limits:[]}}catch{I.value={teacher:{id:l.id,name:l.name},limits:[]}}finally{ee.value=!1}},He=async l=>{c.value=l,W.value=!0,q.value=!0,_.value=[];try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json(),s=Array.isArray(a==null?void 0:a.limits)?a.limits:[];_.value=s.map(r=>{const d=Number(r.school_class_id)||"",y=(h.allClasses||[]).find(Ye=>Number(Ye.id)===Number(d)),f=y!=null&&y.parent_class_id?Number(y.parent_class_id):d,M=y!=null&&y.parent_class_id?d:"";return{base_class_id:f||"",stream_id:M||"",subject_id:Number(r.subject_id)||"",periods_per_week:Number(r.periods_per_week)||0}})}catch{_.value=[]}finally{q.value=!1}},te=()=>{w.value||(W.value=!1,_.value=[])},Pe=()=>{_.value=[..._.value,{base_class_id:"",stream_id:"",subject_id:"",periods_per_week:0}]},Je=l=>{_.value=_.value.filter((t,a)=>a!==l)},Ke=async()=>{var t;if(!c.value||w.value)return;const l=(_.value||[]).map(a=>{const s=a.stream_id?Number(a.stream_id):Number(a.base_class_id),r=a.periods_per_week===""||a.periods_per_week===null||typeof a.periods_per_week>"u"?0:Number(a.periods_per_week);return{school_class_id:s,subject_id:Number(a.subject_id),teacher_id:Number(c.value.id),periods_per_week:Number.isFinite(r)&&r>=0?r:0}}).filter(a=>Number.isFinite(a.school_class_id)&&a.school_class_id>0).filter(a=>Number.isFinite(a.subject_id)&&a.subject_id>0);if(l.length){w.value=!0;try{await fetch(route("timetables.weekly-limits.save"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({limits:l})}),te()}finally{w.value=!1}}},D=l=>{const t=l!=null&&l.name?String(l.name).trim():"",a=l!=null&&l.level?String(l.level).trim():"";return t||a},se=l=>{const t=l!=null&&l.subject_code?String(l.subject_code).trim():"",a=l!=null&&l.name?String(l.name).trim():"";return t&&a?`${t} - ${a}`:t||a};return(l,t)=>(o(),n(m,null,[ye(Ze(Ge),{title:"Teachers"}),ye(et,null,{header:he(()=>[e("div",tt,[t[15]||(t[15]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all registered teachers with their contact details, registration number and assigned classes. ")],-1)),e("div",st,[e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:t[0]||(t[0]=a=>F.value=!0)}," Add Teacher "),v.value.length?(o(),n("button",{key:0,type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-red-700",onClick:ke}," Delete selected ("+i(v.value.length)+") ",1)):b("",!0)])])]),default:he(()=>{var a;return[ne.value?(o(),n("div",lt,[e("div",at,[e("div",nt,[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"This class already has teacher(s)"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa hili tayari lina mwalimu. Mfumo unaruhusu walimu zaidi ya mmoja. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:P.value,onClick:ue}," × ",8,ot)]),e("div",rt,[t[17]||(t[17]=e("div",{class:"font-semibold"},"Existing teacher(s):",-1)),e("div",dt,[(o(!0),n(m,null,g(J.value.teachers||[],s=>(o(),n("span",{key:s.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(s.name),1))),128)),(J.value.teachers||[]).length?b("",!0):(o(),n("span",it," — "))])]),e("div",ut,[e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:P.value,onClick:Fe}," OK ",8,ct)])])])):b("",!0),H.value?(o(),n("div",pt,[e("div",bt,[e("div",mt,[t[18]||(t[18]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Taarifa: tayari kuna mwalimu"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa/stream na somo hili tayari lina mwalimu. Unataka kuruhusu walimu wawili (au zaidi) wafundishe pamoja? ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:N.value,onClick:Q}," × ",8,xt)]),e("div",gt,[(o(!0),n(m,null,g(O.value,s=>(o(),n("div",{key:`${s.class_id}-${s.subject_id}`,class:"rounded-md border border-amber-200 bg-amber-50 p-2"},[e("div",yt,i(s.class_label)+" · "+i(s.subject_label),1),e("div",ht,[(o(!0),n(m,null,g(s.teachers||[],r=>(o(),n("span",{key:r.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(r.name),1))),128))])]))),128)),O.value.length?b("",!0):(o(),n("div",ft," No conflicts. "))]),e("div",vt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:N.value,onClick:Q}," Cancel ",8,_t),e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:N.value,onClick:Ne}," Ruhusu wawili (Endelea) ",8,wt)])])])):b("",!0),W.value&&c.value?(o(),n("div",kt,[e("div",jt,[e("div",Ct,[e("div",null,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Assign vipindi (weekly limits)",-1)),e("p",Nt,i(c.value.name)+" · Weka vipindi kwa wiki kwa kila darasa na somo. ",1)]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:w.value,onClick:te}," × ",8,St)]),q.value?(o(),n("div",At," Loading... ")):(o(),n("div",Tt,[e("div",Mt,[e("table",Ft,[t[24]||(t[24]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki"),e("th",{class:"border-b border-gray-200 px-3 py-2"})])],-1)),e("tbody",null,[_.value.length?b("",!0):(o(),n("tr",Xt,[...t[20]||(t[20]=[e("td",{colspan:"4",class:"px-3 py-6 text-center text-[11px] text-gray-500"},' Hakuna row bado. Bonyeza "Add row" kuongeza. ',-1)])])),(o(!0),n(m,null,g(_.value,(s,r)=>(o(),n("tr",{key:r,class:"hover:bg-gray-50"},[e("td",$t,[k(e("select",{"onUpdate:modelValue":d=>s.base_class_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[21]||(t[21]=e("option",{value:""},"Select class...",-1)),(o(!0),n(m,null,g(C.classes,d=>(o(),n("option",{key:d.id,value:d.id},i(D(d)),9,Vt))),128))],8,It),[[ae,s.base_class_id]]),me(s.base_class_id).length?(o(),n("div",zt,[k(e("select",{"onUpdate:modelValue":d=>s.stream_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[22]||(t[22]=e("option",{value:""},"No stream (base class)",-1)),(o(!0),n(m,null,g(me(s.base_class_id),d=>(o(),n("option",{key:d.id,value:d.id},i(d.label),9,Dt))),128))],8,Bt),[[ae,s.stream_id]])])):b("",!0)]),e("td",Rt,[k(e("select",{"onUpdate:modelValue":d=>s.subject_id=d,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[23]||(t[23]=e("option",{value:""},"Select subject...",-1)),(o(!0),n(m,null,g(Be(s),d=>(o(),n("option",{key:d.id,value:d.id},i(se(d)),9,Et))),128))],8,Ut),[[ae,s.subject_id]])]),e("td",Lt,[k(e("input",{"onUpdate:modelValue":d=>s.periods_per_week=d,type:"number",min:"0",max:"50",class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,8,Ot),[[z,s.periods_per_week,void 0,{number:!0}]])]),e("td",qt,[e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",disabled:w.value,onClick:d=>Je(r)}," Remove ",8,Wt)])]))),128))])])]),e("div",Ht,[e("button",{type:"button",class:"rounded-md bg-slate-50 px-3 py-1.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200 hover:bg-slate-100",disabled:w.value,onClick:Pe}," Add row ",8,Pt),e("div",Jt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:w.value,onClick:te}," Cancel ",8,Kt),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60",disabled:w.value||q.value||!_.value.length,onClick:Ke},i(w.value?"Saving...":"Save vipindi"),9,Yt)])])]))])])):b("",!0),e("div",Zt,[e("div",Gt,[e("div",Qt,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-sm font-semibold text-gray-800"},"Teachers",-1)),e("p",es,[t[25]||(t[25]=j("Jumla: ",-1)),e("span",ts,i(C.teachers.length),1)])])]),e("div",ss,[e("div",ls,[e("table",as,[e("thead",null,[e("tr",ns,[e("th",os,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:_e.value,onChange:we},null,40,rs)]),t[27]||(t[27]=e("th",{class:"px-4 py-3"},"Name",-1)),t[28]||(t[28]=e("th",{class:"px-4 py-3"},"Phone",-1)),t[29]||(t[29]=e("th",{class:"px-4 py-3"},"Check No.",-1)),t[30]||(t[30]=e("th",{class:"px-4 py-3"},"Assigned Classes",-1)),t[31]||(t[31]=e("th",{class:"px-4 py-3"},"Assigned Subjects",-1)),t[32]||(t[32]=e("th",{class:"px-4 py-3 text-right"},"Actions",-1))])]),e("tbody",null,[C.teachers.length===0?(o(),n("tr",ds,[...t[33]||(t[33]=[e("td",{colspan:"7",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No teachers yet"),e("div",{class:"mt-1 text-xs text-gray-500"},[j("Bado hujaongeza mwalimu. Bonyeza "),e("span",{class:"font-semibold"},"Add Teacher"),j(" kuanza.")])])],-1)])])):b("",!0),(o(!0),n(m,null,g(C.teachers,(s,r)=>(o(),n("tr",{key:s.id,class:Qe(["border-b border-gray-100 text-xs text-gray-700",r%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",is,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:v.value.map(d=>Number(d)).includes(Number(s.id)),onChange:d=>ve(s.id)},null,40,us)]),e("td",cs,[e("div",ps,[e("span",bs,i(s.name),1),e("span",ms,i(s.email),1)])]),e("td",xs,i(s.phone||"—"),1),e("td",gs,i(s.check_number||"—"),1),e("td",ys,[s.assigned_classes&&s.assigned_classes.length?(o(),n("div",hs,[(o(!0),n(m,null,g(s.assigned_classes,d=>(o(),n("span",{key:d,class:"rounded bg-gray-100 px-1.5 py-0.5 text-[10px] text-gray-700"},i(d),1))),128))])):(o(),n("span",fs,"—"))]),e("td",vs,[s.assigned_class_subjects&&Object.keys(s.assigned_class_subjects).length?(o(),n("div",_s,[(o(!0),n(m,null,g(s.assigned_class_subjects,(d,y)=>(o(),n("div",{key:y,class:"rounded-md border border-emerald-100 bg-emerald-50/40 px-2 py-1"},[e("div",ws,i(y),1),e("div",ks,[(o(!0),n(m,null,g(d,f=>(o(),n("span",{key:`${y}-${f}`,class:"rounded bg-white/70 px-1.5 py-0.5 text-[10px] text-emerald-800 ring-1 ring-emerald-100"},i(f),1))),128))])]))),128))])):s.assigned_subjects&&s.assigned_subjects.length?(o(),n("div",js,[(o(!0),n(m,null,g(s.assigned_subjects,d=>(o(),n("span",{key:d,class:"rounded bg-emerald-50 px-1.5 py-0.5 text-[10px] text-emerald-800"},i(d),1))),128))])):(o(),n("span",Cs,"—"))]),e("td",Ns,[e("div",Ss,[e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Timetable preview",onClick:d=>We(s)},[...t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 4h18"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("rect",{x:"3",y:"6",width:"18",height:"16",rx:"2"}),e("path",{d:"M7 10h4"}),e("path",{d:"M7 14h4"}),e("path",{d:"M13 10h4"}),e("path",{d:"M13 14h4"})],-1)])],8,As),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-amber-50 text-amber-700 ring-1 ring-amber-100 hover:bg-amber-100",title:"Assign vipindi",onClick:d=>He(s)},[...t[35]||(t[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,Ts),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Details",onClick:d=>Ue(s)},[...t[36]||(t[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4"}),e("path",{d:"M12 8h.01"})],-1)])],8,Ms),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",title:"Edit",onClick:d=>Ee(s)},[...t[37]||(t[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,Fs),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-red-50 text-red-700 ring-1 ring-red-200 hover:bg-red-100",title:"Delete",onClick:d=>Oe(s)},[...t[38]||(t[38]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M19 6l-1 14H6L5 6"}),e("path",{d:"M10 11v6"}),e("path",{d:"M14 11v6"})],-1)])],8,Xs)])])],2))),128))])])])])])]),E.value&&c.value?(o(),n("div",$s,[e("div",Is,[e("div",Vs,[e("div",null,[t[39]||(t[39]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher timetable preview",-1)),e("p",zs,[j(i(((a=I.value.teacher)==null?void 0:a.name)||c.value.name)+" · Total vipindi kwa wiki: ",1),e("span",Bs,i(De.value),1)])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[1]||(t[1]=s=>E.value=!1)}," × ")]),ee.value?(o(),n("div",Ds," Loading... ")):(o(),n("div",Rs,[e("table",Us,[t[41]||(t[41]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki")])],-1)),e("tbody",null,[I.value.limits.length?b("",!0):(o(),n("tr",Es,[...t[40]||(t[40]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-[11px] text-gray-500"}," Hakuna limitations zilizowekwa kwa huyu mwalimu bado. ",-1)])])),(o(!0),n(m,null,g(I.value.limits,s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ls,i(s.class_label),1),e("td",Os,[e("div",qs,i(s.subject_code),1),e("div",Ws,i(s.subject_name),1)]),e("td",Hs,i(s.periods_per_week),1)]))),128))])])])),e("div",Ps,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[2]||(t[2]=s=>E.value=!1)}," Close ")])])])):b("",!0),R.value&&c.value?(o(),n("div",Js,[e("div",Ks,[e("div",Ys,[t[42]||(t[42]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher details"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Full profile preview for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[3]||(t[3]=s=>R.value=!1)}," × ")]),e("dl",Zs,[e("div",Gs,[t[43]||(t[43]=e("dt",{class:"font-semibold text-gray-600"},"Name",-1)),e("dd",Qs,i(c.value.name),1)]),e("div",el,[t[44]||(t[44]=e("dt",{class:"font-semibold text-gray-600"},"Email",-1)),e("dd",tl,i(c.value.email),1)]),e("div",sl,[t[45]||(t[45]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Phone",-1)),e("dd",ll,i(c.value.phone||"—"),1)]),e("div",al,[t[46]||(t[46]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Check No.",-1)),e("dd",nl,i(c.value.check_number||"—"),1)]),e("div",ol,[t[47]||(t[47]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Assigned classes",-1)),e("dd",rl,[(o(!0),n(m,null,g(c.value.assigned_classes||[],s=>(o(),n("span",{key:s,class:"rounded bg-gray-100 px-2 py-0.5 text-[10px] text-gray-700"},i(s),1))),128)),(c.value.assigned_classes||[]).length?b("",!0):(o(),n("span",dl,"—"))])]),c.value.collaborations&&Object.keys(c.value.collaborations).length?(o(),n("div",il,[t[48]||(t[48]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Anaeshirikiana nae (same class & subject)",-1)),e("dd",ul,[(o(!0),n(m,null,g(c.value.collaborations,(s,r)=>(o(),n("div",{key:r,class:"rounded-lg border border-amber-200 bg-amber-50/50 p-2"},[e("div",cl,i(r),1),e("div",pl,[(o(!0),n(m,null,g(s,(d,y)=>(o(),n("div",{key:`${r}-${y}`},[e("div",bl,i(y),1),e("div",ml,[(o(!0),n(m,null,g(d,f=>(o(),n("span",{key:f.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(f.name),1))),128))])]))),128))])]))),128))])])):b("",!0)]),e("div",xl,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[4]||(t[4]=s=>R.value=!1)}," Close ")])])])):b("",!0),X.value&&c.value?(o(),n("div",gl,[e("div",yl,[e("div",hl,[t[49]||(t[49]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Edit Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Update basic details for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[5]||(t[5]=s=>X.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:fe(Le,["prevent"])},[e("div",null,[t[50]||(t[50]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[z,u.name]])]),e("div",fl,[e("div",null,[t[51]||(t[51]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),k(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>u.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[z,u.phone]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Check / Registration No.",-1)),k(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>u.check_number=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"TCH-XXXXXX (optional)"},null,512),[[z,u.check_number]])])]),e("div",vl,[e("div",null,[t[54]||(t[54]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",_l,[(o(!0),n(m,null,g(C.classes,s=>(o(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",wl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:A.value.includes(s.id),onChange:r=>$e(s.id)},null,40,kl),e("span",jl,i(D(s)),1)]),A.value.includes(s.id)?(o(),n("div",Cl,[t[53]||(t[53]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Nl,[(o(!0),n(m,null,g($(s.id),r=>(o(),n("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:u.class_ids.includes(r.id),onChange:d=>Ve(r.id)},null,40,Sl),e("span",Al,i(r.label),1)]))),128)),$(s.id).length?b("",!0):(o(),n("div",Tl," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))]),t[55]||(t[55]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[56]||(t[56]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",Ml,[(o(!0),n(m,null,g(be.value,s=>(o(),n("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:u.subject_ids.includes(s.id),onChange:r=>Me(s.id)},null,40,Fl),e("span",Xl,i(se(s)),1)]))),128)),be.value.length?b("",!0):(o(),n("div",$l," Chagua stream kwanza ili masomo yaonekane. "))]),t[57]||(t[57]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Masomo yanatokana na streams ulizochagua.",-1))])]),e("div",Il,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[9]||(t[9]=s=>X.value=!1)}," Cancel "),t[58]||(t[58]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save changes ",-1))])],32)])])):b("",!0),U.value&&c.value?(o(),n("div",Vl,[e("div",zl,[t[61]||(t[61]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete teacher?",-1)),e("p",Bl,[t[59]||(t[59]=j(" This will remove ",-1)),e("span",Dl,i(c.value.name),1),t[60]||(t[60]=j(" from the list of teachers. You can re-create them later if needed. ",-1))]),e("div",Rl,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[10]||(t[10]=s=>U.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:qe}," Delete ")])])])):b("",!0),F.value?(o(),n("div",Ul,[e("div",El,[e("div",Ll,[t[62]||(t[62]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Add Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Register a new teacher with contact details and the classes they teach. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[11]||(t[11]=s=>F.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:fe(Re,["prevent"])},[e("div",null,[t[63]||(t[63]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),k(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>x.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. John Peter Mwakalinga",required:""},null,512),[[z,x.name]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),k(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>x.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[z,x.phone]])]),e("div",Ol,[e("div",null,[t[66]||(t[66]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",ql,[(o(!0),n(m,null,g(C.classes,s=>(o(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",Wl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:S.value.includes(s.id),onChange:r=>Xe(s.id)},null,40,Hl),e("span",Pl,i(D(s)),1)]),S.value.includes(s.id)?(o(),n("div",Jl,[t[65]||(t[65]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Kl,[(o(!0),n(m,null,g($(s.id),r=>(o(),n("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:x.class_ids.includes(r.id),onChange:d=>Ie(r.id)},null,40,Yl),e("span",Zl,i(r.label),1)]))),128)),$(s.id).length?b("",!0):(o(),n("div",Gl," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))]),t[67]||(t[67]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[68]||(t[68]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",Ql,[(o(!0),n(m,null,g(pe.value,s=>(o(),n("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:x.subject_ids.includes(s.id),onChange:r=>Ae(s.id)},null,40,ea),e("span",ta,i(se(s)),1)]))),128)),pe.value.length?b("",!0):(o(),n("div",sa," Chagua stream kwanza ili masomo yaonekane. "))]),t[69]||(t[69]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Masomo yanatokana na streams ulizochagua.",-1))])]),e("div",la,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[14]||(t[14]=s=>F.value=!1)}," Cancel "),t[70]||(t[70]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save Teacher ",-1))])],32)])])):b("",!0),L.value?(o(),n("div",aa,[e("div",na,[t[73]||(t[73]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete selected teachers?",-1)),e("p",oa,[t[71]||(t[71]=j(" You are about to delete ",-1)),e("span",ra,i(v.value.length),1),t[72]||(t[72]=j(" teacher(s). This will also remove their class/subject assignments. ",-1))]),e("div",{class:"mt-3 flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:je}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:Ce}," Delete ")])])])):b("",!0)]}),_:1})],64))}};export{ca as default};

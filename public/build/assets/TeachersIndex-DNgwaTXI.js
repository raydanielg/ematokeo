import{i as x,n as W,j as J,I as te,c as a,a as se,u as Ae,h as Me,w as le,d as b,b as e,o as d,t as u,F as m,r as g,k as h,p as q,v as C,f as S,s as Te,x as Z,m as L}from"./app-CC2Hpgx9.js";import{_ as Fe}from"./AuthenticatedLayout-C6xW3B-1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $e={class:"flex items-center justify-between"},Ve={class:"flex gap-2"},Ie={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},ze={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Be={class:"mb-3 flex items-start justify-between gap-3"},Ue={class:"mt-0.5 text-[11px] text-gray-500"},Xe=["disabled"],Re={key:0,class:"py-8 text-center text-[11px] text-gray-500"},qe={key:1,class:"space-y-3"},Le={class:"overflow-hidden rounded-lg border border-gray-200"},De={class:"min-w-full border-collapse text-[11px]"},Ee={key:0},Oe={class:"border-b border-gray-100 px-3 py-2"},Pe=["onUpdate:modelValue"],He=["value"],We={key:0,class:"mt-1"},Je=["onUpdate:modelValue"],Ze=["value"],Ke={class:"border-b border-gray-100 px-3 py-2"},Qe=["onUpdate:modelValue"],Ye=["value"],Ge={class:"border-b border-gray-100 px-3 py-2"},et=["onUpdate:modelValue"],tt={class:"border-b border-gray-100 px-3 py-2 text-right"},st=["disabled","onClick"],lt={class:"flex items-center justify-between"},ot=["disabled"],at={class:"flex justify-end gap-2"},dt=["disabled"],rt=["disabled"],nt={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},it={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},ut={class:"mb-4 flex flex-wrap items-center justify-between gap-3"},ct={class:"mt-0.5 text-[11px] text-gray-500"},pt={class:"font-semibold text-gray-700"},bt={class:"overflow-hidden rounded-xl border border-gray-200"},mt={class:"overflow-x-auto"},xt={class:"min-w-full text-left text-sm"},gt={key:0},yt={class:"px-3 py-2 align-top"},ft={class:"flex flex-col"},vt={class:"text-gray-800"},ht={class:"text-[10px] text-gray-500"},_t={class:"px-3 py-2 align-top"},wt={class:"px-3 py-2 align-top"},kt={class:"px-3 py-2 align-top"},jt={key:0,class:"flex flex-wrap gap-1"},Ct={key:1,class:"text-gray-500"},St={class:"px-3 py-2 align-top"},Nt={key:0,class:"flex flex-wrap gap-1"},At={key:1,class:"text-gray-500"},Mt={class:"px-3 py-2 align-top"},Tt={class:"flex justify-end gap-1.5"},Ft=["onClick"],$t=["onClick"],Vt=["onClick"],It=["onClick"],zt=["onClick"],Bt={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Ut={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Xt={class:"mb-3 flex items-center justify-between"},Rt={class:"mt-0.5 text-[11px] text-gray-500"},qt={class:"font-semibold"},Lt={key:0,class:"py-6 text-center text-[11px] text-gray-500"},Dt={key:1,class:"overflow-hidden rounded-lg border border-gray-200"},Et={class:"min-w-full border-collapse text-[11px]"},Ot={key:0},Pt={class:"border-b border-gray-100 px-3 py-2"},Ht={class:"border-b border-gray-100 px-3 py-2"},Wt={class:"font-medium text-gray-800"},Jt={class:"text-[10px] text-gray-500"},Zt={class:"border-b border-gray-100 px-3 py-2 font-semibold"},Kt={class:"mt-4 flex justify-end"},Qt={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Yt={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Gt={class:"mb-3 flex items-center justify-between"},es={class:"space-y-2 text-[11px] text-gray-700"},ts={class:"flex justify-between gap-3"},ss={class:"text-right text-gray-900"},ls={class:"flex justify-between gap-3"},os={class:"text-right"},as={class:"flex justify-between gap-3"},ds={class:"text-right"},rs={class:"flex justify-between gap-3"},ns={class:"text-right"},is={class:"flex justify-between gap-3"},us={class:"max-w-[60%] text-right"},cs={key:0},ps={key:1},bs={class:"flex justify-between gap-3"},ms={class:"max-w-[60%] text-right"},xs={key:0},gs={key:1},ys={class:"mt-4 flex justify-end"},fs={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},vs={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},hs={class:"mb-3 flex items-center justify-between"},_s={class:"grid grid-cols-2 gap-3"},ws={class:"grid grid-cols-2 gap-3"},ks={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},js={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Cs=["checked","onChange"],Ss={class:"font-medium text-gray-800"},Ns={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},As={class:"mt-1 grid grid-cols-2 gap-1"},Ms=["checked","onChange"],Ts={class:"text-gray-800"},Fs={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},$s={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Vs=["checked","onChange"],Is={class:"font-medium text-gray-800"},zs={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},Bs={class:"mt-4 flex justify-end gap-2"},Us={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Xs={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Rs={class:"mb-3 text-[11px] text-gray-600"},qs={class:"font-semibold"},Ls={class:"mt-3 flex justify-end gap-2"},Ds={key:5,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Es={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Os={class:"mb-3 flex items-center justify-between"},Ps={class:"grid grid-cols-2 gap-3"},Hs={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Ws={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Js=["checked","onChange"],Zs={class:"font-medium text-gray-800"},Ks={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Qs={class:"mt-1 grid grid-cols-2 gap-1"},Ys=["checked","onChange"],Gs={class:"text-gray-800"},el={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},tl={class:"max-h-44 space-y-1 overflow-auto rounded-md border border-gray-200 bg-white p-2"},sl=["checked","onChange"],ll={class:"font-medium text-gray-800"},ol={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},al={class:"mt-4 flex justify-end gap-2"},dl={key:6,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},rl={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},nl={class:"mb-3 flex items-center justify-between"},il=["value"],ul={class:"mt-2 flex justify-end gap-2"},ml={__name:"TeachersIndex",props:{teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},allClasses:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classSubjectMap:{type:Object,default:()=>({})}},setup(w){const y=w,N=x(!1),A=x(!1),I=x(!1),M=x(!1),z=x(!1),B=x(!1),D=x(!1),p=W({name:"",phone:"",class_ids:[],subject_ids:[]}),T=x([]),i=W({id:null,name:"",phone:"",check_number:"",teaching_classes:"",class_ids:[],subject_ids:[]}),F=x([]),E=l=>{var s;const t=(l||[]).map(r=>Number(r)).filter(r=>Number.isFinite(r));if(!t.length)return null;const o=new Set;for(const r of t){const n=Array.isArray((s=y.classSubjectMap)==null?void 0:s[r])?y.classSubjectMap[r]:[];for(const _ of n){const R=Number(_);Number.isFinite(R)&&o.add(R)}}return o.size?o:null},$=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(y.allClasses||[]).filter(o=>Number(o.parent_class_id)===t).map(o=>({id:Number(o.id),label:V(o)})).sort((o,s)=>String(o.label).localeCompare(String(s.label)))},K=(l,t)=>{const o=new Set;for(const s of l||[])for(const r of $(s))o.add(Number(r.id));return(t||[]).filter(s=>o.has(Number(s)))},k=(l,t)=>{const o=Number(t);if(!Number.isFinite(o))return;const s=l.findIndex(r=>Number(r)===o);s===-1?l.push(o):l.splice(s,1)},oe=l=>k(p.class_ids,l),ae=l=>k(p.subject_ids,l),de=l=>k(i.class_ids,l),re=l=>k(i.subject_ids,l),ne=l=>{k(T.value,l),p.class_ids=K(T.value,p.class_ids),p.subject_ids=[]},ie=l=>{k(F.value,l),i.class_ids=K(F.value,i.class_ids),i.subject_ids=[]},Q=l=>{const t=E(l);return t?(y.subjects||[]).filter(o=>t.has(Number(o.id))):y.subjects||[]},Y=J(()=>Q(p.class_ids)),G=J(()=>Q(i.class_ids));te(()=>p.class_ids,()=>{const l=E(p.class_ids);if(!l){p.subject_ids=[];return}p.subject_ids=(p.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0}),te(()=>i.class_ids,()=>{const l=E(i.class_ids);if(!l){i.subject_ids=[];return}i.subject_ids=(i.subject_ids||[]).filter(t=>l.has(Number(t)))},{deep:!0});const U=W({class_id:""}),c=x(null),O=x(!1),j=x({teacher:null,limits:[]}),X=x(!1),v=x(!1),f=x([]),ee=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(y.allClasses||[]).filter(o=>Number(o.parent_class_id)===t).map(o=>({id:o.id,label:V(o)})).sort((o,s)=>String(o.label).localeCompare(String(s.label)))},ue=l=>{var s;const t=Number(l);if(!Number.isFinite(t)||t<=0)return null;const o=Array.isArray((s=y.classSubjectMap)==null?void 0:s[t])?y.classSubjectMap[t]:null;return o?new Set(o.map(r=>Number(r)).filter(r=>Number.isFinite(r))):null},ce=l=>{const t=l.stream_id?Number(l.stream_id):Number(l.base_class_id),o=ue(t);return o?(y.subjects||[]).filter(s=>o.has(Number(s.id))):y.subjects||[]},pe=J(()=>{var l;return(((l=j.value)==null?void 0:l.limits)||[]).reduce((t,o)=>t+(Number(o.periods_per_week)||0),0)}),be=()=>{p.name="",p.phone="",p.class_ids=[],p.subject_ids=[],T.value=[]},me=()=>{L.post(route("teachers.store"),p,{preserveScroll:!0,onSuccess:()=>{be(),N.value=!1}})},xe=()=>{U.class_id&&L.post(route("teachers.import-samples"),U,{preserveScroll:!0,onSuccess:()=>{A.value=!1}})},ge=l=>{c.value=l,I.value=!0},ye=l=>{c.value=l,i.id=l.id,i.name=l.name,i.phone=l.phone,i.check_number=l.check_number,i.teaching_classes=l.teaching_classes,i.class_ids=Array.isArray(l.assigned_stream_class_ids)?[...l.assigned_stream_class_ids]:[],i.subject_ids=Array.isArray(l.assigned_subject_ids)?[...l.assigned_subject_ids]:[];const t=new Set;for(const o of i.class_ids||[]){const s=(y.allClasses||[]).find(n=>Number(n.id)===Number(o)),r=s!=null&&s.parent_class_id?Number(s.parent_class_id):Number(o);Number.isFinite(r)&&r>0&&t.add(r)}F.value=Array.from(t),M.value=!0},fe=()=>{i.id&&L.put(route("teachers.update",i.id),{name:i.name,phone:i.phone,check_number:i.check_number,class_ids:i.class_ids,subject_ids:i.subject_ids},{preserveScroll:!0,onSuccess:()=>{M.value=!1}})},ve=l=>{c.value=l,z.value=!0},he=()=>{c.value&&L.delete(route("teachers.destroy",c.value.id),{preserveScroll:!0,onSuccess:()=>{z.value=!1}})},_e=async l=>{c.value=l,B.value=!0,O.value=!0;try{const o=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();j.value={teacher:(o==null?void 0:o.teacher)||{id:l.id,name:l.name},limits:Array.isArray(o==null?void 0:o.limits)?o.limits:[]}}catch{j.value={teacher:{id:l.id,name:l.name},limits:[]}}finally{O.value=!1}},we=async l=>{c.value=l,D.value=!0,X.value=!0,f.value=[];try{const o=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json(),s=Array.isArray(o==null?void 0:o.limits)?o.limits:[];f.value=s.map(r=>{const n=Number(r.school_class_id)||"",_=(y.allClasses||[]).find(Ne=>Number(Ne.id)===Number(n)),R=_!=null&&_.parent_class_id?Number(_.parent_class_id):n,Se=_!=null&&_.parent_class_id?n:"";return{base_class_id:R||"",stream_id:Se||"",subject_id:Number(r.subject_id)||"",periods_per_week:Number(r.periods_per_week)||0}})}catch{f.value=[]}finally{X.value=!1}},P=()=>{v.value||(D.value=!1,f.value=[])},ke=()=>{f.value=[...f.value,{base_class_id:"",stream_id:"",subject_id:"",periods_per_week:0}]},je=l=>{f.value=f.value.filter((t,o)=>o!==l)},Ce=async()=>{var t;if(!c.value||v.value)return;const l=(f.value||[]).map(o=>{const s=o.stream_id?Number(o.stream_id):Number(o.base_class_id),r=o.periods_per_week===""||o.periods_per_week===null||typeof o.periods_per_week>"u"?0:Number(o.periods_per_week);return{school_class_id:s,subject_id:Number(o.subject_id),teacher_id:Number(c.value.id),periods_per_week:Number.isFinite(r)&&r>=0?r:0}}).filter(o=>Number.isFinite(o.school_class_id)&&o.school_class_id>0).filter(o=>Number.isFinite(o.subject_id)&&o.subject_id>0);if(l.length){v.value=!0;try{await fetch(route("timetables.weekly-limits.save"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({limits:l})}),P()}finally{v.value=!1}}},V=l=>{const t=l!=null&&l.name?String(l.name).trim():"",o=l!=null&&l.level?String(l.level).trim():"";return t||o},H=l=>{const t=l!=null&&l.subject_code?String(l.subject_code).trim():"",o=l!=null&&l.name?String(l.name).trim():"";return t&&o?`${t} - ${o}`:t||o};return(l,t)=>(d(),a(m,null,[se(Ae(Me),{title:"Teachers"}),se(Fe,null,{header:le(()=>[e("div",$e,[t[19]||(t[19]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all registered teachers with their contact details, registration number and assigned classes. ")],-1)),e("div",Ve,[e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:t[0]||(t[0]=o=>N.value=!0)}," Add Teacher "),e("button",{type:"button",class:"rounded-md bg-white px-3 py-1.5 text-xs font-semibold text-emerald-700 ring-1 ring-emerald-200 hover:bg-emerald-50",onClick:t[1]||(t[1]=o=>A.value=!0)}," Import Sample Teachers ")])])]),default:le(()=>{var o;return[D.value&&c.value?(d(),a("div",Ie,[e("div",ze,[e("div",Be,[e("div",null,[t[20]||(t[20]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Assign vipindi (weekly limits)",-1)),e("p",Ue,u(c.value.name)+" · Weka vipindi kwa wiki kwa kila darasa na somo. ",1)]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:v.value,onClick:P}," × ",8,Xe)]),X.value?(d(),a("div",Re," Loading... ")):(d(),a("div",qe,[e("div",Le,[e("table",De,[t[25]||(t[25]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki"),e("th",{class:"border-b border-gray-200 px-3 py-2"})])],-1)),e("tbody",null,[f.value.length?b("",!0):(d(),a("tr",Ee,[...t[21]||(t[21]=[e("td",{colspan:"4",class:"px-3 py-6 text-center text-[11px] text-gray-500"},' Hakuna row bado. Bonyeza "Add row" kuongeza. ',-1)])])),(d(!0),a(m,null,g(f.value,(s,r)=>(d(),a("tr",{key:r,class:"hover:bg-gray-50"},[e("td",Oe,[h(e("select",{"onUpdate:modelValue":n=>s.base_class_id=n,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[22]||(t[22]=e("option",{value:""},"Select class...",-1)),(d(!0),a(m,null,g(w.classes,n=>(d(),a("option",{key:n.id,value:n.id},u(V(n)),9,He))),128))],8,Pe),[[q,s.base_class_id]]),ee(s.base_class_id).length?(d(),a("div",We,[h(e("select",{"onUpdate:modelValue":n=>s.stream_id=n,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[23]||(t[23]=e("option",{value:""},"No stream (base class)",-1)),(d(!0),a(m,null,g(ee(s.base_class_id),n=>(d(),a("option",{key:n.id,value:n.id},u(n.label),9,Ze))),128))],8,Je),[[q,s.stream_id]])])):b("",!0)]),e("td",Ke,[h(e("select",{"onUpdate:modelValue":n=>s.subject_id=n,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[24]||(t[24]=e("option",{value:""},"Select subject...",-1)),(d(!0),a(m,null,g(ce(s),n=>(d(),a("option",{key:n.id,value:n.id},u(H(n)),9,Ye))),128))],8,Qe),[[q,s.subject_id]])]),e("td",Ge,[h(e("input",{"onUpdate:modelValue":n=>s.periods_per_week=n,type:"number",min:"0",max:"50",class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,8,et),[[C,s.periods_per_week,void 0,{number:!0}]])]),e("td",tt,[e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",disabled:v.value,onClick:n=>je(r)}," Remove ",8,st)])]))),128))])])]),e("div",lt,[e("button",{type:"button",class:"rounded-md bg-slate-50 px-3 py-1.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200 hover:bg-slate-100",disabled:v.value,onClick:ke}," Add row ",8,ot),e("div",at,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:v.value,onClick:P}," Cancel ",8,dt),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60",disabled:v.value||X.value||!f.value.length,onClick:Ce},u(v.value?"Saving...":"Save vipindi"),9,rt)])])]))])])):b("",!0),e("div",nt,[e("div",it,[e("div",ut,[e("div",null,[t[27]||(t[27]=e("p",{class:"text-sm font-semibold text-gray-800"},"Teachers",-1)),e("p",ct,[t[26]||(t[26]=S("Jumla: ",-1)),e("span",pt,u(w.teachers.length),1)])])]),e("div",bt,[e("div",mt,[e("table",xt,[t[34]||(t[34]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Check No."),e("th",{class:"px-4 py-3"},"Assigned Classes"),e("th",{class:"px-4 py-3"},"Assigned Subjects"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",null,[w.teachers.length===0?(d(),a("tr",gt,[...t[28]||(t[28]=[e("td",{colspan:"6",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No teachers yet"),e("div",{class:"mt-1 text-xs text-gray-500"},[S("Bado hujaongeza mwalimu. Bonyeza "),e("span",{class:"font-semibold"},"Add Teacher"),S(" kuanza.")])])],-1)])])):b("",!0),(d(!0),a(m,null,g(w.teachers,(s,r)=>(d(),a("tr",{key:s.id,class:Te(["border-b border-gray-100 text-xs text-gray-700",r%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",yt,[e("div",ft,[e("span",vt,u(s.name),1),e("span",ht,u(s.email),1)])]),e("td",_t,u(s.phone||"—"),1),e("td",wt,u(s.check_number||"—"),1),e("td",kt,[s.assigned_classes&&s.assigned_classes.length?(d(),a("div",jt,[(d(!0),a(m,null,g(s.assigned_classes,n=>(d(),a("span",{key:n,class:"rounded bg-gray-100 px-1.5 py-0.5 text-[10px] text-gray-700"},u(n),1))),128))])):(d(),a("span",Ct,"—"))]),e("td",St,[s.assigned_subjects&&s.assigned_subjects.length?(d(),a("div",Nt,[(d(!0),a(m,null,g(s.assigned_subjects,n=>(d(),a("span",{key:n,class:"rounded bg-emerald-50 px-1.5 py-0.5 text-[10px] text-emerald-800"},u(n),1))),128))])):(d(),a("span",At,"—"))]),e("td",Mt,[e("div",Tt,[e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Timetable preview",onClick:n=>_e(s)},[...t[29]||(t[29]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 4h18"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("rect",{x:"3",y:"6",width:"18",height:"16",rx:"2"}),e("path",{d:"M7 10h4"}),e("path",{d:"M7 14h4"}),e("path",{d:"M13 10h4"}),e("path",{d:"M13 14h4"})],-1)])],8,Ft),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-amber-50 text-amber-700 ring-1 ring-amber-100 hover:bg-amber-100",title:"Assign vipindi",onClick:n=>we(s)},[...t[30]||(t[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,$t),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Details",onClick:n=>ge(s)},[...t[31]||(t[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4"}),e("path",{d:"M12 8h.01"})],-1)])],8,Vt),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",title:"Edit",onClick:n=>ye(s)},[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,It),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-red-50 text-red-700 ring-1 ring-red-200 hover:bg-red-100",title:"Delete",onClick:n=>ve(s)},[...t[33]||(t[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M19 6l-1 14H6L5 6"}),e("path",{d:"M10 11v6"}),e("path",{d:"M14 11v6"})],-1)])],8,zt)])])],2))),128))])])])])])]),B.value&&c.value?(d(),a("div",Bt,[e("div",Ut,[e("div",Xt,[e("div",null,[t[35]||(t[35]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher timetable preview",-1)),e("p",Rt,[S(u(((o=j.value.teacher)==null?void 0:o.name)||c.value.name)+" · Total vipindi kwa wiki: ",1),e("span",qt,u(pe.value),1)])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[2]||(t[2]=s=>B.value=!1)}," × ")]),O.value?(d(),a("div",Lt," Loading... ")):(d(),a("div",Dt,[e("table",Et,[t[37]||(t[37]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki")])],-1)),e("tbody",null,[j.value.limits.length?b("",!0):(d(),a("tr",Ot,[...t[36]||(t[36]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-[11px] text-gray-500"}," Hakuna limitations zilizowekwa kwa huyu mwalimu bado. ",-1)])])),(d(!0),a(m,null,g(j.value.limits,s=>(d(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Pt,u(s.class_label),1),e("td",Ht,[e("div",Wt,u(s.subject_code),1),e("div",Jt,u(s.subject_name),1)]),e("td",Zt,u(s.periods_per_week),1)]))),128))])])])),e("div",Kt,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[3]||(t[3]=s=>B.value=!1)}," Close ")])])])):b("",!0),I.value&&c.value?(d(),a("div",Qt,[e("div",Yt,[e("div",Gt,[t[38]||(t[38]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher details"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Full profile preview for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[4]||(t[4]=s=>I.value=!1)}," × ")]),e("dl",es,[e("div",ts,[t[39]||(t[39]=e("dt",{class:"font-semibold text-gray-600"},"Name",-1)),e("dd",ss,u(c.value.name),1)]),e("div",ls,[t[40]||(t[40]=e("dt",{class:"font-semibold text-gray-600"},"Email",-1)),e("dd",os,u(c.value.email),1)]),e("div",as,[t[41]||(t[41]=e("dt",{class:"font-semibold text-gray-600"},"Phone",-1)),e("dd",ds,u(c.value.phone||"—"),1)]),e("div",rs,[t[42]||(t[42]=e("dt",{class:"font-semibold text-gray-600"},"Check No.",-1)),e("dd",ns,u(c.value.check_number||"—"),1)]),e("div",is,[t[43]||(t[43]=e("dt",{class:"font-semibold text-gray-600"},"Classes",-1)),e("dd",us,[c.value.assigned_classes&&c.value.assigned_classes.length?(d(),a("span",cs,u(c.value.assigned_classes.join(", ")),1)):(d(),a("span",ps,"—"))])]),e("div",bs,[t[44]||(t[44]=e("dt",{class:"font-semibold text-gray-600"},"Subjects",-1)),e("dd",ms,[c.value.assigned_subjects&&c.value.assigned_subjects.length?(d(),a("span",xs,u(c.value.assigned_subjects.join(", ")),1)):(d(),a("span",gs,"—"))])])]),e("div",ys,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[5]||(t[5]=s=>I.value=!1)}," Close ")])])])):b("",!0),M.value&&c.value?(d(),a("div",fs,[e("div",vs,[e("div",hs,[t[45]||(t[45]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Edit Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Update basic details for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[6]||(t[6]=s=>M.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:Z(fe,["prevent"])},[e("div",null,[t[46]||(t[46]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),h(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[C,i.name]])]),e("div",_s,[e("div",null,[t[47]||(t[47]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),h(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[C,i.phone]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Check / Registration No.",-1)),h(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>i.check_number=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[C,i.check_number]])])]),e("div",ws,[e("div",null,[t[50]||(t[50]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",ks,[(d(!0),a(m,null,g(w.classes,s=>(d(),a("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",js,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:F.value.includes(s.id),onChange:r=>ie(s.id)},null,40,Cs),e("span",Ss,u(V(s)),1)]),F.value.includes(s.id)?(d(),a("div",Ns,[t[49]||(t[49]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",As,[(d(!0),a(m,null,g($(s.id),r=>(d(),a("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:i.class_ids.includes(r.id),onChange:n=>de(r.id)},null,40,Ms),e("span",Ts,u(r.label),1)]))),128)),$(s.id).length?b("",!0):(d(),a("div",Fs," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))]),t[51]||(t[51]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[52]||(t[52]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",$s,[(d(!0),a(m,null,g(G.value,s=>(d(),a("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:i.subject_ids.includes(s.id),onChange:r=>re(s.id)},null,40,Vs),e("span",Is,u(H(s)),1)]))),128)),G.value.length?b("",!0):(d(),a("div",zs," Chagua stream kwanza ili masomo yaonekane. "))]),t[53]||(t[53]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Masomo yanatokana na streams ulizochagua.",-1))])]),e("div",Bs,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[10]||(t[10]=s=>M.value=!1)}," Cancel "),t[54]||(t[54]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save changes ",-1))])],32)])])):b("",!0),z.value&&c.value?(d(),a("div",Us,[e("div",Xs,[t[57]||(t[57]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete teacher?",-1)),e("p",Rs,[t[55]||(t[55]=S(" This will remove ",-1)),e("span",qs,u(c.value.name),1),t[56]||(t[56]=S(" from the list of teachers. You can re-create them later if needed. ",-1))]),e("div",Ls,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[11]||(t[11]=s=>z.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:he}," Delete ")])])])):b("",!0),N.value?(d(),a("div",Ds,[e("div",Es,[e("div",Os,[t[58]||(t[58]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Add Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Register a new teacher with contact details and the classes they teach. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[12]||(t[12]=s=>N.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:Z(me,["prevent"])},[e("div",null,[t[59]||(t[59]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),h(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>p.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. John Peter Mwakalinga",required:""},null,512),[[C,p.name]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number (optional)",-1)),h(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>p.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX"},null,512),[[C,p.phone]])]),e("div",Ps,[e("div",null,[t[62]||(t[62]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",Hs,[(d(!0),a(m,null,g(w.classes,s=>(d(),a("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",Ws,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:T.value.includes(s.id),onChange:r=>ne(s.id)},null,40,Js),e("span",Zs,u(V(s)),1)]),T.value.includes(s.id)?(d(),a("div",Ks,[t[61]||(t[61]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Qs,[(d(!0),a(m,null,g($(s.id),r=>(d(),a("label",{key:r.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:p.class_ids.includes(r.id),onChange:n=>oe(r.id)},null,40,Ys),e("span",Gs,u(r.label),1)]))),128)),$(s.id).length?b("",!0):(d(),a("div",el," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))])]),e("div",null,[t[63]||(t[63]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",tl,[(d(!0),a(m,null,g(Y.value,s=>(d(),a("label",{key:s.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:p.subject_ids.includes(s.id),onChange:r=>ae(s.id)},null,40,sl),e("span",ll,u(H(s)),1)]))),128)),Y.value.length?b("",!0):(d(),a("div",ol," Chagua stream kwanza ili masomo yaonekane. "))])])]),e("div",al,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[15]||(t[15]=s=>N.value=!1)}," Cancel "),t[64]||(t[64]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save Teacher ",-1))])],32)])])):b("",!0),A.value?(d(),a("div",dl,[e("div",rl,[e("div",nl,[t[65]||(t[65]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Import Sample Teachers"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Quickly create 38 sample teachers for a selected class and assign them to subjects. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[16]||(t[16]=s=>A.value=!1)}," × ")]),e("form",{class:"space-y-4",onSubmit:Z(xe,["prevent"])},[e("div",null,[t[67]||(t[67]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Class",-1)),h(e("select",{"onUpdate:modelValue":t[17]||(t[17]=s=>U.class_id=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] text-gray-800 focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},[t[66]||(t[66]=e("option",{value:"",disabled:""},"Select class...",-1)),(d(!0),a(m,null,g(w.classes,s=>(d(),a("option",{key:s.id,value:s.id},u(s.name),9,il))),128))],512),[[q,U.class_id]]),t[68]||(t[68]=e("p",{class:"mt-1 text-[10px] text-gray-500"}," We will generate 38 sample teachers linked to this class and rotate them across subjects. ",-1))]),e("div",ul,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[18]||(t[18]=s=>A.value=!1)}," Cancel "),t[69]||(t[69]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Import Sample Teachers ",-1))])],32)])])):b("",!0)]}),_:1})],64))}};export{ml as default};

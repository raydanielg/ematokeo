import{i as g,j as R,n as q,I as _e,c as n,a as we,u as Qe,h as et,w as ke,d as b,b as e,o as r,F as m,r as x,t as i,k as C,p as de,v as U,f as N,s as tt,x as je,m as L}from"./app-_TtpDmwf.js";import{_ as st}from"./AuthenticatedLayout-B0b5bv4u.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const lt={class:"flex items-center justify-between"},at={class:"flex gap-2"},ot={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},nt={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},rt={class:"mb-2 flex items-start justify-between gap-3"},dt=["disabled"],it={class:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-900"},ut={class:"mt-1 flex flex-wrap gap-1"},ct={key:0,class:"text-[10px] text-amber-900"},pt={class:"mt-4 flex justify-end"},bt=["disabled"],mt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},xt={class:"w-full max-w-xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},gt={class:"mb-2 flex items-start justify-between gap-3"},yt=["disabled"],ft={class:"max-h-64 space-y-2 overflow-auto rounded-lg border border-gray-200 bg-white p-2"},ht={class:"text-[11px] font-semibold text-amber-900"},vt={class:"mt-1 flex flex-wrap gap-1"},_t={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},wt={class:"mt-4 flex justify-end gap-2"},kt=["disabled"],jt=["disabled"],Ct={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Nt={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},St={class:"mb-3 flex items-start justify-between gap-3"},At={class:"mt-0.5 text-[11px] text-gray-500"},Mt=["disabled"],Tt={key:0,class:"py-8 text-center text-[11px] text-gray-500"},Ft={key:1,class:"space-y-3"},$t={class:"overflow-hidden rounded-lg border border-gray-200"},Xt={class:"min-w-full border-collapse text-[11px]"},It={key:0},Vt={class:"border-b border-gray-100 px-3 py-2"},Bt=["onUpdate:modelValue"],zt=["value"],Dt={key:0,class:"mt-1"},Ot=["onUpdate:modelValue"],Rt=["value"],Ut={class:"border-b border-gray-100 px-3 py-2"},Lt=["onUpdate:modelValue"],Et=["value"],Pt={class:"border-b border-gray-100 px-3 py-2"},qt=["onUpdate:modelValue"],Ht={class:"border-b border-gray-100 px-3 py-2 text-right"},Wt=["disabled","onClick"],Jt={class:"flex items-center justify-between"},Kt=["disabled"],Yt={class:"flex justify-end gap-2"},Zt=["disabled"],Gt=["disabled"],Qt={class:"rounded-2xl bg-slate-50/70 p-4 ring-1 ring-slate-200"},es={class:"rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},ts={class:"mb-4 flex flex-wrap items-center justify-between gap-3"},ss={class:"mt-0.5 text-[11px] text-gray-500"},ls={class:"font-semibold text-gray-700"},as={class:"overflow-hidden rounded-xl border border-gray-200"},os={class:"overflow-x-auto"},ns={class:"min-w-full text-left text-sm"},rs={class:"border-b border-gray-200 bg-slate-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},ds={class:"w-10 px-4 py-3"},is=["checked"],us={key:0},cs={class:"px-4 py-2 align-top"},ps=["checked","onChange"],bs={class:"px-3 py-2 align-top"},ms={class:"flex flex-col"},xs={class:"text-gray-800"},gs={class:"text-[10px] text-gray-500"},ys={class:"px-3 py-2 align-top"},fs={class:"px-3 py-2 align-top"},hs={class:"px-3 py-2 align-top"},vs={key:0,class:"flex flex-wrap gap-1"},_s={key:1,class:"text-gray-500"},ws={class:"px-3 py-2 align-top"},ks={key:0,class:"space-y-1"},js={class:"text-[10px] font-semibold text-emerald-900"},Cs={class:"mt-0.5 flex flex-wrap gap-1"},Ns={key:1,class:"flex flex-wrap gap-1"},Ss={key:2,class:"text-gray-500"},As={class:"px-3 py-2 align-top"},Ms={class:"flex justify-end gap-1.5"},Ts=["onClick"],Fs=["onClick"],$s=["onClick"],Xs=["onClick"],Is=["onClick"],Vs={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Bs={class:"w-full max-w-3xl rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},zs={class:"mb-3 flex items-center justify-between"},Ds={class:"mt-0.5 text-[11px] text-gray-500"},Os={class:"font-semibold"},Rs={key:0,class:"py-6 text-center text-[11px] text-gray-500"},Us={key:1,class:"overflow-hidden rounded-lg border border-gray-200"},Ls={class:"min-w-full border-collapse text-[11px]"},Es={key:0},Ps={class:"border-b border-gray-100 px-3 py-2"},qs={class:"border-b border-gray-100 px-3 py-2"},Hs={class:"font-medium text-gray-800"},Ws={class:"text-[10px] text-gray-500"},Js={class:"border-b border-gray-100 px-3 py-2 font-semibold"},Ks={class:"mt-4 flex justify-end"},Ys={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Zs={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Gs={class:"mb-3 flex items-center justify-between"},Qs={class:"space-y-2 text-[11px] text-gray-700"},el={class:"flex justify-between gap-3"},tl={class:"text-right text-gray-900"},sl={class:"flex justify-between gap-3"},ll={class:"text-right"},al={class:"flex justify-between gap-3"},ol={class:"mt-0.5 text-[11px] font-medium text-gray-900"},nl={class:"flex justify-between gap-3"},rl={class:"mt-0.5 text-[11px] font-medium text-gray-900"},dl={class:"col-span-2"},il={class:"mt-1 flex flex-wrap gap-1"},ul={key:0,class:"text-[11px] text-gray-500"},cl={key:0,class:"col-span-2"},pl={class:"mt-1 space-y-2"},bl={class:"text-[10px] font-semibold text-amber-900"},ml={class:"mt-1 space-y-1"},xl={class:"text-[10px] font-semibold text-amber-900"},gl={class:"mt-0.5 flex flex-wrap gap-1"},yl={class:"mt-4 flex justify-end"},fl={key:5,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},hl={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},vl={class:"mb-3 flex items-center justify-between"},_l={class:"grid grid-cols-2 gap-3"},wl={class:"grid grid-cols-2 gap-3"},kl={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},jl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Cl=["checked","onChange"],Nl={class:"font-medium text-gray-800"},Sl={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},Al={class:"mt-1 grid grid-cols-2 gap-1"},Ml=["checked","onChange"],Tl={class:"text-gray-800"},Fl={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},$l={class:"max-h-72 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Xl={class:"text-[10px] font-semibold text-gray-700"},Il={class:"mt-1 grid grid-cols-2 gap-1"},Vl=["checked","onChange"],Bl={class:"font-medium text-gray-800"},zl={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},Dl={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},Ol={class:"mt-4 flex justify-end gap-2"},Rl={key:6,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Ul={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Ll={class:"mb-3 text-[11px] text-gray-600"},El={class:"font-semibold"},Pl={class:"mt-3 flex justify-end gap-2"},ql={key:7,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},Hl={class:"w-full max-w-lg rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},Wl={class:"mb-3 flex items-center justify-between"},Jl={class:"grid grid-cols-2 gap-3"},Kl={class:"max-h-52 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},Yl={class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-[11px] text-gray-700 hover:bg-slate-50"},Zl=["checked","onChange"],Gl={class:"font-medium text-gray-800"},Ql={key:0,class:"border-t border-gray-100 px-2 pb-2 pt-2"},ea={class:"mt-1 grid grid-cols-2 gap-1"},ta=["checked","onChange"],sa={class:"text-gray-800"},la={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},aa={class:"max-h-72 space-y-2 overflow-auto rounded-md border border-gray-200 bg-white p-2"},oa={class:"text-[10px] font-semibold text-gray-700"},na={class:"mt-1 grid grid-cols-2 gap-1"},ra=["checked","onChange"],da={class:"font-medium text-gray-800"},ia={key:0,class:"col-span-2 px-2 py-1 text-[11px] text-gray-500"},ua={key:0,class:"px-2 py-2 text-[11px] text-gray-500"},ca={class:"mt-4 flex justify-end gap-2"},pa={key:8,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6 backdrop-blur-sm"},ba={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-xl"},ma={class:"mb-3 text-[11px] text-gray-600"},xa={class:"font-semibold"},ha={__name:"TeachersIndex",props:{teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},allClasses:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classSubjectMap:{type:Object,default:()=>({})}},setup(S){const f=S,I=g(!1);g(!1);const H=g(!1),V=g(!1),W=g(!1),J=g(!1),G=g(!1),K=g(!1),Q=g(!1),ie=g(!1),ee=g(!1),te=g({classId:null,teachers:[],context:null}),A=g(!1),Y=g([]),se=g(null),v=g([]),Ce=l=>{$(v.value,l)},Ne=R(()=>{const l=(f.teachers||[]).map(a=>Number(a.id)).filter(a=>Number.isFinite(a));if(!l.length)return!1;const t=new Set((v.value||[]).map(a=>Number(a)));return l.every(a=>t.has(a))}),Se=()=>{const l=(f.teachers||[]).map(s=>Number(s.id)).filter(s=>Number.isFinite(s)),t=new Set((v.value||[]).map(s=>Number(s))),a=l.length>0&&l.every(s=>t.has(s));v.value=a?[]:l},Ae=()=>{(v.value||[]).length&&(K.value=!0)},Me=()=>{K.value=!1},Te=()=>{(v.value||[]).length&&L.post(route("teachers.bulk-destroy"),{teacher_ids:v.value},{preserveScroll:!0,onSuccess:()=>{v.value=[],K.value=!1}})},y=q({name:"",phone:"",class_ids:[],subject_ids:[]}),j=q({}),M=g([]),c=q({id:null,name:"",phone:"",check_number:"",teaching_classes:"",class_ids:[],subject_ids:[]}),w=q({}),T=g([]),le=l=>{var s;const t=(l||[]).map(d=>Number(d)).filter(d=>Number.isFinite(d));if(!t.length)return null;const a=new Set;for(const d of t){const o=Array.isArray((s=f.classSubjectMap)==null?void 0:s[d])?f.classSubjectMap[d]:[];for(const u of o){const h=Number(u);Number.isFinite(h)&&a.add(h)}}return a.size?a:null},B=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(f.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:Number(a.id),label:O(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},ue=(l,t)=>{const a=new Set;for(const s of l||[])for(const d of B(s))a.add(Number(d.id));return(t||[]).filter(s=>a.has(Number(s)))},ce=(l,t)=>{const a=new Set((t||[]).map(d=>Number(d)).filter(d=>Number.isFinite(d))),s=new Set;for(const d of l||[]){const o=Number(d);if(!Number.isFinite(o)||o<=0)continue;const u=B(o);if(!u.length){s.add(o);continue}const h=u.filter(X=>a.has(Number(X.id)));if(h.length)for(const X of h)s.add(Number(X.id));else for(const X of u)s.add(Number(X.id))}return Array.from(s)},z=R(()=>ce(M.value,y.class_ids)),F=R(()=>ce(T.value,c.class_ids)),pe=l=>{const t=Number(l),a=(f.allClasses||[]).find(s=>Number(s.id)===t)||(f.classes||[]).find(s=>Number(s.id)===t);return a?O(a):`Class #${t}`},E=l=>{var s,d;const t=Number(l),a=((s=f.classSubjectMap)==null?void 0:s[t])||((d=f.classSubjectMap)==null?void 0:d[String(t)])||null;if(Array.isArray(a)&&a.length){const o=new Set(a.map(u=>Number(u)).filter(u=>Number.isFinite(u)));return(f.subjects||[]).filter(u=>o.has(Number(u.id)))}return f.subjects||[]},P=(l,t)=>{const a=new Set((t||[]).map(s=>Number(s)).filter(s=>Number.isFinite(s)));for(const s of Object.keys(l)){const d=Number(s);a.has(d)||delete l[s]}for(const s of a)Object.prototype.hasOwnProperty.call(l,String(s))||(l[String(s)]=[])},be=l=>{const t=new Set;for(const a of Object.keys(l||{})){const s=Array.isArray(l[a])?l[a]:[];for(const d of s){const o=Number(d);Number.isFinite(o)&&o>0&&t.add(o)}}return Array.from(t)},me=l=>{const t=[];for(const a of Object.keys(l||{})){const s=Number(a);if(!Number.isFinite(s)||s<=0)continue;const d=Array.isArray(l[a])?l[a]:[];for(const o of d){const u=Number(o);!Number.isFinite(u)||u<=0||t.push({class_id:s,subject_id:u})}}return t},xe=(l,t)=>{Y.value=Array.isArray(l)?l:[],se.value=typeof t=="function"?t:null,Q.value=!0},ae=()=>{A.value||(Q.value=!1,Y.value=[],se.value=null)},Fe=()=>{if(A.value)return;const l=se.value;ae(),l&&l()},ge=async({pairs:l,excludeTeacherId:t})=>{var a;A.value=!0;try{const d=await(await fetch(route("teachers.assignment-conflicts"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({pairs:l,exclude_teacher_id:t||void 0})})).json();return Array.isArray(d==null?void 0:d.conflicts)?d.conflicts:[]}catch{return[]}finally{A.value=!1}},$=(l,t)=>{const a=Number(t);if(!Number.isFinite(a))return;const s=l.findIndex(d=>Number(d)===a);s===-1?l.push(a):l.splice(s,1)},$e=l=>$(y.class_ids,l),Xe=l=>$(c.class_ids,l),ye=()=>{ee.value||(ie.value=!1,te.value={classId:null,teachers:[],context:null})},Ie=()=>{ye()},Ve=l=>{$(M.value,l),y.class_ids=ue(M.value,y.class_ids),y.subject_ids=[]},Be=l=>{$(T.value,l),c.class_ids=ue(T.value,c.class_ids),c.subject_ids=[]},ze=async l=>{const t=Number(l);Number.isFinite(t)&&$e(t)},De=async l=>{const t=Number(l);Number.isFinite(t)&&Xe(t)},fe=l=>{const t=le(l);return t?(f.subjects||[]).filter(a=>t.has(Number(a.id))):f.subjects||[]};R(()=>fe(z.value)),R(()=>fe(F.value)),_e(()=>[M.value,y.class_ids],()=>{const l=le(z.value);if(!l){y.subject_ids=[];return}y.subject_ids=(y.subject_ids||[]).filter(t=>l.has(Number(t))),P(j,z.value)},{deep:!0}),_e(()=>[T.value,c.class_ids],()=>{const l=le(F.value);if(!l){c.subject_ids=[];return}c.subject_ids=(c.subject_ids||[]).filter(t=>l.has(Number(t))),P(w,F.value)},{deep:!0}),q({class_id:""});const p=g(null),oe=g(!1),D=g({teacher:null,limits:[]}),Z=g(!1),k=g(!1),_=g([]),he=l=>{const t=Number(l);return!Number.isFinite(t)||t<=0?[]:(f.allClasses||[]).filter(a=>Number(a.parent_class_id)===t).map(a=>({id:a.id,label:O(a)})).sort((a,s)=>String(a.label).localeCompare(String(s.label)))},Oe=l=>{const t=l.stream_id?Number(l.stream_id):Number(l.base_class_id);return E(t)},Re=R(()=>{var l;return(((l=D.value)==null?void 0:l.limits)||[]).reduce((t,a)=>t+(Number(a.periods_per_week)||0),0)}),ve=()=>{y.name="",y.phone="",y.class_ids=[],y.subject_ids=[],M.value=[];for(const l of Object.keys(j))delete j[l]},Ue=async()=>{const l=z.value;P(j,l);const t={};for(const o of Object.keys(j))t[o]=Array.isArray(j[o])?j[o]:[];const a=be(t),s={name:y.name,phone:y.phone,class_ids:l,subject_ids:a,class_subject_map:t},d=me(t);if(d.length){const o=await ge({pairs:d,excludeTeacherId:null});if(o.length){xe(o,()=>{L.post(route("teachers.store"),s,{preserveScroll:!0,onSuccess:()=>{ve(),I.value=!1}})});return}}L.post(route("teachers.store"),s,{preserveScroll:!0,onSuccess:()=>{ve(),I.value=!1}})},Le=l=>{p.value=l,H.value=!0},Ee=l=>{p.value=l,c.id=l.id,c.name=l.name,c.phone=l.phone,c.check_number=l.check_number,c.teaching_classes=l.teaching_classes,c.class_ids=Array.isArray(l.assigned_stream_class_ids)?[...l.assigned_stream_class_ids]:[],c.subject_ids=Array.isArray(l.assigned_subject_ids)?[...l.assigned_subject_ids]:[];const t=new Set;for(const s of c.class_ids||[]){const d=(f.allClasses||[]).find(u=>Number(u.id)===Number(s)),o=d!=null&&d.parent_class_id?Number(d.parent_class_id):Number(s);Number.isFinite(o)&&o>0&&t.add(o)}T.value=Array.from(t);for(const s of Object.keys(w))delete w[s];const a=(l==null?void 0:l.assigned_class_subject_ids)||{};for(const s of Object.keys(a)){const d=Array.isArray(a[s])?a[s]:[];w[String(s)]=d.map(o=>Number(o)).filter(o=>Number.isFinite(o))}P(w,F.value),V.value=!0},Pe=async()=>{if(!c.id)return;const l=F.value;P(w,l);const t={};for(const o of Object.keys(w))t[o]=Array.isArray(w[o])?w[o]:[];const a=be(t),s={name:c.name,phone:c.phone,check_number:c.check_number,class_ids:l,subject_ids:a,class_subject_map:t},d=me(t);if(d.length){const o=await ge({pairs:d,excludeTeacherId:c.id});if(o.length){xe(o,()=>{L.put(route("teachers.update",c.id),s,{preserveScroll:!0,onSuccess:()=>{V.value=!1}})});return}}L.put(route("teachers.update",c.id),s,{preserveScroll:!0,onSuccess:()=>{V.value=!1}})},qe=l=>{p.value=l,W.value=!0},He=()=>{p.value&&L.delete(route("teachers.destroy",p.value.id),{preserveScroll:!0,onSuccess:()=>{W.value=!1}})},We=async l=>{p.value=l,J.value=!0,oe.value=!0;try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json();D.value={teacher:(a==null?void 0:a.teacher)||{id:l.id,name:l.name},limits:Array.isArray(a==null?void 0:a.limits)?a.limits:[]}}catch{D.value={teacher:{id:l.id,name:l.name},limits:[]}}finally{oe.value=!1}},Je=async l=>{p.value=l,G.value=!0,Z.value=!0,_.value=[];try{const a=await(await fetch(route("teachers.weekly-limits",l.id),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"})).json(),s=Array.isArray(a==null?void 0:a.limits)?a.limits:[];_.value=s.map(d=>{const o=Number(d.school_class_id)||"",u=(f.allClasses||[]).find(Ge=>Number(Ge.id)===Number(o)),h=u!=null&&u.parent_class_id?Number(u.parent_class_id):o,X=u!=null&&u.parent_class_id?o:"";return{base_class_id:h||"",stream_id:X||"",subject_id:Number(d.subject_id)||"",periods_per_week:Number(d.periods_per_week)||0}})}catch{_.value=[]}finally{Z.value=!1}},ne=()=>{k.value||(G.value=!1,_.value=[])},Ke=()=>{_.value=[..._.value,{base_class_id:"",stream_id:"",subject_id:"",periods_per_week:0}]},Ye=l=>{_.value=_.value.filter((t,a)=>a!==l)},Ze=async()=>{var t;if(!p.value||k.value)return;const l=(_.value||[]).map(a=>{const s=a.stream_id?Number(a.stream_id):Number(a.base_class_id),d=a.periods_per_week===""||a.periods_per_week===null||typeof a.periods_per_week>"u"?0:Number(a.periods_per_week);return{school_class_id:s,subject_id:Number(a.subject_id),teacher_id:Number(p.value.id),periods_per_week:Number.isFinite(d)&&d>=0?d:0}}).filter(a=>Number.isFinite(a.school_class_id)&&a.school_class_id>0).filter(a=>Number.isFinite(a.subject_id)&&a.subject_id>0);if(l.length){k.value=!0;try{await fetch(route("timetables.weekly-limits.save"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},credentials:"same-origin",body:JSON.stringify({limits:l})}),ne()}finally{k.value=!1}}},O=l=>{const t=l!=null&&l.name?String(l.name).trim():"",a=l!=null&&l.level?String(l.level).trim():"";return t||a},re=l=>{const t=l!=null&&l.subject_code?String(l.subject_code).trim():"",a=l!=null&&l.name?String(l.name).trim():"";return t&&a?`${t} - ${a}`:t||a};return(l,t)=>(r(),n(m,null,[we(Qe(et),{title:"Teachers"}),we(st,null,{header:ke(()=>[e("div",lt,[t[15]||(t[15]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Teachers "),e("p",{class:"mt-1 text-sm text-gray-500"}," List of all registered teachers with their contact details, registration number and assigned classes. ")],-1)),e("div",at,[e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700",onClick:t[0]||(t[0]=a=>I.value=!0)}," Add Teacher "),v.value.length?(r(),n("button",{key:0,type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-red-700",onClick:Ae}," Delete selected ("+i(v.value.length)+") ",1)):b("",!0)])])]),default:ke(()=>{var a;return[ie.value?(r(),n("div",ot,[e("div",nt,[e("div",rt,[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"This class already has teacher(s)"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa hili tayari lina mwalimu. Mfumo unaruhusu walimu zaidi ya mmoja. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:ee.value,onClick:ye}," × ",8,dt)]),e("div",it,[t[17]||(t[17]=e("div",{class:"font-semibold"},"Existing teacher(s):",-1)),e("div",ut,[(r(!0),n(m,null,x(te.value.teachers||[],s=>(r(),n("span",{key:s.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(s.name),1))),128)),(te.value.teachers||[]).length?b("",!0):(r(),n("span",ct," — "))])]),e("div",pt,[e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:ee.value,onClick:Ie}," OK ",8,bt)])])])):b("",!0),Q.value?(r(),n("div",mt,[e("div",xt,[e("div",gt,[t[18]||(t[18]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Taarifa: tayari kuna mwalimu"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Darasa/stream na somo hili tayari lina mwalimu. Unataka kuruhusu walimu wawili (au zaidi) wafundishe pamoja? ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:A.value,onClick:ae}," × ",8,yt)]),e("div",ft,[(r(!0),n(m,null,x(Y.value,s=>(r(),n("div",{key:`${s.class_id}-${s.subject_id}`,class:"rounded-md border border-amber-200 bg-amber-50 p-2"},[e("div",ht,i(s.class_label)+" · "+i(s.subject_label),1),e("div",vt,[(r(!0),n(m,null,x(s.teachers||[],d=>(r(),n("span",{key:d.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(d.name),1))),128))])]))),128)),Y.value.length?b("",!0):(r(),n("div",_t," No conflicts. "))]),e("div",wt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:A.value,onClick:ae}," Cancel ",8,kt),e("button",{type:"button",class:"rounded-md bg-amber-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-amber-700 disabled:opacity-60",disabled:A.value,onClick:Fe}," Ruhusu wawili (Endelea) ",8,jt)])])])):b("",!0),G.value&&p.value?(r(),n("div",Ct,[e("div",Nt,[e("div",St,[e("div",null,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Assign vipindi (weekly limits)",-1)),e("p",At,i(p.value.name)+" · Weka vipindi kwa wiki kwa kila darasa na somo. ",1)]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",disabled:k.value,onClick:ne}," × ",8,Mt)]),Z.value?(r(),n("div",Tt," Loading... ")):(r(),n("div",Ft,[e("div",$t,[e("table",Xt,[t[24]||(t[24]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki"),e("th",{class:"border-b border-gray-200 px-3 py-2"})])],-1)),e("tbody",null,[_.value.length?b("",!0):(r(),n("tr",It,[...t[20]||(t[20]=[e("td",{colspan:"4",class:"px-3 py-6 text-center text-[11px] text-gray-500"},' Hakuna row bado. Bonyeza "Add row" kuongeza. ',-1)])])),(r(!0),n(m,null,x(_.value,(s,d)=>(r(),n("tr",{key:d,class:"hover:bg-gray-50"},[e("td",Vt,[C(e("select",{"onUpdate:modelValue":o=>s.base_class_id=o,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[21]||(t[21]=e("option",{value:""},"Select class...",-1)),(r(!0),n(m,null,x(S.classes,o=>(r(),n("option",{key:o.id,value:o.id},i(O(o)),9,zt))),128))],8,Bt),[[de,s.base_class_id]]),he(s.base_class_id).length?(r(),n("div",Dt,[C(e("select",{"onUpdate:modelValue":o=>s.stream_id=o,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[22]||(t[22]=e("option",{value:""},"No stream (base class)",-1)),(r(!0),n(m,null,x(he(s.base_class_id),o=>(r(),n("option",{key:o.id,value:o.id},i(o.label),9,Rt))),128))],8,Ot),[[de,s.stream_id]])])):b("",!0)]),e("td",Ut,[C(e("select",{"onUpdate:modelValue":o=>s.subject_id=o,class:"w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[23]||(t[23]=e("option",{value:""},"Select subject...",-1)),(r(!0),n(m,null,x(Oe(s),o=>(r(),n("option",{key:o.id,value:o.id},i(re(o)),9,Et))),128))],8,Lt),[[de,s.subject_id]])]),e("td",Pt,[C(e("input",{"onUpdate:modelValue":o=>s.periods_per_week=o,type:"number",min:"0",max:"50",class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},null,8,qt),[[U,s.periods_per_week,void 0,{number:!0}]])]),e("td",Ht,[e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",disabled:k.value,onClick:o=>Ye(d)}," Remove ",8,Wt)])]))),128))])])]),e("div",Jt,[e("button",{type:"button",class:"rounded-md bg-slate-50 px-3 py-1.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200 hover:bg-slate-100",disabled:k.value,onClick:Ke}," Add row ",8,Kt),e("div",Yt,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",disabled:k.value,onClick:ne}," Cancel ",8,Zt),e("button",{type:"button",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60",disabled:k.value||Z.value||!_.value.length,onClick:Ze},i(k.value?"Saving...":"Save vipindi"),9,Gt)])])]))])])):b("",!0),e("div",Qt,[e("div",es,[e("div",ts,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-sm font-semibold text-gray-800"},"Teachers",-1)),e("p",ss,[t[25]||(t[25]=N("Jumla: ",-1)),e("span",ls,i(S.teachers.length),1)])])]),e("div",as,[e("div",os,[e("table",ns,[e("thead",null,[e("tr",rs,[e("th",ds,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:Ne.value,onChange:Se},null,40,is)]),t[27]||(t[27]=e("th",{class:"px-4 py-3"},"Name",-1)),t[28]||(t[28]=e("th",{class:"px-4 py-3"},"Phone",-1)),t[29]||(t[29]=e("th",{class:"px-4 py-3"},"Check No.",-1)),t[30]||(t[30]=e("th",{class:"px-4 py-3"},"Assigned Classes",-1)),t[31]||(t[31]=e("th",{class:"px-4 py-3"},"Assigned Subjects",-1)),t[32]||(t[32]=e("th",{class:"px-4 py-3 text-right"},"Actions",-1))])]),e("tbody",null,[S.teachers.length===0?(r(),n("tr",us,[...t[33]||(t[33]=[e("td",{colspan:"7",class:"px-4 py-10 text-center"},[e("div",{class:"mx-auto max-w-sm"},[e("div",{class:"text-sm font-semibold text-gray-800"},"No teachers yet"),e("div",{class:"mt-1 text-xs text-gray-500"},[N("Bado hujaongeza mwalimu. Bonyeza "),e("span",{class:"font-semibold"},"Add Teacher"),N(" kuanza.")])])],-1)])])):b("",!0),(r(!0),n(m,null,x(S.teachers,(s,d)=>(r(),n("tr",{key:s.id,class:tt(["border-b border-gray-100 text-xs text-gray-700",d%2===0?"bg-white":"bg-slate-50/40","hover:bg-emerald-50/40"])},[e("td",cs,[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:v.value.map(o=>Number(o)).includes(Number(s.id)),onChange:o=>Ce(s.id)},null,40,ps)]),e("td",bs,[e("div",ms,[e("span",xs,i(s.name),1),e("span",gs,i(s.email),1)])]),e("td",ys,i(s.phone||"—"),1),e("td",fs,i(s.check_number||"—"),1),e("td",hs,[s.assigned_classes&&s.assigned_classes.length?(r(),n("div",vs,[(r(!0),n(m,null,x(s.assigned_classes,o=>(r(),n("span",{key:o,class:"rounded bg-gray-100 px-1.5 py-0.5 text-[10px] text-gray-700"},i(o),1))),128))])):(r(),n("span",_s,"—"))]),e("td",ws,[s.assigned_class_subjects&&Object.keys(s.assigned_class_subjects).length?(r(),n("div",ks,[(r(!0),n(m,null,x(s.assigned_class_subjects,(o,u)=>(r(),n("div",{key:u,class:"rounded-md border border-emerald-100 bg-emerald-50/40 px-2 py-1"},[e("div",js,i(u),1),e("div",Cs,[(r(!0),n(m,null,x(o,h=>(r(),n("span",{key:`${u}-${h}`,class:"rounded bg-white/70 px-1.5 py-0.5 text-[10px] text-emerald-800 ring-1 ring-emerald-100"},i(h),1))),128))])]))),128))])):s.assigned_subjects&&s.assigned_subjects.length?(r(),n("div",Ns,[(r(!0),n(m,null,x(s.assigned_subjects,o=>(r(),n("span",{key:o,class:"rounded bg-emerald-50 px-1.5 py-0.5 text-[10px] text-emerald-800"},i(o),1))),128))])):(r(),n("span",Ss,"—"))]),e("td",As,[e("div",Ms,[e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Timetable preview",onClick:o=>We(s)},[...t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 4h18"}),e("path",{d:"M8 2v4"}),e("path",{d:"M16 2v4"}),e("rect",{x:"3",y:"6",width:"18",height:"16",rx:"2"}),e("path",{d:"M7 10h4"}),e("path",{d:"M7 14h4"}),e("path",{d:"M13 10h4"}),e("path",{d:"M13 14h4"})],-1)])],8,Ts),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-amber-50 text-amber-700 ring-1 ring-amber-100 hover:bg-amber-100",title:"Assign vipindi",onClick:o=>Je(s)},[...t[35]||(t[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,Fs),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-white text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",title:"Details",onClick:o=>Le(s)},[...t[36]||(t[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4"}),e("path",{d:"M12 8h.01"})],-1)])],8,$s),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",title:"Edit",onClick:o=>Ee(s)},[...t[37]||(t[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 20h9"}),e("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})],-1)])],8,Xs),e("button",{type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-md bg-red-50 text-red-700 ring-1 ring-red-200 hover:bg-red-100",title:"Delete",onClick:o=>qe(s)},[...t[38]||(t[38]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M8 6V4h8v2"}),e("path",{d:"M19 6l-1 14H6L5 6"}),e("path",{d:"M10 11v6"}),e("path",{d:"M14 11v6"})],-1)])],8,Is)])])],2))),128))])])])])])]),J.value&&p.value?(r(),n("div",Vs,[e("div",Bs,[e("div",zs,[e("div",null,[t[39]||(t[39]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher timetable preview",-1)),e("p",Ds,[N(i(((a=D.value.teacher)==null?void 0:a.name)||p.value.name)+" · Total vipindi kwa wiki: ",1),e("span",Os,i(Re.value),1)])]),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[1]||(t[1]=s=>J.value=!1)}," × ")]),oe.value?(r(),n("div",Rs," Loading... ")):(r(),n("div",Us,[e("table",Ls,[t[41]||(t[41]=e("thead",null,[e("tr",{class:"bg-gray-50 text-left"},[e("th",{class:"border-b border-gray-200 px-3 py-2"},"Class"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Subject"),e("th",{class:"border-b border-gray-200 px-3 py-2"},"Vipindi / Wiki")])],-1)),e("tbody",null,[D.value.limits.length?b("",!0):(r(),n("tr",Es,[...t[40]||(t[40]=[e("td",{colspan:"3",class:"px-3 py-4 text-center text-[11px] text-gray-500"}," Hakuna limitations zilizowekwa kwa huyu mwalimu bado. ",-1)])])),(r(!0),n(m,null,x(D.value.limits,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ps,i(s.class_label),1),e("td",qs,[e("div",Hs,i(s.subject_code),1),e("div",Ws,i(s.subject_name),1)]),e("td",Js,i(s.periods_per_week),1)]))),128))])])])),e("div",Ks,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[2]||(t[2]=s=>J.value=!1)}," Close ")])])])):b("",!0),H.value&&p.value?(r(),n("div",Ys,[e("div",Zs,[e("div",Gs,[t[42]||(t[42]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Teacher details"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Full profile preview for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[3]||(t[3]=s=>H.value=!1)}," × ")]),e("dl",Qs,[e("div",el,[t[43]||(t[43]=e("dt",{class:"font-semibold text-gray-600"},"Name",-1)),e("dd",tl,i(p.value.name),1)]),e("div",sl,[t[44]||(t[44]=e("dt",{class:"font-semibold text-gray-600"},"Email",-1)),e("dd",ll,i(p.value.email),1)]),e("div",al,[t[45]||(t[45]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Phone",-1)),e("dd",ol,i(p.value.phone||"—"),1)]),e("div",nl,[t[46]||(t[46]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Check No.",-1)),e("dd",rl,i(p.value.check_number||"—"),1)]),e("div",dl,[t[47]||(t[47]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Assigned classes",-1)),e("dd",il,[(r(!0),n(m,null,x(p.value.assigned_classes||[],s=>(r(),n("span",{key:s,class:"rounded bg-gray-100 px-2 py-0.5 text-[10px] text-gray-700"},i(s),1))),128)),(p.value.assigned_classes||[]).length?b("",!0):(r(),n("span",ul,"—"))])]),p.value.collaborations&&Object.keys(p.value.collaborations).length?(r(),n("div",cl,[t[48]||(t[48]=e("dt",{class:"text-[10px] font-semibold text-gray-500"},"Anaeshirikiana nae (same class & subject)",-1)),e("dd",pl,[(r(!0),n(m,null,x(p.value.collaborations,(s,d)=>(r(),n("div",{key:d,class:"rounded-lg border border-amber-200 bg-amber-50/50 p-2"},[e("div",bl,i(d),1),e("div",ml,[(r(!0),n(m,null,x(s,(o,u)=>(r(),n("div",{key:`${d}-${u}`},[e("div",xl,i(u),1),e("div",gl,[(r(!0),n(m,null,x(o,h=>(r(),n("span",{key:h.id,class:"rounded bg-white/70 px-2 py-0.5 text-[10px] text-amber-900 ring-1 ring-amber-200"},i(h.name),1))),128))])]))),128))])]))),128))])])):b("",!0)]),e("div",yl,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-3 py-1.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[4]||(t[4]=s=>H.value=!1)}," Close ")])])])):b("",!0),V.value&&p.value?(r(),n("div",fl,[e("div",hl,[e("div",vl,[t[49]||(t[49]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Edit Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Update basic details for this teacher. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[5]||(t[5]=s=>V.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:je(Pe,["prevent"])},[e("div",null,[t[50]||(t[50]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",required:""},null,512),[[U,c.name]])]),e("div",_l,[e("div",null,[t[51]||(t[51]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>c.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[U,c.phone]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Check / Registration No.",-1)),C(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>c.check_number=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"TCH-XXXXXX (optional)"},null,512),[[U,c.check_number]])])]),e("div",wl,[e("div",null,[t[54]||(t[54]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",kl,[(r(!0),n(m,null,x(S.classes,s=>(r(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",jl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:T.value.includes(s.id),onChange:d=>Be(s.id)},null,40,Cl),e("span",Nl,i(O(s)),1)]),T.value.includes(s.id)?(r(),n("div",Sl,[t[53]||(t[53]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",Al,[(r(!0),n(m,null,x(B(s.id),d=>(r(),n("label",{key:d.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:c.class_ids.includes(d.id),onChange:o=>De(d.id)},null,40,Ml),e("span",Tl,i(d.label),1)]))),128)),B(s.id).length?b("",!0):(r(),n("div",Fl," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))]),t[55]||(t[55]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[56]||(t[56]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",$l,[(r(!0),n(m,null,x(F.value,s=>(r(),n("div",{key:s,class:"rounded-md border border-gray-100 bg-slate-50/40 p-2"},[e("div",Xl,i(pe(s)),1),e("div",Il,[(r(!0),n(m,null,x(E(s),d=>(r(),n("label",{key:`${s}-${d.id}`,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:(w[String(s)]||[]).map(o=>Number(o)).includes(Number(d.id)),onChange:o=>$(w[String(s)],d.id)},null,40,Vl),e("span",Bl,i(re(d)),1)]))),128)),E(s).length?b("",!0):(r(),n("div",zl," Hakuna masomo yaliyowekwa kwa darasa hili. "))])]))),128)),F.value.length?b("",!0):(r(),n("div",Dl," Chagua darasa/stream kwanza. "))]),t[57]||(t[57]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua masomo kwa kila darasa/stream.",-1))])]),e("div",Ol,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[9]||(t[9]=s=>V.value=!1)}," Cancel "),t[58]||(t[58]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save changes ",-1))])],32)])])):b("",!0),W.value&&p.value?(r(),n("div",Rl,[e("div",Ul,[t[61]||(t[61]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete teacher?",-1)),e("p",Ll,[t[59]||(t[59]=N(" This will remove ",-1)),e("span",El,i(p.value.name),1),t[60]||(t[60]=N(" from the list of teachers. You can re-create them later if needed. ",-1))]),e("div",Pl,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[10]||(t[10]=s=>W.value=!1)}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:He}," Delete ")])])])):b("",!0),I.value?(r(),n("div",ql,[e("div",Hl,[e("div",Wl,[t[62]||(t[62]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Add Teacher"),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Register a new teacher with contact details and the classes they teach. ")],-1)),e("button",{type:"button",class:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-[11px] font-bold text-gray-600 hover:bg-gray-200",onClick:t[11]||(t[11]=s=>I.value=!1)}," × ")]),e("form",{class:"space-y-3",onSubmit:je(Ue,["prevent"])},[e("div",null,[t[63]||(t[63]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Full Name",-1)),C(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>y.name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"e.g. John Peter Mwakalinga",required:""},null,512),[[U,y.name]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Phone Number",-1)),C(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>y.phone=s),type:"tel",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"07XXXXXXXX (optional)"},null,512),[[U,y.phone]])]),e("div",Jl,[e("div",null,[t[66]||(t[66]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned classes",-1)),e("div",Kl,[(r(!0),n(m,null,x(S.classes,s=>(r(),n("div",{key:s.id,class:"rounded-md border border-gray-100 bg-white"},[e("label",Yl,[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:M.value.includes(s.id),onChange:d=>Ve(s.id)},null,40,Zl),e("span",Gl,i(O(s)),1)]),M.value.includes(s.id)?(r(),n("div",Ql,[t[65]||(t[65]=e("div",{class:"text-[10px] font-semibold text-gray-600"},"Streams",-1)),e("div",ea,[(r(!0),n(m,null,x(B(s.id),d=>(r(),n("label",{key:d.id,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-slate-50"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:y.class_ids.includes(d.id),onChange:o=>ze(d.id)},null,40,ta),e("span",sa,i(d.label),1)]))),128)),B(s.id).length?b("",!0):(r(),n("div",la," Hakuna streams kwenye darasa hili. "))])])):b("",!0)]))),128))]),t[67]||(t[67]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua darasa, kisha chagua stream. Ukiacha stream bila kuchagua, hakuna assignment itahifadhiwa.",-1))]),e("div",null,[t[68]||(t[68]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Assigned subjects",-1)),e("div",aa,[(r(!0),n(m,null,x(z.value,s=>(r(),n("div",{key:s,class:"rounded-md border border-gray-100 bg-slate-50/40 p-2"},[e("div",oa,i(pe(s)),1),e("div",na,[(r(!0),n(m,null,x(E(s),d=>(r(),n("label",{key:`${s}-${d.id}`,class:"flex items-center gap-2 rounded-md px-2 py-1 text-[11px] text-gray-700 hover:bg-emerald-50/40"},[e("input",{type:"checkbox",class:"h-3.5 w-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:(j[String(s)]||[]).map(o=>Number(o)).includes(Number(d.id)),onChange:o=>$(j[String(s)],d.id)},null,40,ra),e("span",da,i(re(d)),1)]))),128)),E(s).length?b("",!0):(r(),n("div",ia," Hakuna masomo yaliyowekwa kwa darasa hili. "))])]))),128)),z.value.length?b("",!0):(r(),n("div",ua," Chagua darasa/stream kwanza. "))]),t[69]||(t[69]=e("p",{class:"mt-1 text-[10px] text-gray-500"},"Chagua masomo kwa kila darasa/stream.",-1))])]),e("div",ca,[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:t[14]||(t[14]=s=>I.value=!1)}," Cancel "),t[70]||(t[70]=e("button",{type:"submit",class:"rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700"}," Save Teacher ",-1))])],32)])])):b("",!0),K.value?(r(),n("div",pa,[e("div",ba,[t[73]||(t[73]=e("h3",{class:"mb-2 text-sm font-semibold text-gray-900"},"Delete selected teachers?",-1)),e("p",ma,[t[71]||(t[71]=N(" You are about to delete ",-1)),e("span",xa,i(v.value.length),1),t[72]||(t[72]=N(" teacher(s). This will also remove their class/subject assignments. ",-1))]),e("div",{class:"mt-3 flex justify-end gap-2"},[e("button",{type:"button",class:"rounded-md bg-gray-50 px-3 py-1.5 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:Me}," Cancel "),e("button",{type:"button",class:"rounded-md bg-red-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-red-700",onClick:Te}," Delete ")])])])):b("",!0)]}),_:1})],64))}};export{ha as default};

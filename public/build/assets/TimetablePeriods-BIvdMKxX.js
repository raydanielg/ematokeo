import{_ as T}from"./AuthenticatedLayout-DQWoHvMx.js";import{j as f,c as a,a as D,u as N,h as Y,w as $,b as t,f as b,t as o,o as i,F as c,r as m,d as h,m as E}from"./app-B6utKLpZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"flex items-start justify-between gap-3"},U={class:"mt-1 text-sm text-gray-500"},B={class:"font-semibold text-gray-800"},F={key:0},I={class:"font-semibold text-gray-800"},P={class:"space-y-4"},M={class:"rounded-lg bg-white p-5 shadow-sm ring-1 ring-gray-100"},O={class:"mt-1 text-sm text-gray-600"},R={class:"font-semibold text-gray-800"},V={class:"overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-gray-100"},W={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-100 text-left text-xs"},L={class:"bg-gray-50"},q={class:"divide-y divide-gray-100"},z={class:"whitespace-nowrap px-4 py-3 text-[11px] font-semibold text-gray-900"},G={key:0,class:"space-y-1"},J={class:"text-[11px] font-semibold text-emerald-900"},K={class:"text-[10px] font-semibold text-gray-700"},Q={key:0},X={key:1,class:"text-[10px] text-gray-300"},Z={class:"overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-gray-100"},tt={class:"overflow-x-auto"},et={class:"min-w-full divide-y divide-gray-100 text-left text-sm"},st={class:"divide-y divide-gray-100"},rt={key:0},at={class:"px-5 py-3 font-semibold text-gray-900"},ot={class:"px-5 py-3 text-gray-700"},it={class:"px-5 py-3 text-gray-700"},lt={class:"px-5 py-3 text-gray-700"},nt={class:"px-5 py-3 font-semibold text-emerald-800"},xt={__name:"TimetablePeriods",props:{timetable:{type:Object,default:()=>({})},teacherInitials:{type:String,default:""},periods:{type:Array,default:()=>[]}},setup(u){const d=u,C=f(()=>Array.isArray(d.periods)?d.periods.length:0),v=l=>({0:"08:00 - 08:40",1:"08:40 - 09:20",2:"09:20 - 10:00",3:"10:00 - 10:40",4:"11:05 - 11:45",5:"11:45 - 12:25",6:"12:25 - 01:05",7:"01:20 - 02:00",8:"02:00 - 02:40"})[l]||`Slot ${l+1}`,_=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"],w=[0,1,2,3,4,5,6,7,8],k=f(()=>{const l=Array.isArray(d.periods)?[...d.periods]:[],e={MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5};return l.sort((s,r)=>{const y=e[String(s.day||"").toUpperCase()]||99,x=e[String(r.day||"").toUpperCase()]||99;if(y!==x)return y-x;const g=Number(s.slot_index||0),n=Number(r.slot_index||0);if(g!==n)return g-n;const p=String(s.class_label||"").localeCompare(String(r.class_label||""));if(p!==0)return p;const A=String(s.stream||"").localeCompare(String(r.stream||""));return A!==0?A:Number(s.slot_index||0)-Number(r.slot_index||0)})}),S=f(()=>{const l={};return _.forEach(e=>{l[e]={}}),(Array.isArray(d.periods)?d.periods:[]).forEach(e=>{const s=String((e==null?void 0:e.day)||"").toUpperCase(),r=Number(e==null?void 0:e.slot_index);_.includes(s)&&Number.isFinite(r)&&(l[s][r]||(l[s][r]=[]),l[s][r].push({subject:(e==null?void 0:e.subject)||"",class_label:(e==null?void 0:e.class_label)||"",stream:(e==null?void 0:e.stream)||""}))}),l});return(l,e)=>(i(),a(c,null,[D(N(Y),{title:"My Periods"}),D(T,null,{header:$(()=>{var s;return[t("div",j,[t("div",null,[e[3]||(e[3]=t("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"},"My Periods",-1)),t("p",U,[e[2]||(e[2]=b(" Showing periods for initials: ",-1)),t("span",B,o(u.teacherInitials||"—"),1),(s=u.timetable)!=null&&s.title?(i(),a("span",F,[e[1]||(e[1]=b(" · Timetable: ",-1)),t("span",I,o(u.timetable.title),1)])):h("",!0)])]),t("button",{type:"button",class:"rounded-md bg-white px-3 py-1.5 text-xs font-semibold text-gray-700 ring-1 ring-gray-200 hover:bg-gray-50",onClick:e[0]||(e[0]=r=>N(E).get(l.route("teacher.timetables.my")))}," Back ")])]}),default:$(()=>[t("div",P,[t("div",M,[e[5]||(e[5]=t("div",{class:"text-sm font-semibold text-gray-800"},"Summary",-1)),t("div",O,[e[4]||(e[4]=b(" Total periods found: ",-1)),t("span",R,o(C.value),1)])]),t("div",V,[e[7]||(e[7]=t("div",{class:"border-b border-gray-100 px-5 py-3"},[t("div",{class:"text-sm font-semibold text-gray-800"},"Weekly Preview"),t("div",{class:"mt-1 text-xs text-gray-500"},"Showing only your periods (by initials) grouped by day and time.")],-1)),t("div",W,[t("table",H,[t("thead",L,[t("tr",null,[e[6]||(e[6]=t("th",{class:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-gray-600"},"Day",-1)),(i(),a(c,null,m(w,s=>t("th",{key:`hdr-${s}`,class:"min-w-[140px] px-3 py-3 text-[11px] font-semibold uppercase tracking-wide text-gray-600"},o(v(s)),1)),64))])]),t("tbody",q,[(i(),a(c,null,m(_,s=>t("tr",{key:s,class:"align-top hover:bg-gray-50"},[t("td",z,o(s),1),(i(),a(c,null,m(w,r=>{var y,x,g;return t("td",{key:`${s}-${r}`,class:"px-3 py-2"},[(g=(x=(y=S.value)==null?void 0:y[s])==null?void 0:x[r])!=null&&g.length?(i(),a("div",G,[(i(!0),a(c,null,m(S.value[s][r],(n,p)=>(i(),a("div",{key:`${s}-${r}-${p}`,class:"rounded-md bg-emerald-50 px-2 py-1 ring-1 ring-emerald-100"},[t("div",J,o(n.subject),1),t("div",K,[b(o(n.class_label),1),n.stream?(i(),a("span",Q," · "+o(n.stream),1)):h("",!0)])]))),128))])):(i(),a("div",X,"—"))])}),64))])),64))])])])]),t("div",Z,[t("div",tt,[t("table",et,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-5 py-3 text-xs font-semibold uppercase tracking-wide text-gray-600"},"Day"),t("th",{class:"px-5 py-3 text-xs font-semibold uppercase tracking-wide text-gray-600"},"Class"),t("th",{class:"px-5 py-3 text-xs font-semibold uppercase tracking-wide text-gray-600"},"Stream"),t("th",{class:"px-5 py-3 text-xs font-semibold uppercase tracking-wide text-gray-600"},"Time"),t("th",{class:"px-5 py-3 text-xs font-semibold uppercase tracking-wide text-gray-600"},"Subject")])],-1)),t("tbody",st,[k.value.length?h("",!0):(i(),a("tr",rt,[...e[8]||(e[8]=[t("td",{colspan:"5",class:"px-5 py-6 text-center text-sm text-gray-500"}," No periods found for your initials in this timetable. ",-1)])])),(i(!0),a(c,null,m(k.value,(s,r)=>(i(),a("tr",{key:`${s.day}-${s.class_label}-${s.stream}-${s.slot_index}-${r}`,class:"hover:bg-gray-50"},[t("td",at,o(s.day),1),t("td",ot,o(s.class_label||"—"),1),t("td",it,o(s.stream||"—"),1),t("td",lt,o(v(s.slot_index)),1),t("td",nt,o(s.subject||"—"),1)]))),128))])])])])])]),_:1})],64))}};export{xt as default};

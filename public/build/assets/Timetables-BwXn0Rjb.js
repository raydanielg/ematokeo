import{i as b,c as r,a as h,u as p,h as T,w as _,b as e,d,t as o,o as l,F as v,r as D,s as g,x as N,m}from"./app-BjwoS2cC.js";import{_ as j}from"./AuthenticatedLayout-C0xMlBsm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"flex items-center justify-between"},$={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},F={class:"mb-3 flex items-center justify-between gap-3"},S={class:"text-sm font-medium text-gray-700"},z={class:"overflow-x-auto"},A={class:"min-w-full text-left text-sm"},V={key:0},B={class:"px-3 py-2 align-top"},E={class:"px-3 py-2 align-top"},M={class:"px-3 py-2 align-top text-xs text-gray-600"},L={key:0},U={key:1},Y={key:2},H={class:"px-3 py-2 align-top"},I={class:"flex flex-wrap items-center gap-1"},O={class:"px-3 py-2 align-top text-xs text-gray-600"},q={class:"px-3 py-2 align-top"},G={class:"flex justify-end gap-2"},J=["onClick"],K=["disabled","onClick"],Q=["onClick"],R={class:"flex h-[85vh] w-full max-w-5xl flex-col overflow-hidden rounded-xl bg-white shadow-xl"},W={class:"flex items-center justify-between border-b border-gray-100 px-4 py-3"},X={class:"min-w-0"},Z={class:"truncate text-sm font-semibold text-gray-800"},ee={class:"mt-0.5 text-[11px] text-gray-500"},te={class:"flex items-center gap-2"},se={class:"flex-1 bg-gray-50"},ae={key:0,class:"p-6 text-center text-xs text-gray-500"},re={key:1,class:"p-6 text-center text-xs text-gray-600"},le=["src"],de={__name:"Timetables",props:{timetables:{type:Array,default:()=>[]}},setup(c){const u=b(!1),n=b(null),w=a=>{n.value=a||null,u.value=!0},k=a=>{confirm("Delete this timetable?")&&m.delete(route("timetables.destroy",a))},C=a=>{if(!a)return"-";const t=new Date(a);return Number.isNaN(t.getTime())?String(a):t.toLocaleString()},y=a=>{const t=a==null?void 0:a.schedule_json;return t?Array.isArray(t)?t.length>0:typeof t=="object"?Object.keys(t).length>0:!1:!1};return(a,t)=>(l(),r(v,null,[h(p(T),{title:"Timetables"}),h(j,null,{header:_(()=>[e("div",P,[t[4]||(t[4]=e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," Timetables "),e("p",{class:"mt-1 text-sm text-gray-500"}," View and manage class timetables. You can preview, download or delete a timetable from the list below. ")],-1)),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:t[0]||(t[0]=x=>p(m).get(a.route("timetables.create")))}," Create Timetable ")])]),default:_(()=>{var x,f;return[e("div",$,[e("div",F,[e("p",S," Timetables ("+o(c.timetables.length)+") ",1),t[5]||(t[5]=e("p",{class:"text-[11px] text-gray-500"}," Hizi ni ratiba ulizohifadhi (kwa madarasa au shule). Unaweza ku-preview, ku-print au kufuta. ",-1))]),e("div",z,[e("table",A,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Title"),e("th",{class:"px-3 py-2"},"Class"),e("th",{class:"px-3 py-2"},"Year / Term"),e("th",{class:"px-3 py-2"},"Status"),e("th",{class:"px-3 py-2"},"Created"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[c.timetables.length===0?(l(),r("tr",V,[...t[6]||(t[6]=[e("td",{colspan:"6",class:"px-3 py-4 text-center text-xs text-gray-500"}," No timetables created yet. ",-1)])])):d("",!0),(l(!0),r(v,null,D(c.timetables,s=>(l(),r("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",B,o(s.title),1),e("td",E,o(s.class_name||"-"),1),e("td",M,[s.academic_year?(l(),r("span",L,o(s.academic_year),1)):d("",!0),s.term?(l(),r("span",U," â€¢ "+o(s.term),1)):d("",!0),!s.academic_year&&!s.term?(l(),r("span",Y,"-")):d("",!0)]),e("td",H,[e("div",I,[e("span",{class:g(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold ring-1",y(s)?"bg-emerald-50 text-emerald-700 ring-emerald-100":"bg-amber-50 text-amber-800 ring-amber-100"])},o(y(s)?"Saved":"No schedule"),3),e("span",{class:g(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold ring-1",s.file_path?"bg-blue-50 text-blue-700 ring-blue-100":"bg-gray-50 text-gray-500 ring-gray-100"])},o(s.file_path?"PDF":"No PDF"),3)])]),e("td",O,o(C(s.created_at)),1),e("td",q,[e("div",G,[e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[11px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100",onClick:i=>w(s)}," Preview ",8,J),e("button",{type:"button",disabled:!s.file_path,class:g(["rounded-md px-2 py-1 text-[11px] font-medium ring-1",s.file_path?"bg-emerald-50 text-emerald-700 ring-emerald-100 hover:bg-emerald-100":"bg-gray-50 text-gray-400 ring-gray-100 cursor-not-allowed"]),onClick:i=>s.file_path&&a.window.open(a.route("timetables.download",s.id),"_blank")}," Download ",10,K),e("button",{type:"button",class:"rounded-md bg-red-50 px-2 py-1 text-[11px] font-medium text-red-700 ring-1 ring-red-100 hover:bg-red-100",onClick:i=>k(s.id)}," Delete ",8,Q)])])]))),128))])])]),u.value?(l(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4 py-6",onClick:t[3]||(t[3]=N(s=>u.value=!1,["self"]))},[e("div",R,[e("div",W,[e("div",X,[e("div",Z,o(((x=n.value)==null?void 0:x.title)||"Timetable Preview"),1),e("div",ee,o(((f=n.value)==null?void 0:f.class_name)||"-"),1)]),e("div",te,[e("button",{type:"button",class:"rounded-md bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100 hover:bg-emerald-100",onClick:t[1]||(t[1]=s=>{var i;return((i=n.value)==null?void 0:i.id)&&p(m).get(a.route("timetables.show",n.value.id))})}," Edit "),e("button",{type:"button",class:"rounded-md bg-gray-50 px-2 py-1 text-[11px] font-medium text-gray-700 ring-1 ring-gray-100 hover:bg-gray-100",onClick:t[2]||(t[2]=s=>u.value=!1)}," Close ")])]),e("div",se,[n.value?n.value.file_path?(l(),r("iframe",{key:2,src:a.route("timetables.preview",n.value.id),class:"h-full w-full"},null,8,le)):(l(),r("div",re," This timetable has no PDF yet. Use Export to generate a PDF. ")):(l(),r("div",ae," No timetable selected. "))])])])):d("",!0)])]}),_:1})],64))}};export{de as default};

import{y as T,i as c,j as w,c as u,a as k,u as r,h as $,w as U,b as e,d as g,x as B,k as f,v as C,p as D,o as m,F as v,r as M,t as l,s as y,f as F,m as z}from"./app-CwhuH3Zz.js";import{_ as R}from"./AuthenticatedLayout-LrkSe8Qb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"space-y-4"},L={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},P={class:"md:col-span-1"},q={class:"md:col-span-1"},G={class:"md:col-span-1"},H={class:"md:col-span-1"},J=["value"],K={class:"md:col-span-4 flex justify-end"},O=["disabled"],Q={class:"rounded-xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},W={class:"mb-3 flex items-center justify-between gap-3"},X={class:"text-sm font-medium text-gray-700"},Y={class:"overflow-x-auto"},Z={class:"min-w-full text-left text-sm"},ee={key:0},te={class:"px-3 py-2 align-top"},se={class:"px-3 py-2 align-top"},le={class:"flex flex-col"},ae={class:"text-gray-800"},oe={class:"text-[10px] text-gray-500"},ne={class:"px-3 py-2 align-top"},ie={class:"px-3 py-2 align-top"},re={class:"px-3 py-2 align-top"},de={class:"flex justify-end gap-2"},ue=["onClick"],me=["onClick"],xe={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},pe={class:"w-full max-w-md rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},ce={class:"mb-3 flex items-center justify-between"},ge={key:0,class:"space-y-2 text-[11px]"},fe={class:"ml-1 text-gray-800"},ye={class:"ml-1 text-gray-800"},be={class:"ml-1 text-gray-800"},ve={class:"ml-1 text-gray-800"},he={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6 sm:px-0"},_e={class:"w-full max-w-sm rounded-xl bg-white p-5 text-xs text-gray-700 shadow-lg ring-1 ring-gray-200"},we={class:"mb-3"},ke={class:"text-sm font-semibold text-gray-800"},Ue={class:"mt-0.5 text-[11px] text-gray-500"},Ce={class:"mb-3 rounded-md bg-gray-50 px-3 py-2 text-[11px] text-gray-700"},De={class:"font-semibold text-gray-800"},Me={class:"text-[10px] text-gray-500"},je={class:"flex items-center justify-end gap-2"},Ee={__name:"UserManagement",props:{users:{type:Array,default:()=>[]},schools:{type:Array,default:()=>[]}},setup(x){const h=x,n=T({name:"",email:"",role:"",school_id:""}),j=()=>{n.post(route("settings.user-management.store"))},b=c(!1),i=c(null),p=c(!1),d=c(null),a=w(()=>{const o={};return(h.users||[]).forEach(t=>{o[t.id]=t}),o}),N=w(()=>{const o={};return(h.schools||[]).forEach(t=>{o[t.id]=t}),o}),A=o=>{i.value=o,b.value=!0},S=o=>{d.value=o,p.value=!0},E=()=>{if(!d.value)return;const o=d.value;p.value=!1,z.post(route("settings.user-management.toggle",o))};return(o,t)=>(m(),u(v,null,[k(r($),{title:"User Management"}),k(R,null,{header:U(()=>[...t[6]||(t[6]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-semibold leading-tight text-gray-800"}," User Management "),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage system users, roles and access status. (Permissions are placeholders for now.) ")])],-1)])]),default:U(()=>{var _;return[e("div",I,[e("div",L,[t[13]||(t[13]=e("div",{class:"mb-3 flex items-center justify-between gap-3"},[e("p",{class:"text-sm font-medium text-gray-700"}," Add User ")],-1)),e("form",{class:"grid gap-3 text-xs md:grid-cols-4",onSubmit:B(j,["prevent"])},[e("div",P,[t[7]||(t[7]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Name",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(n).name=s),type:"text",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"Full name"},null,512),[[C,r(n).name]])]),e("div",q,[t[8]||(t[8]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Email",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(n).email=s),type:"email",class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500",placeholder:"user@example.com"},null,512),[[C,r(n).email]])]),e("div",G,[t[10]||(t[10]=e("label",{class:"mb-1 block text-[11px] font-medium"},"Role",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(n).role=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[...t[9]||(t[9]=[e("option",{value:""},"Select role",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"teacher"},"Teacher",-1),e("option",{value:"user"},"User",-1)])],512),[[D,r(n).role]])]),e("div",H,[t[12]||(t[12]=e("label",{class:"mb-1 block text-[11px] font-medium"},"School (optional)",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(n).school_id=s),class:"w-full rounded-md border border-gray-300 px-2 py-1.5 text-[11px] focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"},[t[11]||(t[11]=e("option",{value:""},"No school selected",-1)),(m(!0),u(v,null,M(x.schools,s=>(m(),u("option",{key:s.id,value:s.id},l(s.name),9,J))),128))],512),[[D,r(n).school_id]])]),e("div",K,[e("button",{type:"submit",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",disabled:r(n).processing}," Save User ",8,O)])],32)]),e("div",Q,[e("div",W,[e("p",X," Users ("+l(x.users.length)+") ",1),t[14]||(t[14]=e("div",{class:"flex items-center gap-2 text-[11px] text-gray-500"},[e("span",{class:"inline-flex h-2 w-2 rounded-full bg-emerald-500"}),e("span",null,"Active"),e("span",{class:"inline-flex h-2 w-2 rounded-full bg-gray-300"}),e("span",null,"Disabled")],-1))]),e("div",Y,[e("table",Z,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"border-b border-gray-200 bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"px-3 py-2"},"Name"),e("th",{class:"px-3 py-2"},"Username / Email"),e("th",{class:"px-3 py-2"},"Role"),e("th",{class:"px-3 py-2"},"Status"),e("th",{class:"px-3 py-2 text-right"},"Actions")])],-1)),e("tbody",null,[x.users.length===0?(m(),u("tr",ee,[...t[15]||(t[15]=[e("td",{colspan:"5",class:"px-3 py-4 text-center text-xs text-gray-500"}," No users found yet. ",-1)])])):g("",!0),(m(!0),u(v,null,M(x.users,s=>(m(),u("tr",{key:s.id,class:"border-b border-gray-100 text-xs text-gray-700 hover:bg-gray-50"},[e("td",te,l(s.name),1),e("td",se,[e("div",le,[e("span",ae,l(s.username||s.email),1),e("span",oe,l(s.email),1)])]),e("td",ne,[e("span",{class:y(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide ring-1",s.role==="admin"?"bg-emerald-50 text-emerald-700 ring-emerald-200":"bg-gray-50 text-gray-600 ring-gray-200"])},l(s.role||"User"),3)]),e("td",ie,[e("span",{class:y(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-medium ring-1",s.is_active?"bg-emerald-50 text-emerald-700 ring-emerald-200":"bg-gray-50 text-gray-600 ring-gray-200"])},[e("span",{class:y(["h-1.5 w-1.5 rounded-full",s.is_active?"bg-emerald-500":"bg-gray-400"])},null,2),F(" "+l(s.is_active?"Active":"Disabled"),1)],2)]),e("td",re,[e("div",de,[e("button",{type:"button",class:"rounded-md bg-blue-50 px-2 py-1 text-[11px] font-medium text-blue-700 ring-1 ring-blue-100 hover:bg-blue-100",onClick:V=>A(s.id)}," Details ",8,ue),e("button",{type:"button",class:"rounded-md bg-gray-50 px-2 py-1 text-[11px] font-medium text-gray-700 ring-1 ring-gray-200 hover:bg-gray-100",onClick:V=>S(s.id)},l(s.is_active?"Disable":"Enable"),9,me)])])]))),128))])])])])]),b.value?(m(),u("div",xe,[e("div",pe,[e("div",ce,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-800"}," User Details "),e("p",{class:"mt-0.5 text-[11px] text-gray-500"}," Basic information for this account. ")],-1)),e("button",{type:"button",class:"text-[11px] text-gray-500 hover:text-gray-700",onClick:t[4]||(t[4]=s=>b.value=!1)}," Close ")]),i.value&&a.value[i.value]?(m(),u("div",ge,[e("div",null,[t[18]||(t[18]=e("span",{class:"font-medium text-gray-700"},"Name:",-1)),e("span",fe,l(a.value[i.value].name),1)]),e("div",null,[t[19]||(t[19]=e("span",{class:"font-medium text-gray-700"},"Email:",-1)),e("span",ye,l(a.value[i.value].email),1)]),e("div",null,[t[20]||(t[20]=e("span",{class:"font-medium text-gray-700"},"Role:",-1)),e("span",be,l(a.value[i.value].role||"User"),1)]),e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",{class:y(["ml-1",a.value[i.value].is_active?"text-emerald-700":"text-gray-600"])},l(a.value[i.value].is_active?"Active":"Disabled"),3)]),e("div",null,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-700"},"School:",-1)),e("span",ve,l(a.value[i.value].school_id?((_=N.value[a.value[i.value].school_id])==null?void 0:_.name)||"Unknown":"Not assigned"),1)])])):g("",!0)])])):g("",!0),p.value&&d.value&&a.value[d.value]?(m(),u("div",he,[e("div",_e,[e("div",we,[e("h3",ke,l(a.value[d.value].is_active?"Disable User":"Enable User"),1),e("p",Ue," Are you sure you want to "+l(a.value[d.value].is_active?"disable":"enable")+" this account? ",1)]),e("div",Ce,[e("p",De,l(a.value[d.value].name),1),e("p",Me,l(a.value[d.value].email),1)]),e("div",je,[e("button",{type:"button",class:"rounded-md bg-gray-100 px-3 py-1.5 text-[11px] font-medium text-gray-700 hover:bg-gray-200",onClick:t[5]||(t[5]=s=>p.value=!1)}," Cancel "),e("button",{type:"button",class:"inline-flex items-center rounded-md bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1",onClick:E}," Confirm ")])])])):g("",!0)]}),_:1})],64))}};export{Ee as default};
